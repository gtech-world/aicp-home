"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[725],{62353:function(je,le,a){a.d(le,{dW:function(){return se},ub:function(){return ve}});var me=a(86378),d=a.n(me),fe=a(30577),E=a.n(fe),xe=a(44946),Y=a(84875),q=a.n(Y),u=a(50959),oe=a(1950),P=a(99592),B=a(77588),v=a(11527);function se(p){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(0,u.useState)(c),U=E()(i,2),k=U[0],R=U[1];return(0,u.useEffect)(function(){R(c)},[p,c]),{onChange:R,items:p,current:k}}function pe(p){var c=p.items,i=p.current,U=p.onChange,k=p.className,R=k===void 0?"bg-white text-black px-5 py-3 text-lg rounded-lg w-[31.25rem] mo:w-full mo:text-sm":k,o=p.currentClassName,ie=o===void 0?"flex justify-between items-center":o,ee=p.openClassName,ue=ee===void 0?"max-h-[18rem] bg-white  rounded-lg py-3 ":ee,e=c[i]?c[i].text:"",he=(0,P.Z)(!1),de=E()(he,2),te=de[0],ce=de[1],ge=(0,u.useCallback)(function(M){i!==M&&U(M)},[i]),T=(0,xe.E)("t-side");return(0,B.Z)(T,function(){return te&&ce(!1)}),c.length===0?null:(0,v.jsxs)("div",{ref:T,className:q()("relative cursor-pointer",R),onClick:function(){return ce()},children:[(0,v.jsxs)("div",{className:ie,children:[(0,v.jsx)("span",{className:"truncate",children:e}),te?(0,v.jsx)(oe.pzk,{}):(0,v.jsx)(oe._i7,{})]}),te&&(0,v.jsx)("div",{className:q()("absolute z-[100] left-0 w-full overflow-x-hidden overflow-y-auto",ue),style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:(0,v.jsx)("div",{className:"",children:c.map(function(M,ae){return(0,v.jsx)("div",{style:{},className:q()("w-full break-all px-5 py-2 text-sm hover:bg-gray-16",{"text-green-2":ae===i}),onClick:function(){return ge(ae)},children:M.text},"select_item_".concat(ae))})})})]})}var ve=function(c){return(0,v.jsx)(pe,d()({className:"h-[50px] px-5 items-center bg-stone-50 rounded-lg border border-neutral-200",currentClassName:"h-full flex justify-between items-center"},c))}},11257:function(je,le,a){a.r(le),a.d(le,{default:function(){return Se}});var me=a(86378),d=a.n(me),fe=a(58357),E=a.n(fe),xe=a(71977),Y=a.n(xe),q=a(30577),u=a.n(q),oe=a(24047),P=a.n(oe),B=a(67454),v=a(67747),se=a(51500),pe=a(76141),ve=a(10225),p=a(81609),c=a(97707),i=a(14803),U=a(35016),k=a(84875),R=a.n(k),o=a(50959),ie=a(72121),ee=a(62353),ue=a(9441),e=a(11527),he=function(j){var m=j.onOpenModal,S=j.realData,f=j.tableData,h=j.realArr,I=(0,o.useState)(f),K=u()(I,2),$=K[0],V=K[1],z=(0,ue.N)(),F=z.formatDate,ne=function(){for(var s,x=(s=document)===null||s===void 0?void 0:s.getElementById("realDataTable"),G=x.getElementsByTagName("tr"),w=[],b=0;b<G.length;b++){for(var O=[],J=G[b].getElementsByTagName("input"),_=0;_<J.length;_++){var A=J[_].value;O.push(A)}w.push(O)}var Z=[];Z=f==null?void 0:f.map(function(t,n){var l={processId:t.context["@id"],paramValue:w.slice(1)[n][0]||t.value.toString(),paramName:t.name,dateTime:F(Date.now())};return l});var r={lcaParamList:Z};typeof m=="function"&&m(),typeof S=="function"&&S(r)};(0,o.useEffect)(function(){var g=f==null?void 0:f.map(function(s,x){return h!=null&&h.length&&h[x].paramName===s.name?d()(d()({},s),{},{inputValue:h[x].paramValue}):d()({},s)});V(g)},[h,f]);var H=[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:"9rem",render:function(s){return(0,e.jsx)("div",{className:" flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:s})}},{title:"\u8FC7\u7A0B\u540D\u79F0",dataIndex:"name",width:"7rem",render:function(s,x){return(0,e.jsx)("div",{className:"flex items-center  h-[33px] font-normal leading-[21px] text-[14px] ",children:x.context.name})}},{title:"\u53C2\u8003\u503C",width:"10rem",dataIndex:"value",render:function(s){return(0,e.jsx)("div",{className:"flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:s})}},{title:"\u586B\u5165\u503C",width:"10rem",dataIndex:"createTime",render:function(s,x){return(0,e.jsx)("input",{defaultValue:x.inputValue,type:"number",className:"font-normal  leading-[21px] text-[14px] w-[10rem] h-[33px] "})}}];return(0,e.jsxs)(ie.u_,{title:"\u5B9E\u666F\u6570\u636E\u586B\u62A5",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",onClose:typeof m=="function"&&m||void 0,children:[(0,e.jsx)("div",{className:" mx-5 w-[640px] max-h-[400px] overflow-y-auto ",children:(0,e.jsx)(se.i,{columns:H,tableId:"realDataTable",data:$||[],isSetBorder:!0,maxHeight:"calc(100vh - 260px)",headerClassName:{background:"#DDDDDD",position:"sticky",top:"-1px",fontWeight:"700",fontSize:"18px",lineHeight:"30px",height:"50px"}})}),(0,e.jsx)("div",{className:"mx-5 ",children:(0,e.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5",children:[(0,e.jsx)(B.u,{onClick:typeof m=="function"&&m||void 0,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"\u53D6\u6D88"}),(0,e.jsx)(B.u,{className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:ne,children:"\u786E\u5B9A"})]})})]})},de=he,te={loadName:"",productId:""},ce=function(j){var m,S=j.openResultModal,f=j.getList,h=(0,o.useState)(!1),I=u()(h,2),K=I[0],$=I[1],V=(0,o.useState)([{name:"",id:""}]),z=u()(V,2),F=z[0],ne=z[1],H=(0,o.useState)({lcaParamList:[]}),g=u()(H,2),s=g[0],x=g[1],G=(0,o.useState)([]),w=u()(G,2),b=w[0],O=w[1],J=(0,o.useState)(te),_=u()(J,2),A=_[0],Z=_[1],r=(0,o.useMemo)(function(){return F.map(function(y){return d()(d()({},y),{},{text:y.name})})},[F]),t=(0,ee.dW)(r,-1),n=(m=t.items[t.current])===null||m===void 0?void 0:m.id,l=(0,o.useState)(!0),W=u()(l,2),C=W[0],be=W[1],Ce=(0,ue.N)(),ye=Ce.formatDate,Ee=function(){(0,c.ev)().then(function(D){ne(D||{name:"",id:""}),be(!1)}).catch(function(D){}).finally()},Te=function(){var D,Q=A.loadName;if(!(!Q||!n)){var L=b==null?void 0:b.map(function(re){return{processId:re.context["@id"],paramValue:re.value.toString(),paramName:re.name,dateTime:ye(Date.now())}}),X=(D=s.lcaParamList)!==null&&D!==void 0&&D.length?s:{lcaParamList:L.length?L:void 0},N=d()(d()({},X),{},{loadName:Q,productId:n});(0,c.E)(N).then(function(re){typeof f=="function"&&f()}).catch(function(re){}).finally(function(){typeof S=="function"&&S()})}};(0,o.useEffect)(function(){Ee()},[]);var Ie=function(){n&&$(!0)},Me=function(D){var Q=D.target,L=Q.name,X=Q.value;Z(function(N){return d()(d()({},N),{},P()({},L,X))})},we=function(){var y=Y()(E()().mark(function D(){return E()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:(0,c.NF)(n).then(function(X){var N=JSON.parse(X.paramDetail)[0]||[];O(JSON.stringify(N)==="{}"||!(N!=null&&N.parameters)?[]:N==null?void 0:N.parameters)}).catch(function(X){}).finally();case 1:case"end":return L.stop()}},D)}));return function(){return y.apply(this,arguments)}}();return(0,o.useEffect)(function(){n&&we()},[n]),C?null:(0,e.jsxs)(o.Fragment,{children:[(0,e.jsx)(ie.u_,{className:"rounded-lg",containerClassName:"mx-5 w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",title:"\u65B0\u5EFA\u78B3\u8DB3\u8FF9\u7ED3\u679C",onClose:S,children:(0,e.jsxs)("div",{className:"mx-5 w-[640px] ",children:[(0,e.jsx)("span",{className:"font-normal leading-6 ",children:"\u78B3\u8DB3\u8FF9\u6279\u6B21\uFF1A"}),(0,e.jsx)("input",{value:A.loadName,onChange:Me,id:"loadName",name:"loadName",maxLength:30,className:"w-full mb-[20px] mt-[10px] px-5 border border-[#DDDDDD]  h-[50px]  bg-[#F8F8F8] rounded-lg"}),(0,e.jsx)("div",{className:"font-normal leading-6  mb-[10px]",children:"\u4EA7\u54C1\u7CFB\u7EDF\uFF1A"}),(0,e.jsx)(ee.ub,d()(d()({},t),{},{openClassName:"max-h-[9rem] bg-white  rounded-lg py-3 "})),(0,e.jsx)("div",{className:"mt-5 font-normal leading-6",children:"\u5B9E\u666F\u6570\u636E\u586B\u62A5\uFF1A"}),(0,e.jsx)("div",{onClick:function(){return Ie()},className:" flex cursor-pointer rounded-[4px] leading-4 text-[16px] mt-[10px] bg-[#F1F1F1] w-[84px] h-[24px]  text-center items-center justify-center ",children:"\u524D\u5F80\u586B\u5199"}),(0,e.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5",children:[(0,e.jsx)(B.u,{onClick:S,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"\u53D6\u6D88"}),(0,e.jsx)(B.u,{className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:Te,disabled:!n||!A.loadName,children:"\u8BA1\u7B97\u78B3\u7ED3\u679C"})]})]})}),K&&(0,e.jsx)(de,{realData:x,tableData:b,realArr:s.lcaParamList,onOpenModal:function(){return $(!1)}})]})},ge=ce,T,M=(T={},P()(T,-1,{color:"text-[red]",text:"\u8BA1\u7B97\u5931\u8D25"}),P()(T,0,{color:"text-[#FF9800]",text:"\u7B49\u5F85\u8BA1\u7B97"}),P()(T,1,{color:"text-green-2",text:"\u67E5\u770B\u7ED3\u679C"}),P()(T,2,{color:"text-blue-600",text:"\u6B63\u5728\u8BA1\u7B97"}),T);function ae(){var De=(0,o.useState)(1),j=u()(De,2),m=j[0],S=j[1],f=(0,o.useState)({}),h=u()(f,2),I=h[0],K=h[1],$=(0,o.useState)(!1),V=u()($,2),z=V[0],F=V[1],ne=(0,o.useState)(!1),H=u()(ne,2),g=H[0],s=H[1],x=(0,o.useRef)({inputData:"",data:""}),G=(0,o.useState)(!0),w=u()(G,2),b=w[0],O=w[1],J=function(t){var n=t.param,l=t.paramDetail;x.current={inputData:n,data:l},s(!0)},_=(0,o.useMemo)(function(){return[{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"loadName",width:"180px",render:function(t){return(0,e.jsx)("span",{"data-tooltip-id":"tooltip","data-tooltip-place":"top-start","data-tooltip-content":(0,i.iT)(t,9),className:"w-[180px] font-normal  text-lg leading-[27px] truncate inline-block",children:t})}},{title:"\u5B9E\u666F\u6570\u636E",dataIndex:"productName",width:"6rem",render:function(t,n){return(0,e.jsx)("div",{className:"flex justify-center text-lg leading-[27px]  w-[8rem] bg-[#F1F1F1] rounded",onClick:function(){return J(n)},children:(0,e.jsx)("span",{className:"cursor-pointer ",children:"\u67E5\u770B\u5B9E\u666F\u6570\u636E"})})}},{title:"\u6279\u6B21\u7ED3\u679CID",dataIndex:"loadNumber",width:"8rem",render:function(t){return(0,e.jsx)("span",{"data-tooltip-content":t,"data-tooltip-id":"tooltip",className:" text-lg leading-[27px] w-[13rem]  truncate inline-block",children:(0,i.lS)(t,8,8)})}},{title:"\u4EA7\u54C1\u7CFB\u7EDF\u540D\u79F0",width:"2rem",dataIndex:"productName",render:function(t){return(0,e.jsx)("span",{"data-tooltip-content":(0,i.iT)(t,15),"data-tooltip-id":"tooltip",className:" text-lg  truncate inline-block leading-[27px] max-w-[14rem] ",children:t})}},{title:"\u7CFB\u7EDF\u4EA7\u54C1ID",width:"7rem",dataIndex:"productUuid",render:function(t){return(0,e.jsx)("span",{"data-tooltip-content":t,"data-tooltip-id":"tooltip",className:"w-[13rem] text-lg leading-[27px]  truncate inline-block",children:(0,i.lS)(t,8,8)})}},{title:"\u63CF\u8FF0",dataIndex:"productDescription",width:"18.75rem",render:function(t){return(0,e.jsx)("span",{"data-tooltip-content":(0,i.iT)(t,11),"data-tooltip-id":"tooltip",className:"w-[13rem]  text-lg leading-[27px] truncate inline-block",children:t||"-"})}},{title:"\u64CD\u4F5C\u4EBA",dataIndex:"operator",width:"6.25rem",render:function(t){return(0,e.jsx)("span",{"data-tooltip-content":(0,i.iT)(t,19),"data-tooltip-id":"tooltip",className:" truncate inline-block text-lg leading-[27px] max-w-[14rem] ",children:t})}},{title:"\u751F\u6210\u65F6\u95F4",dataIndex:"calculateSuccessTime",width:"18.625rem",render:function(t){return(0,e.jsx)("span",{className:"max-w-[11rem] text-lg leading-[27px]  truncate inline-block",children:t})}},{title:"\u78B3\u8DB3\u8FF9\u7ED3\u679C",dataIndex:"description",width:"8.125rem",render:function(t,n){var l,W;return(0,e.jsx)("div",{className:R()("flex justify-between ".concat((l=M[n==null?void 0:n.state])===null||l===void 0?void 0:l.color)),children:(0,e.jsx)(U.Link,{className:"cursor-pointer text-lg leading-[27px]",to:n.state===1?"/main/tools/inventory/result?id=".concat(n.loadNumber):"",children:(W=M[n==null?void 0:n.state])===null||W===void 0?void 0:W.text})})}},{title:"\u7EC4\u7EC7\u540D\u79F0",dataIndex:"orgName",width:"8.125rem",render:function(t){return(0,e.jsx)("span",{"data-tooltip-content":(0,i.iT)(t,11),"data-tooltip-id":"tooltip",className:"truncate inline-block text-lg leading-[27px] max-w-[14rem] ",children:t})}},{title:"\u7EC4\u7EC7\u7F16\u53F7",dataIndex:"orgSerialNumber",width:"8.125rem",emptyText:"-",render:function(t){return(0,e.jsx)("span",{"data-tooltip-id":"tooltip","data-tooltip-content":(0,i.iT)(t,11),className:"truncate inline-block text-lg leading-[27px] max-w-[14rem] ",children:t})}}]},[]),A=(0,o.useCallback)(Y()(E()().mark(function r(){var t;return E()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,c.h4)(m);case 3:t=l.sent,K(t),O(!1),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(0),console.log("eeee",l.t0);case 11:case"end":return l.stop()}},r,null,[[0,8]])})),[m]);(0,o.useEffect)(function(){var r=!1,t=function(){var n=Y()(E()().mark(function l(){return E()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!r){C.next=3;break}return C.abrupt("return");case 3:return C.next=5,A();case 5:return C.next=7,(0,i._v)(1e4);case 7:C.next=0;break;case 9:case"end":return C.stop()}},l)}));return function(){return n.apply(this,arguments)}}();return t(),function(){r=!0}},[]);var Z=(0,p.b)();return(0,e.jsxs)(pe._z,{title:"\u6211\u7684\u4EA7\u54C1\u78B3\u8DB3\u8FF9\u7ED3\u679C",children:[(0,e.jsxs)("div",{className:"",children:[(0,e.jsx)("h3",{className:"flex items-center justify-between text-2xl font-semibold",children:Z&&(0,e.jsx)(B.z,{onClick:function(){return F(!0)},className:R()("w-40 text-lg font-normal text-white rounded-lg bg-green-2 h-11"),children:"\u65B0\u5EFA\u78B3\u8DB3\u8FF9\u7ED3\u679C"})}),(0,e.jsx)("div",{className:"w-full p-5 mt-5 bg-white rounded-2xl",children:(0,e.jsx)("div",{className:"pb-6 mt-5 overflow-x-auto",children:(0,e.jsx)("div",{className:"text-base leading-[1.625rem] min-w-[62.25rem]",children:(0,e.jsx)(se.i,{loading:b,columns:_,columnsHeight:"h-[3.125rem] ",mouseHoverKey:"loadNumber",columnsClassName:" cursor-default ",data:(I==null?void 0:I.records)||[],className:"",headerClassName:{background:"#fff",fontWeight:"700",fontSize:"18px",lineHeight:"27px",height:"3.125rem"}})})})})]}),(0,e.jsx)(v.t,{className:"my-8",onChange:function(t,n){S(t),!(t===1||!n)&&(O(!0),(0,i.k3)())},total:I.total||0,pgSize:10,pgNum:m}),z&&(0,e.jsx)(ge,{openResultModal:function(){return F(!1)},getList:function(){S(1),m===1&&A()}}),g&&(0,e.jsx)(ve.d,d()(d()({},x.current),{},{onClose:function(){return s(!1)}}))]})}var Ne=ae,Se=Ne}}]);

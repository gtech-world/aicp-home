"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2941],{64082:function(G,C,n){var D=n(48651),d=n.n(D),u=n(38046),s=n.n(u),B=n(30541),h=n(33421),y=n(68591),P=n.n(y),f=n(63342),x=["className"];function O(g){var a=g.className,p=s()(g,x),i=(0,h.l)(function(c){var E=c.token;return{".ant-page-header":{padding:"1rem 1.5rem",paddingBlock:"1rem !important",paddingInline:"1.5rem !important",backgroundColor:E.colorBgBase,".ant-breadcrumb":{fontSize:".875rem",paddingBlockStart:"0 !important"},".ant-page-header-heading-title":{fontSize:"1.25rem"}},".ant-pro-grid-content":{padding:"1.5rem",backgroundColor:"transparent",".ant-pro-page-container-children-content":{padding:0,paddingBlock:"0 !important"},".ant-pro-page-container-children-container":{paddingBlock:"0 !important",paddingInline:"0 !important"}}}});return(0,f.jsx)(B._z,d()({className:P()(a,i)},p))}C.Z=O},18842:function(G,C,n){n.d(C,{rx:function(){return c},zL:function(){return i}});var D=n(48651),d=n.n(D),u=n(38046),s=n.n(u),B=n(81123),h=n(54695),y=n(33421),P=n(9021),f=n(68591),x=n.n(f),O=n(97207),g=n.n(O),a=n(63342),p=["className","columns"];function i(E){return g().size(E)>=16?(0,a.jsx)(P.Z,{title:E,children:(0,B.lS)(E,8,8)}):E}function c(E){var X=E.className,_=E.columns,V=s()(E,p),R=(0,y.l)(function(I){var Y=I.token;return{".ant-table-container":{borderStartStartRadius:"0 !important",borderStartEndRadius:"0 !important"},".ant-pro-card-body":{paddingInline:"0 !important",paddingBlock:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:first-child":{borderStartStartRadius:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:last-child":{borderStartEndRadius:"0 !important"},".ant-pagination-item, .ant-pagination-prev, .ant-pagination-next":{borderRadius:"2px !important",minWidth:"30px !important",height:"30px !important",lineHeight:"28px !important"},".ant-pagination-total-text":{lineHeight:"30px !important",visibility:"hidden"}}}),N=g().sumBy(_,"width");return(0,a.jsx)(h.Z,d()({bordered:!0,columns:_,scroll:{x:N},search:!1,options:!1,rowKey:"key",className:x()(X,"p-6",R)},V))}C.ZP=c},8242:function(G,C,n){var D=n(68591),d=n.n(D),u=n(63342),s=function(h){var y=h.onClick,P=h.busy,f=h.btnText,x=h.btnClassName,O=h.prohibit;return(0,u.jsx)("div",{onClick:O?void 0:y,className:d()("flex hover:border-[#29953A] hover:text-[#29953A] border text-[#000000] rounded-[2px] leading-4 text-[14px]  w-[100px] h-[24px]  text-center items-center justify-center ",P?"cursor-not-allowed":"cursor-pointer",O?" border bg-[#F5F5F5] text-[#00000040] cursor-no-drop hover:border-[#F5F5F5] hover:text-[#00000040]  ":"cursor-pointer",x),children:f})};C.Z=s},46284:function(G,C,n){var D=n(48651),d=n.n(D),u=n(38046),s=n.n(u),B=n(74589),h=n(79685),y=n(63342),P=["options","data","optionEmptyText","wrapperStyle","hideIfEmpty"],f=["render","dataIndex","show"],x=B.Z.Item,O=function(a){var p=a.options,i=a.data,c=a.optionEmptyText,E=a.wrapperStyle,X=E===void 0?"backroundColor: 'red'":E,_=a.hideIfEmpty,V=s()(a,P);return console.log("wrapperStyle",X),(0,h.useMemo)(function(){return(0,y.jsx)(B.Z,d()(d()({},V),{},{children:p.map(function(R){var N=R.render,I=R.dataIndex,Y=R.show,z=s()(R,f),$="";if(Y!==!1&&(console.log("dadatatadatadata",i[I],I),!(typeof N=="function"&&($=N(i[I],i),$===!1))&&!(_&&(i[I]===void 0||i[I]===null)&&(typeof N!="function"||$==null||$==="")))){var re=typeof c!="undefined"&&c!==null?c:"";return console.log("emptyTextemptyText",re,$),(0,h.createElement)(x,d()(d()({},z),{},{key:I}),typeof N=="function"?$||re:typeof i[I]!="undefined"&&i[I]!==null?i[I]:re)}})}))},[a])};C.Z=O},9991:function(G,C,n){n.d(C,{u:function(){return a},z:function(){return g}});var D=n(48651),d=n.n(D),u=n(38046),s=n.n(u),B=n(68591),h=n.n(B),y=n(68717),P=n(31887),f=n(63342),x=["children","className"],O=["busy","type","className","defStyle","children"];function g(p){var i=p.children,c=p.className,E=s()(p,x);return(0,f.jsx)("button",d()(d()({},E),{},{className:h()(c),children:p.children}))}function a(p){var i=p.busy,c=p.type,E=c===void 0?"primary":c,X=p.className,_=p.defStyle,V=_===void 0?"btn-primary":_,R=p.children,N=s()(p,O);return(0,f.jsx)(P.ZP,d()(d()({type:V==="btn-primary-1"?"default":E,className:h()(X,"leading-none !shadow-none",{})},N),{},{children:i?(0,f.jsx)(y.fCD,{className:"animate-spin mx-auto"}):R}))}},11e3:function(G,C,n){n.d(C,{I:function(){return O},g:function(){return x}});var D=n(48651),d=n.n(D),u=n(38046),s=n.n(u),B=n(68591),h=n.n(B),y=n(26082),P=n(63342),f=["className","color","size"];function x(g){var a=g.className,p=g.color,i=g.size,c=i===void 0?"":i,E=s()(g,f);return(0,P.jsx)("div",d()(d()({},E),{},{className:h()("text-black w-full h-full flex items-center justify-center",a),children:(0,P.jsx)(y.uur,{color:p,style:c?{fontSize:c}:{},className:"text-[3.125rem] animate-spin"})}))}function O(){return(0,P.jsx)(x,{className:"fixed z-50 left-0 top-0 w-full !h-full bg-black/25"})}},95968:function(G,C,n){n.d(C,{u_:function(){return X}});var D=n(48651),d=n.n(D),u=n(86516),s=n.n(u),B=n(38046),h=n.n(B),y=n(97980),P=n(68591),f=n.n(P),x=n(79685),O=n(50374),g=n(22798),a=n(63342),p=["className","title","onClose","outClose","titleClassName","containerClassName","chilrenClassName","bottomBtn","children","line"],i={current:null};i.current=document.body;function c(_){var V=_.title,R=_.onClose,N=_.titleClassName,I=_.containerClassName;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:f()("flex items-center justify-between mt-5  text-base font-semibold mx-5",I),children:[(0,a.jsx)("div",{className:f()("max-w-[70%] overflow-hidden text-ellipsis whitespace-nowrap",N),children:V}),(0,a.jsx)(g.q5L,{onClick:function(z){z.stopPropagation(),R&&R()},className:"text-2xl cursor-pointer"})]}),(0,a.jsx)("div",{className:"mt-5 border-b "})]})}function E(){return _jsx("div",{})}function X(_){var V=_.className,R=_.title,N=_.onClose,I=_.outClose,Y=I===void 0?!1:I,z=_.titleClassName,$=_.containerClassName,re=_.chilrenClassName,be=_.bottomBtn,Ce=_.children,ge=_.line,t=ge===void 0?!1:ge,De=h()(_,p),se=(0,x.useRef)(null),Pe=(0,x.useState)(!0),xe=s()(Pe,2),de=xe[0],Ee=xe[1],ye=function(){N&&(Ee(!0),setTimeout(function(){return N()},300))},Ne=(0,y.R)(function(ue){ue.stopPropagation();var Me=se.current&&se.current!==ue.target&&se.current.contains(ue.target);!Me&&Y&&ye()});return(0,x.useEffect)(function(){Ee(!1)},[]),i.current?(0,O.createPortal)((0,a.jsx)("div",d()(d()({},De),{},{ref:se,className:f()("fixed left-0  top-0 w-full h-full overflow-auto z-[500] flex justify-center items-center",{"transition-[background_ease_300ms]":!0,"bg-black/0":de,"bg-black/25":!de},V),onClick:Ne,children:(0,a.jsxs)("div",{id:"mo",className:f()("bg-white rounded min-w-[20rem]  min-h-[150]",{"transition-[all_ease_300ms]":!0,"scale-0":de,"scale-100":!de}),children:[(0,a.jsx)(c,{title:R,containerClassName:$,titleClassName:z,onClose:ye}),(0,a.jsx)("div",{className:f()("mt-5",re),children:Ce}),t&&(0,a.jsx)("div",{className:"p-6 border-t mt-5",children:be})]})})),i.current):null}},8965:function(G,C,n){n.d(C,{H4:function(){return h},Kv:function(){return B},TW:function(){return a},Tz:function(){return P},We:function(){return y},Y5:function(){return O},cc:function(){return x},cu:function(){return p},e0:function(){return g},uU:function(){return f}});var D=n(97207),d=n.n(D),u=n(94437),s=n(54916);function B(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,u.ZP)("/api/product-system/".concat(i,"/detail"),{refreshInterval:c})}function h(i){return(0,u.ZP)(d().isNil(i)?null:"/api/verifyRecord/".concat(i,"/detail"))}function y(i){return(0,u.ZP)(i?"/api/inventory/all":null)}function P(i){return(0,u.ZP)(i?"/api/verifyRecord/verifiers":null)}function f(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,u.ZP)("/api/product-system/list/?pageNum=".concat(i,"&pageSize=10"),{refreshInterval:c})}function x(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,u.ZP)("/api/inventory/list/?pageNum=".concat(i,"&pageSize=10"),{refreshInterval:c})}function O(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,u.ZP)("/api/verifyRecord/list/?pageNum=".concat(i,"&pageSize=10"),{refreshInterval:c})}function g(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(0,u.ZP)("/api/sbt/token/list/?pageNum=".concat(i,"&pageSize=999"))}function a(i){return(0,u.ZP)(i?"/api/sbt/token/uuid/".concat(i):null,{fetcher:s.Gh})}function p(i){return(0,u.ZP)(i?"/api/sbt/token/nft/".concat(i):null,{fetcher:s.Gh})}},97980:function(G,C,n){n.d(C,{R:function(){return d}});var D=n(79685);function d(u){var s=(0,D.useRef)(u);return(0,D.useLayoutEffect)(function(){s.current=u}),(0,D.useCallback)(function(){return s.current&&s.current.apply(s,arguments)},[])}},11187:function(G,C,n){n.r(C),n.d(C,{default:function(){return We}});var D=n(48651),d=n.n(D),u=n(86516),s=n.n(u),B=n(64082),h=n(18842),y=n(9991),P=n(99095),f=n(4151),x=n(8965),O=n(97207),g=n.n(O),a=n(79685),p=n(8242),i=n(46284),c=n(11e3),E=n(95968),X=n(22786),_=n.n(X),V=n(46299),R=n.n(V),N=n(54916);function I(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,M=(0,a.useRef)(new AbortController),Q=function(K){var L=K,J=function(){if(L.length!==0){var W=L[0];return L=g().drop(L),{file:W,index:K.length-L.length-1}}},F=g().min([_e,L.length]),te=g().range(K.length),q=function(){var T=R()(_()().mark(function W(){var S,b,H,A;return _()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(S=J(),!S){m.next=10;break}return b=S.file,H=S.index,m.next=6,(0,N.qM)(b,{signal:M.current.signal});case 6:A=m.sent,te[H]=A,m.next=11;break;case 10:return m.abrupt("return");case 11:m.next=0;break;case 13:case"end":return m.stop()}},W)}));return function(){return T.apply(this,arguments)}}();return Promise.all(g().range(F).map(function(){return q()})).then(function(){return te})};return[Q,function(){try{M.current.abort()}catch(k){console.info("abort upfiles")}}]}var Y=n(81123),z=n(3826),$=n(51791),re=n(7698),be=n(50510),Ce=n.n(be),ge=n(98919),t=n(63342),De=function(M){return(0,t.jsx)("div",{className:"font-normal leading-[21.79px] text-[14px] text-gray-9",children:M.value})},se=function(M){var Q,k,K,L,J,F=M.closeModal,te=M.recordId,q=M.type,T=q===void 0?"new":q,W=(0,a.useRef)(null),S=(0,P.oR)(),b=S.userData,H=(0,x.H4)(te),A=H.isLoading,e=H.data,m=(0,x.We)(T==="new"||T==="editor"),oe=m.isLoading,ee=m.data,w=(0,x.Tz)(T==="new"||T==="editor"),je=w.isLoading,ve=w.data,fe=A||oe||je,j=(0,ge.Z)({verifyState:!0,carbonNum:""}),Z=s()(j,2),r=Z[0],U=Z[1],pe=I(),me=s()(pe,2),Oe=me[0],Se=me[1];(0,a.useEffect)(function(){return Se},[]);var he=!r.files||r.files.length===0||r.files.length>20||g().findIndex(r.files,function(l){return l.size>=1024*1024*1024*2||l.name.length>=128})>=0,Te=!ee||!ve||!r.name||!r.carbonNum||!r.verifyName||he,Ke=(0,a.useState)(!1),Be=s()(Ke,2),ae=Be[0],ce=Be[1],Fe=function(){Te||ae||(ce(!0),Oe(r.files).then(function(o){var v;return(0,N._Q)({name:r.name,loadNumber:r.carbonNum||e.loadNumber,description:r.desc||"",fileList:o,verifyUserId:r.verifyName||(e==null||(v=e.verifyUser)===null||v===void 0?void 0:v.id)}).then(function(){return F(!0)}).catch(console.error).finally(function(){ce(!1)})}))},Ue=!e||!ee||!ve||(r.name||e.name)===e.name&&(r.desc||e.description)===e.description&&r.loadNumber===e.loadNumber&&r.verifyName===e.verifyUserId&&he,ze=function(){if(!(Ue||ae)){var o;if(ce(!0),r.files)o=Oe(r.files).then(function(ne){var Ie;return(0,N.u_)(e.id,{name:r.name||e.name,loadNumber:r.carbonNum||e.loadNumber,description:r.desc||e.description,fileList:ne,verifyUserId:r.verifyName||(e==null||(Ie=e.verifyUser)===null||Ie===void 0?void 0:Ie.id)})});else{var v;o=(0,N.u_)(e.id,{name:r.name,loadNumber:r.carbonNum||e.loadNumber,description:r.desc,verifyUserId:r.verifyName||(e==null||(v=e.verifyUser)===null||v===void 0?void 0:v.id)})}o.then(function(){return F(!0)}).catch(console.error).finally(function(){ce(!1)})}},Re=!e||he||!r.functionalUnit||!r.evaluationBoundary||!r.evaluationBasis||!r.evaluationExpireTime,we=function(){Re||!r.files||ae||(ce(!0),Oe(r.files).then(function(o){return(0,N.A6)(e.id,{fileList:o,state:!0,functionalUnit:r.functionalUnit,evaluationBoundary:r.evaluationBoundary,evaluationBasis:r.evaluationBasis,certificateNumber:r.certificateNumber,evaluationExpireTime:r.evaluationExpireTime+" 00:00:00"})}).then(function(){return F(!0)}).catch(console.error).finally(function(){ce(!1)}))},Ze={directory:"",webkitdirectory:""},le="w-full  shrink-0 px-5 border border-[#DDDDDD]  h-[40px]  bg-[#F8F8F8] rounded-lg",Le=T==="verify",Ve=(0,a.useMemo)(function(){var l;if(he||!r.files)return"\u9A8C\u8BC1\u6587\u4EF6";var o=((l=r.files.item(0))===null||l===void 0?void 0:l.webkitRelativePath.split("/")[0])||"\u9A8C\u8BC1\u6587\u4EF6";return(0,Y.lS)(o,10,10)},[r.files,he]),Ae={label:Le?"\u9A8C\u8BC1\u6587\u6863":"\u9644\u4EF6",dataIndex:"verifyDoc",render:function(){return(0,t.jsx)(a.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 mt-[-15px]",children:[(0,t.jsx)("input",d()(d()({},Ze),{},{ref:W,type:"file",hidden:!0,onChange:function(v){return U({files:v.target.files})}})),(0,t.jsx)(f.SW,{}),(0,t.jsx)(De,{value:Ve}),(0,t.jsx)(p.Z,{onClick:function(v){var ne;return!ae&&((ne=W.current)===null||ne===void 0?void 0:ne.click())},busy:ae,btnText:" \u9009\u62E9\u6587\u4EF6\u5939"})]})})}},$e={verifyRecord:e==null?void 0:e.name,carbonNum:e==null?void 0:e.loadNumber,description:r.desc||(e==null?void 0:e.description),verifyName:"verifyName",createName:b==null?void 0:b.name,organizationName:b==null||(Q=b.organization)===null||Q===void 0?void 0:Q.name},ke={verifyName:e==null?void 0:e.name,verifyId:e==null?void 0:e.id,createUser:e==null||(k=e.createUser)===null||k===void 0?void 0:k.name,organizationName:e==null||(K=e.organization)===null||K===void 0?void 0:K.name,description:e==null?void 0:e.description,loadName:e==null||(L=e.inventory)===null||L===void 0?void 0:L.loadName,loadNumber:e==null?void 0:e.loadNumber,verifyUser:e==null||(J=e.verifyUser)===null||J===void 0?void 0:J.name,verifyDoc:"",functionalUnit:r.functionalUnit||(e==null?void 0:e.functionalUnit),evaluationBoundary:r.evaluationBoundary||(e==null?void 0:e.evaluationBoundary),evaluationBasis:r.evaluationBasis||(e==null?void 0:e.evaluationBasis),evaluationExpireTime:r.evaluationExpireTime||(e==null?void 0:e.evaluationExpireTime)},ie=function(o){return(0,t.jsx)("div",{className:" mt-[-15px]",children:o})},He=[{label:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"verifyName",render:function(){return ie(e==null?void 0:e.name)}},{label:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"verifyId",render:function(){return ie(e==null?void 0:e.id)}},{label:"\u53D1\u8D77\u4EBA",dataIndex:"createUser",render:function(){var o;return ie(e==null||(o=e.createUser)===null||o===void 0?void 0:o.name)}},{label:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"organizationName",render:function(){var o;return ie(e==null||(o=e.organization)===null||o===void 0?void 0:o.name)}},{label:"\u63CF\u8FF0",dataIndex:"description",render:function(){return ie(e==null?void 0:e.description)}},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"loadName",render:function(){var o;return ie(e==null||(o=e.inventory)===null||o===void 0?void 0:o.loadName)}},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber",render:function(){return ie(e==null?void 0:e.loadNumber)}},{label:"\u9A8C\u8BC1\u4EBA",dataIndex:"verifyUser",render:function(){var o;return ie(e==null||(o=e.verifyUser)===null||o===void 0?void 0:o.name)}},Ae,{label:"\u8BC1\u4E66\u7F16\u53F7",dataIndex:"certificateNumber",render:function(){return(0,t.jsx)(z.Z,{style:{marginTop:"-15px"},value:r.certificateNumber||(e==null?void 0:e.certificateNumber),onChange:function(v){return U({certificateNumber:v.target.value})},maxLength:30,className:le})}},{label:"\u529F\u80FD\u5355\u4F4D",dataIndex:"functionalUnit",render:function(){return(0,t.jsx)(z.Z,{style:{marginTop:"-15px"},value:r.functionalUnit||(e==null?void 0:e.functionalUnit),onChange:function(v){return U({functionalUnit:v.target.value})},maxLength:30,className:le})}},{label:"\u8BC4\u4EF7\u8FB9\u754C",dataIndex:"evaluationBoundary",render:function(){return(0,t.jsx)(z.Z,{style:{marginTop:"-15px"},value:r.evaluationBoundary||(e==null?void 0:e.evaluationBoundary),onChange:function(v){return U({evaluationBoundary:v.target.value})},maxLength:30,className:le})}},{label:"\u8BC4\u4EF7\u4F9D\u636E",dataIndex:"evaluationBasis",render:function(){return(0,t.jsx)(z.Z,{style:{marginTop:"-15px"},value:r.evaluationBasis||(e==null?void 0:e.evaluationBasis),onChange:function(v){return U({evaluationBasis:v.target.value})},maxLength:30,className:le})}},{label:"\u8BC4\u4EF7\u6709\u6548\u671F",dataIndex:"evaluationExpireTime",render:function(){return(0,t.jsx)($.default,{style:{marginTop:"-15px"},defaultValue:r.evaluationExpireTime||(e==null?void 0:e.evaluationExpireTime)&&Ce()(r.evaluationExpireTime||(e==null?void 0:e.evaluationExpireTime)),onChange:function(v,ne){U({evaluationExpireTime:ne})},className:le})}}],Ge=[{label:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"verifyRecord",render:function(){return(0,t.jsx)(z.Z,{value:r.name||(e==null?void 0:e.name),onChange:function(v){return U({name:v.target.value})},maxLength:30,style:{marginTop:"-15px"},className:le})}},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"carbonNum",render:function(){return(0,t.jsx)(re.default,{value:r.carbonNum||(e==null?void 0:e.loadNumber),style:{height:"40px",width:"100%",marginTop:"-15px"},onChange:function(v){return U({carbonNum:v})},options:(0,Y.ry)("loadName","loadNumber",ee)})}},{label:"\u63CF\u8FF0",dataIndex:"description",render:function(){return(0,t.jsx)(z.Z,{style:{marginTop:"-15px"},value:r.desc||(e==null?void 0:e.description),onChange:function(v){return U({desc:v.target.value})},maxLength:100,className:le})}},{label:"\u9009\u62E9\u9A8C\u8BC1\u4EBA",dataIndex:"verifyName",render:function(){var o;return(0,t.jsx)(re.default,{value:r.verifyName||(e==null||(o=e.verifyUser)===null||o===void 0?void 0:o.id),style:{marginTop:"-15px",height:"40px",borderColor:"#DDDDDD",backgroundColor:"#F8F8F8",width:"100%"},onChange:function(ne){return U({verifyName:ne})},options:(0,Y.ry)("name","id",ve)})}},{label:"\u53D1\u8D77\u4EBA",dataIndex:"createName",render:function(){return(0,t.jsx)("div",{className:" mt-[-15px]",children:b==null?void 0:b.name})}},{label:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"organizationName",render:function(){var o;return(0,t.jsx)("div",{className:" mt-[-15px]",children:b==null||(o=b.organization)===null||o===void 0?void 0:o.name})}},Ae];return(0,t.jsx)(a.Fragment,{children:(0,t.jsx)(E.u_,{className:"rounded-lg",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[16px] leading-5 font-bold",title:T==="new"?"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55":"\u7F16\u8F91\u9A8C\u8BC1\u8BB0\u5F55",line:!0,bottomBtn:!fe&&(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5  w-full ",children:[T==="new"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.u,{size:"large",defStyle:"btn-primary-1",className:"flex-1",onClick:function(){return F(!1)},children:"\u53D6\u6D88"}),(0,t.jsx)(y.u,{size:"large",busy:ae,disabled:Te,defStyle:"btn-primary",className:"flex-1",onClick:Fe,children:"\u786E\u5B9A"})]}),T==="editor"&&(0,t.jsx)(y.u,{busy:ae,size:"large",disabled:Ue,className:"flex-1",onClick:ze,children:"\u63D0\u4EA4\u66F4\u65B0"}),T==="verify"&&(0,t.jsx)(y.u,{busy:ae,size:"large",disabled:Re,className:"flex-1",onClick:we,children:"\u63D0\u4EA4\u9A8C\u8BC1"})]}),onClose:function(){return F(!1)},children:(0,t.jsxs)("div",{className:"flex flex-col py-[1px] gap-5 px-5 w-[640px] min-h-[6.25rem] max-h-mc overflow-y-auto",children:[fe&&(0,t.jsx)(c.g,{}),!fe&&(0,t.jsx)(t.Fragment,{children:Le?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Z,{options:He,data:ke,optionEmptyText:"-",layout:"vertical",column:1,contentStyle:{color:"#999999",fontWeight:"400",fontSize:"14px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"14px",marginTop:"-5px"}})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Z,{options:Ge,data:$e,optionEmptyText:"-",layout:"vertical",column:1,contentStyle:{color:"#999999",fontWeight:"400",fontSize:"14px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"15px",marginTop:"-5px"}})})})]})})})},Pe=se,xe=n(30905),de=n.n(xe),Ee=n(64470),ye=function(M){var Q=M.closeModal,k=M.fileList,K=(0,a.useState)(!1),L=s()(K,2),J=L[0],F=L[1],te=(0,P.h3)(),q=function(){var T=R()(_()().mark(function W(){var S,b,H,A;return _()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return F(!0),m.prev=1,S=new(de()),b="",k.forEach(function(oe){b=oe.fileName.split("/")[0];var ee=Ee.default.get(oe.downloadUrl,{responseType:"arraybuffer"}).then(function(w){return w.data});S.file(oe.fileName,ee)}),m.next=7,S.generateAsync({type:"blob"});case 7:H=m.sent,A=document.createElement("a"),A.href=URL.createObjectURL(H),A.download="".concat(b,".zip"),A.click(),URL.revokeObjectURL(A.href),m.next=18;break;case 15:m.prev=15,m.t0=m.catch(1),te("\u6587\u4EF6\u4E0B\u8F7D\u51FA\u9519\uFF01");case 18:return m.prev=18,F(!1),m.finish(18);case 21:case"end":return m.stop()}},W,null,[[1,15,18,21]])}));return function(){return T.apply(this,arguments)}}();return(0,t.jsx)(a.Fragment,{children:(0,t.jsx)(E.u_,{onClose:Q,title:"\u67E5\u770B\u6587\u4EF6\u5939",line:!0,bottomBtn:(0,t.jsx)(y.u,{size:"large",disabled:J,className:"bg-[#29953A] w-full h-[50px] rounded-lg text-[#FFFFFF] ",onClick:q,children:"\u4E0B\u8F7D"}),children:(0,t.jsx)("div",{className:"px-5 overflow-y-auto  max-h-[260px]",children:k.map(function(T,W){var S=T.fileName.split("/");return(0,t.jsx)("div",{id:"view",className:"w-[640px] h-[34px] flex items-center ",children:(0,t.jsx)("span",{className:"ml-[10px] leading-5 text-[14px] font-normal",children:S[S.length-1]})},"file_".concat(W))})})})})},Ne=ye;function ue(){var _e=(0,P.oR)(),M=_e.userData,Q=(0,a.useState)(1),k=s()(Q,2),K=k[0],L=k[1],J=(0,a.useState)(!1),F=s()(J,2),te=F[0],q=F[1],T=(0,a.useState)(!1),W=s()(T,2),S=W[0],b=W[1],H=(0,a.useRef)([]),A=(0,a.useRef)(),e=function(Z){H.current=Z,b(!0)},m=(0,a.useCallback)(function(j){q(!0),A.current={type:g().isEmpty(j)?"new":(M==null?void 0:M.role)==="verify"?"verify":"editor",recordId:j.id}},[M]),oe=(0,a.useMemo)(function(){return[{title:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"name",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"id",width:160,ellipsis:!0},{title:"\u53D1\u8D77\u4EBA",dataIndex:"_createUserName",width:160,ellipsis:!0},{title:"\u7EC4\u7EC7\u673A\u6784",width:160,ellipsis:!0,dataIndex:"_organizationName"},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"_loadName",width:160,ellipsis:!0},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber",width:170,renderText:h.zL},{title:"\u9644\u4EF6",width:160,render:function(Z,r){return(0,t.jsxs)("div",{onClick:function(){return e(r.attachmentFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,t.jsx)(f.SW,{width:"14"}),(0,t.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]})}},{title:"\u6700\u540E\u7F16\u8F91",dataIndex:"updateTime",valueType:"dateTime",width:170},{title:"\u9A8C\u8BC1\u4EBA",dataIndex:"_verifyUserName",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u6587\u6863",width:130,render:function(Z,r){return r.verifyFileList.length?(0,t.jsxs)("div",{onClick:function(){return e(r.verifyFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,t.jsx)(f.SW,{width:"14"}),(0,t.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]}):null}},{title:"\u9A8C\u8BC1\u72B6\u6001",width:130,render:function(Z,r){return(0,t.jsx)("span",{className:"",children:r.state?"\u5DF2\u9A8C\u8BC1":""})}},{title:"\u9A8C\u8BC1\u65F6\u95F4",dataIndex:"proofTime",valueType:"dateTime",width:170},{title:"\u64CD\u4F5C",width:120,valueType:"option",render:function(Z,r){return r.state?[]:[(0,t.jsx)("div",{className:"flex justify-between flex-1 text-green-2 break-keep",children:(0,t.jsx)("div",{className:"flex items-center font-normal justify-center cursor-pointer leading-[27px]",onClick:function(){return m(r)},children:"\u7F16\u8F91"})},"edit")]}}]},[m]),ee=(0,x.Y5)(K),w=ee.data,je=ee.isLoading,ve=ee.mutate,fe=(0,a.useMemo)(function(){return((w==null?void 0:w.records)||[]).map(function(j,Z){var r,U,pe,me;return d()(d()({},j),{},{key:"verify_"+Z,_createUserName:(r=j.createUser)===null||r===void 0?void 0:r.name,_organizationName:(U=j.organization)===null||U===void 0?void 0:U.name,_loadName:(pe=j.inventory)===null||pe===void 0?void 0:pe.loadName,_verifyUserName:(me=j.verifyUser)===null||me===void 0?void 0:me.name})})},[w]);return(0,t.jsxs)(B.Z,{title:"\u9A8C\u8BC1\u7BA1\u7406\u5217\u8868",extra:(M==null?void 0:M.role)==="admin"?[(0,t.jsx)(y.u,{onClick:function(){return m({})},children:"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55"},"key_new_verify")]:[],children:[(0,t.jsx)("div",{className:"bg-white",children:(0,t.jsx)(h.ZP,{columns:oe,dataSource:fe,loading:je,scroll:{x:scrollX},pagination:{pageSize:10,total:(w==null?void 0:w.total)||0,current:K,onChange:function(Z){L(Z)}}})}),te&&A.current&&(0,t.jsx)(Pe,{type:A.current.type,recordId:A.current.recordId,closeModal:function(){L(1),K===1&&ve(),q(!1),A.current=void 0}}),S&&(0,t.jsx)(Ne,{fileList:H.current,closeModal:function(){b(!1)}})]})}var Me=ue,We=Me}}]);

"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[716],{20716:function(R,N,y){y.r(N),y.d(N,{diagram:function(){return p}});var T=y(2362),u=y(52015),S=y(87892),W=y(42521),m=y(27846),k=y(76115),D=y(74637),A=y(91088),H=y(65165);let w={};const v=20,e=function(i){const l=Object.entries(w).find(h=>h[1].label===i);if(l)return l[0]},r=function(i){i.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),i.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),i.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),i.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),i.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),i.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),i.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),i.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},o={draw:function(i,l,h,n){const c=(0,m.c)().class;w={},m.l.info("Rendering diagram "+i);const _=(0,m.c)().securityLevel;let s;_==="sandbox"&&(s=(0,u.Ys)("#i"+l));const x=_==="sandbox"?(0,u.Ys)(s.nodes()[0].contentDocument.body):(0,u.Ys)("body"),f=x.select(`[id='${l}']`);r(f);const d=new W.k({multigraph:!0});d.setGraph({isMultiGraph:!0}),d.setDefaultEdgeLabel(function(){return{}});const b=n.db.getClasses(),O=Object.keys(b);for(const a of O){const C=b[a],P=k.s.drawClass(f,C,c,n);w[P.id]=P,d.setNode(P.id,P),m.l.info("Org height: "+P.height)}n.db.getRelations().forEach(function(a){m.l.info("tjoho"+e(a.id1)+e(a.id2)+JSON.stringify(a)),d.setEdge(e(a.id1),e(a.id2),{relation:a},a.title||"DEFAULT")}),n.db.getNotes().forEach(function(a){m.l.debug(`Adding note: ${JSON.stringify(a)}`);const C=k.s.drawNote(f,a,c,n);w[C.id]=C,d.setNode(C.id,C),a.class&&a.class in b&&d.setEdge(a.id,e(a.class),{relation:{id1:a.id,id2:a.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),(0,S.bK)(d),d.nodes().forEach(function(a){a!==void 0&&d.node(a)!==void 0&&(m.l.debug("Node "+a+": "+JSON.stringify(d.node(a))),x.select("#"+(n.db.lookUpDomId(a)||a)).attr("transform","translate("+(d.node(a).x-d.node(a).width/2)+","+(d.node(a).y-d.node(a).height/2)+" )"))}),d.edges().forEach(function(a){a!==void 0&&d.edge(a)!==void 0&&(m.l.debug("Edge "+a.v+" -> "+a.w+": "+JSON.stringify(d.edge(a))),k.s.drawEdge(f,d.edge(a),d.edge(a).relation,c,n))});const E=f.node().getBBox(),M=E.width+v*2,L=E.height+v*2;(0,m.i)(f,L,M,c.useMaxWidth);const I=`${E.x-v} ${E.y-v} ${M} ${L}`;m.l.debug(`viewBox ${I}`),f.attr("viewBox",I)}},p={parser:T.p,db:T.d,renderer:o,styles:T.s,init:i=>{i.class||(i.class={}),i.class.arrowMarkerAbsolute=i.arrowMarkerAbsolute,T.d.clear()}}},76115:function(R,N,y){y.d(N,{p:function(){return A},s:function(){return v}});var T=y(52015),u=y(27846);let S=0;const W=function(e,r,t,o,p){const i=function(g){switch(g){case p.db.relationType.AGGREGATION:return"aggregation";case p.db.relationType.EXTENSION:return"extension";case p.db.relationType.COMPOSITION:return"composition";case p.db.relationType.DEPENDENCY:return"dependency";case p.db.relationType.LOLLIPOP:return"lollipop"}};r.points=r.points.filter(g=>!Number.isNaN(g.y));const l=r.points,h=(0,T.jvg)().x(function(g){return g.x}).y(function(g){return g.y}).curve(T.$0Z),n=e.append("path").attr("d",h(l)).attr("id","edge"+S).attr("class","relation");let c="";o.arrowMarkerAbsolute&&(c=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,c=c.replace(/\(/g,"\\("),c=c.replace(/\)/g,"\\)")),t.relation.lineType==1&&n.attr("class","relation dashed-line"),t.relation.lineType==10&&n.attr("class","relation dotted-line"),t.relation.type1!=="none"&&n.attr("marker-start","url("+c+"#"+i(t.relation.type1)+"Start)"),t.relation.type2!=="none"&&n.attr("marker-end","url("+c+"#"+i(t.relation.type2)+"End)");let _,s;const x=r.points.length;let f=u.u.calcLabelPosition(r.points);_=f.x,s=f.y;let d,b,O,B;if(x%2!==0&&x>1){let g=u.u.calcCardinalityPosition(t.relation.type1!=="none",r.points,r.points[0]),E=u.u.calcCardinalityPosition(t.relation.type2!=="none",r.points,r.points[x-1]);u.l.debug("cardinality_1_point "+JSON.stringify(g)),u.l.debug("cardinality_2_point "+JSON.stringify(E)),d=g.x,b=g.y,O=E.x,B=E.y}if(t.title!==void 0){const g=e.append("g").attr("class","classLabel"),E=g.append("text").attr("class","label").attr("x",_).attr("y",s).attr("fill","red").attr("text-anchor","middle").text(t.title);window.label=E;const M=E.node().getBBox();g.insert("rect",":first-child").attr("class","box").attr("x",M.x-o.padding/2).attr("y",M.y-o.padding/2).attr("width",M.width+o.padding).attr("height",M.height+o.padding)}u.l.info("Rendering relation "+JSON.stringify(t)),t.relationTitle1!==void 0&&t.relationTitle1!=="none"&&e.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",d).attr("y",b).attr("fill","black").attr("font-size","6").text(t.relationTitle1),t.relationTitle2!==void 0&&t.relationTitle2!=="none"&&e.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",O).attr("y",B).attr("fill","black").attr("font-size","6").text(t.relationTitle2),S++},m=function(e,r,t,o){u.l.debug("Rendering class ",r,t);const p=r.id,i={id:p,label:r.id,width:0,height:0},l=e.append("g").attr("id",o.db.lookUpDomId(p)).attr("class","classGroup");let h;r.link?h=l.append("svg:a").attr("xlink:href",r.link).attr("target",r.linkTarget).append("text").attr("y",t.textHeight+t.padding).attr("x",0):h=l.append("text").attr("y",t.textHeight+t.padding).attr("x",0);let n=!0;r.annotations.forEach(function(L){const I=h.append("tspan").text("\xAB"+L+"\xBB");n||I.attr("dy",t.textHeight),n=!1});let c=k(r);const _=h.append("tspan").text(c).attr("class","title");n||_.attr("dy",t.textHeight);const s=h.node().getBBox().height,x=l.append("line").attr("x1",0).attr("y1",t.padding+s+t.dividerMargin/2).attr("y2",t.padding+s+t.dividerMargin/2),f=l.append("text").attr("x",t.padding).attr("y",s+t.dividerMargin+t.textHeight).attr("fill","white").attr("class","classText");n=!0,r.members.forEach(function(L){H(f,L,n,t),n=!1});const d=f.node().getBBox(),b=l.append("line").attr("x1",0).attr("y1",t.padding+s+t.dividerMargin+d.height).attr("y2",t.padding+s+t.dividerMargin+d.height),O=l.append("text").attr("x",t.padding).attr("y",s+2*t.dividerMargin+d.height+t.textHeight).attr("fill","white").attr("class","classText");n=!0,r.methods.forEach(function(L){H(O,L,n,t),n=!1});const B=l.node().getBBox();var g=" ";r.cssClasses.length>0&&(g=g+r.cssClasses.join(" "));const M=l.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",B.width+2*t.padding).attr("height",B.height+t.padding+.5*t.dividerMargin).attr("class",g).node().getBBox().width;return h.node().childNodes.forEach(function(L){L.setAttribute("x",(M-L.getBBox().width)/2)}),r.tooltip&&h.insert("title").text(r.tooltip),x.attr("x2",M),b.attr("x2",M),i.width=M,i.height=B.height+t.padding+.5*t.dividerMargin,i},k=function(e){let r=e.id;return e.type&&(r+="<"+e.type+">"),r},D=function(e,r,t,o){u.l.debug("Rendering note ",r,t);const p=r.id,i={id:p,text:r.text,width:0,height:0},l=e.append("g").attr("id",p).attr("class","classGroup");let h=l.append("text").attr("y",t.textHeight+t.padding).attr("x",0);const n=JSON.parse(`"${r.text}"`).split(`
`);n.forEach(function(x){u.l.debug(`Adding line: ${x}`),h.append("tspan").text(x).attr("class","title").attr("dy",t.textHeight)});const c=l.node().getBBox(),s=l.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",c.width+2*t.padding).attr("height",c.height+n.length*t.textHeight+t.padding+.5*t.dividerMargin).node().getBBox().width;return h.node().childNodes.forEach(function(x){x.setAttribute("x",(s-x.getBBox().width)/2)}),i.width=s,i.height=c.height+n.length*t.textHeight+t.padding+.5*t.dividerMargin,i},A=function(e){let r="",t="",o="",p="",i=e.substring(0,1),l=e.substring(e.length-1,e.length);i.match(/[#+~-]/)&&(p=i);let h=/[\s\w)~]/;l.match(h)||(t=w(l));const n=p===""?0:1;let c=t===""?e.length:e.length-1;e=e.substring(n,c);const _=e.indexOf("("),s=e.indexOf(")");if(_>1&&s>_&&s<=e.length){let f=e.substring(0,_).trim();const d=e.substring(_+1,s);if(r=p+f+"("+(0,u.x)(d.trim())+")",s<e.length){let b=e.substring(s+1,s+2);t===""&&!b.match(h)?(t=w(b),o=e.substring(s+2).trim()):o=e.substring(s+1).trim(),o!==""&&(o.charAt(0)===":"&&(o=o.substring(1).trim()),o=" : "+(0,u.x)(o),r+=o)}}else r=p+(0,u.x)(e);return{displayText:r,cssStyle:t}},H=function(e,r,t,o){let p=A(r);const i=e.append("tspan").attr("x",o.padding).text(p.displayText);p.cssStyle!==""&&i.attr("style",p.cssStyle),t||i.attr("dy",o.textHeight)},w=function(e){switch(e){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},v={getClassTitleString:k,drawClass:m,drawEdge:W,drawNote:D,parseMember:A}}}]);

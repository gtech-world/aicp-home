"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[325],{50325:function(T,P,e){e.d(P,{diagram:function(){return v}});var f=e(26240),l=e(54511),W=e(67411),B=e(13414),d=e(2709),u=e(10751),U=e(50510),I=e(46411),R=e(9836);let _={};const g=20,i=function(a){const p=Object.entries(_).find(m=>m[1].label===a);if(p)return p[0]},A=function(a){a.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),a.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),a.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),a.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),a.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),a.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),a.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),a.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},C={draw:function(a,p,m,n){const h=(0,d.c)().class;_={},d.l.info("Rendering diagram "+a);const M=(0,d.c)().securityLevel;let k;M==="sandbox"&&(k=(0,l.Ys)("#i"+p));const D=M==="sandbox"?(0,l.Ys)(k.nodes()[0].contentDocument.body):(0,l.Ys)("body"),s=D.select(`[id='${p}']`);A(s);const r=new B.k({multigraph:!0});r.setGraph({isMultiGraph:!0}),r.setDefaultEdgeLabel(function(){return{}});const L=n.db.getClasses(),b=Object.keys(L);for(const t of b){const o=L[t],c=u.s.drawClass(s,o,h,n);_[c.id]=c,r.setNode(c.id,c),d.l.info("Org height: "+c.height)}n.db.getRelations().forEach(function(t){d.l.info("tjoho"+i(t.id1)+i(t.id2)+JSON.stringify(t)),r.setEdge(i(t.id1),i(t.id2),{relation:t},t.title||"DEFAULT")}),n.db.getNotes().forEach(function(t){d.l.debug(`Adding note: ${JSON.stringify(t)}`);const o=u.s.drawNote(s,t,h,n);_[o.id]=o,r.setNode(o.id,o),t.class&&t.class in L&&r.setEdge(t.id,i(t.class),{relation:{id1:t.id,id2:t.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),(0,W.bK)(r),r.nodes().forEach(function(t){t!==void 0&&r.node(t)!==void 0&&(d.l.debug("Node "+t+": "+JSON.stringify(r.node(t))),D.select("#"+(n.db.lookUpDomId(t)||t)).attr("transform","translate("+(r.node(t).x-r.node(t).width/2)+","+(r.node(t).y-r.node(t).height/2)+" )"))}),r.edges().forEach(function(t){t!==void 0&&r.edge(t)!==void 0&&(d.l.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(r.edge(t))),u.s.drawEdge(s,r.edge(t),r.edge(t).relation,h,n))});const E=s.node().getBBox(),y=E.width+g*2,O=E.height+g*2;(0,d.i)(s,O,y,h.useMaxWidth);const x=`${E.x-g} ${E.y-g} ${y} ${O}`;d.l.debug(`viewBox ${x}`),s.attr("viewBox",x)}},v={parser:f.p,db:f.d,renderer:C,styles:f.s,init:a=>{a.class||(a.class={}),a.class.arrowMarkerAbsolute=a.arrowMarkerAbsolute,f.d.clear()}}}}]);

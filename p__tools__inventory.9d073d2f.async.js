"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9725],{6528:function(Ne,ne,e){e.d(ne,{ub:function(){return ve},dW:function(){return fe}});var ue=e(48651),o=e.n(ue),ie=e(86516),c=e.n(ie),de=e(38143),h=e(79685),ce={"t-side":function(a,r){return new KeyframeEffect(a,r==="add"?[{transform:"scaleY(0)",transformOrigin:"0 0",opacity:0},{transform:"scaleY(1)",transformOrigin:"0 0",opacity:1}]:r==="remove"?[{transform:"scaleY(1)",transformOrigin:"0 0",opacity:1},{transform:"scaleY(0)",transformOrigin:"0 0",opacity:0}]:[],{duration:300,easing:"ease-in-out"})},"r-side":function(a,r){return new KeyframeEffect(a,r==="add"?[{transform:"scaleX(0)",transformOrigin:"100% 0",opacity:0},{transform:"scaleX(1)",transformOrigin:"100% 0",opacity:1}]:r==="remove"?[{transform:"scaleX(1)",transformOrigin:"100% 0",opacity:1},{transform:"scaleX(0)",transformOrigin:"100% 0",opacity:0}]:[],{duration:300,easing:"ease-in-out"})},scale:function(a,r){return new KeyframeEffect(a,r==="add"?[{transform:"scale(0.8)",opacity:0},{transform:"scale(1)",opacity:1}]:r==="remove"?[{transform:"scale(1)",opacity:1},{transform:"scale(0.8)",opacity:0}]:[],{duration:300,easing:"ease-in-out"})},opacity:function(a,r){return new KeyframeEffect(a,r==="add"?[{opacity:0},{opacity:1}]:r==="remove"?[{opacity:1},{opacity:0}]:[],{duration:200,easing:"ease-in-out"})}};function Q(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"scale",a=(0,h.useRef)(null);return(0,h.useEffect)(function(){a.current&&(0,de.ZP)(a.current,typeof n=="string"?ce[n]:n)},[a.current]),a}var b=e(68591),k=e.n(b),re=e(30681),me=e(12239),q=e(76852),y=e(63342);function fe(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(0,h.useState)(a),M=c()(r,2),R=M[0],L=M[1];return(0,h.useEffect)(function(){L(a)},[n,a]),{onChange:L,items:n,current:R}}function l(n){var a=n.items,r=n.current,M=n.onChange,R=n.className,L=R===void 0?"bg-white text-black px-5 py-3 text-lg rounded-lg w-[31.25rem] mo:w-full mo:text-sm":R,_=n.currentClassName,xe=_===void 0?"flex justify-between items-center":_,t=n.openClassName,pe=t===void 0?"max-h-[18rem] bg-white  rounded-lg py-3 ":t,ge=a[r]?a[r].text:"",he=(0,me.Z)(!1),le=c()(he,2),ee=le[0],T=le[1],oe=(0,h.useCallback)(function(B){r!==B&&M(B)},[r]),se=Q("t-side");return(0,q.Z)(se,function(){return ee&&T(!1)}),a.length===0?null:(0,y.jsxs)("div",{ref:se,className:k()("relative cursor-pointer",L),onClick:function(){return T()},children:[(0,y.jsxs)("div",{className:xe,children:[(0,y.jsx)("span",{className:"truncate",children:ge}),ee?(0,y.jsx)(re.pzk,{}):(0,y.jsx)(re._i7,{})]}),ee&&(0,y.jsx)("div",{className:k()("absolute z-[100] left-0 w-full overflow-x-hidden overflow-y-auto",pe),style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:(0,y.jsx)("div",{className:"",children:a.map(function(B,te){return(0,y.jsx)("div",{style:{},className:k()("w-full break-all px-5 py-2 text-sm hover:bg-gray-16",{"text-green-2":te===r}),onClick:function(){return oe(te)},children:B.text},"select_item_".concat(te))})})})]})}var ve=function(a){return(0,y.jsx)(l,o()({className:"h-[50px] px-5 items-center bg-stone-50 rounded-lg border border-neutral-200",currentClassName:"h-full flex justify-between items-center"},a))}},75631:function(Ne,ne,e){e.r(ne),e.d(ne,{default:function(){return te}});var ue=e(48651),o=e.n(ue),ie=e(86516),c=e.n(ie),de=e(5677),h=e.n(de),ce=e(64082),Q=e(18842),b=e(9991),k=e(59864),re=e(8965),me=e(76222),q=e(12564),y=e(68591),fe=e.n(y),l=e(79685),ve=e(22786),n=e.n(ve),a=e(46299),r=e.n(a),M=e(95968),R=e(6528),L=e(54916),_=e(81123),xe=e(48294),t=e(63342),pe=function(m){var i=m.onOpenModal,j=m.realData,f=m.tableData,N=m.realArr,K=(0,l.useState)(f),w=c()(K,2),X=w[0],Y=w[1],G=function(){for(var s,v=(s=document)===null||s===void 0?void 0:s.getElementById("realDataTable"),I=v.getElementsByTagName("tr"),p=[],O=0;O<I.length;O++){for(var V=[],A=I[O].getElementsByTagName("input"),$=0;$<A.length;$++){var x=A[$].value;V.push(x)}p.push(V)}var d=[];d=f==null?void 0:f.map(function(g,z){var H={processId:g.context["@id"],paramValue:p.slice(1)[z][0]||g.value.toString(),paramName:g.name,dateTime:(0,_.p6)()};return H});var u={lcaParamList:d};typeof i=="function"&&i(),typeof j=="function"&&j(u)};(0,l.useEffect)(function(){var S=f==null?void 0:f.map(function(s,v){return N!=null&&N.length&&N[v].paramName===s.name?o()(o()({},s),{},{inputValue:N[v].paramValue}):o()({},s)});Y(S)},[N,f]);var P=[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:"9rem",render:function(s){return(0,t.jsx)("div",{className:" flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:s})}},{title:"\u8FC7\u7A0B\u540D\u79F0",dataIndex:"name",width:"7rem",render:function(s,v){return(0,t.jsx)("div",{className:"flex items-center  h-[33px] font-normal leading-[21px] text-[14px] ",children:v.context.name})}},{title:"\u53C2\u8003\u503C",width:"10rem",dataIndex:"value",render:function(s){return(0,t.jsx)("div",{className:"flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:s})}},{title:"\u586B\u5165\u503C",width:"10rem",dataIndex:"createTime",render:function(s,v){return(0,t.jsx)("input",{defaultValue:v.inputValue,type:"number",className:"font-normal  leading-[21px] text-[14px] w-[10rem] h-[33px] "})}}];return(0,t.jsxs)(M.u_,{title:"\u5B9E\u666F\u6570\u636E\u586B\u62A5",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",onClose:typeof i=="function"&&i||void 0,children:[(0,t.jsx)("div",{className:" mx-5 w-[640px] max-h-[400px] overflow-y-auto ",children:(0,t.jsx)(xe.i,{columns:P,tableId:"realDataTable",data:X||[],isSetBorder:!0,maxHeight:"calc(100vh - 260px)",headerClassName:{background:"#DDDDDD",position:"sticky",top:"-1px",fontWeight:"700",fontSize:"18px",lineHeight:"30px",height:"50px"}})}),(0,t.jsx)("div",{className:"mx-5 ",children:(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5",children:[(0,t.jsx)(b.u,{onClick:typeof i=="function"&&i||void 0,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"\u53D6\u6D88"}),(0,t.jsx)(b.u,{className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:G,children:"\u786E\u5B9A"})]})})]})},ge=pe,he={loadName:"",productId:""},le=function(m){var i,j=m.openResultModal,f=m.getList,N=(0,l.useState)(!1),K=c()(N,2),w=K[0],X=K[1],Y=(0,l.useState)([{name:"",id:""}]),G=c()(Y,2),P=G[0],S=G[1],s=(0,l.useState)({lcaParamList:[]}),v=c()(s,2),I=v[0],p=v[1],O=(0,l.useState)([]),V=c()(O,2),A=V[0],$=V[1],x=(0,l.useState)(he),d=c()(x,2),u=d[0],g=d[1],z=(0,l.useMemo)(function(){return P.map(function(F){return o()(o()({},F),{},{text:F.name})})},[P]),H=(0,R.dW)(z,-1),W=(i=H.items[H.current])===null||i===void 0?void 0:i.id,Se=(0,l.useState)(!0),ye=c()(Se,2),De=ye[0],Ce=ye[1],je=function(){(0,L.ev)().then(function(D){S(D||{name:"",id:""}),Ce(!1)}).catch(function(D){}).finally()},Ie=function(){var D,J=u.loadName;if(!(!J||!W)){var E=A==null?void 0:A.map(function(ae){return{processId:ae.context["@id"],paramValue:ae.value.toString(),paramName:ae.name,dateTime:(0,_.p6)()}}),U=(D=I.lcaParamList)!==null&&D!==void 0&&D.length?I:{lcaParamList:E.length?E:void 0},C=o()(o()({},U),{},{loadName:J,productId:W});(0,L.E)(C).then(function(ae){typeof f=="function"&&f()}).catch(function(ae){}).finally(function(){typeof j=="function"&&j()})}};(0,l.useEffect)(function(){je()},[]);var Fe=function(){W&&X(!0)},Te=function(D){var J=D.target,E=J.name,U=J.value;g(function(C){return o()(o()({},C),{},h()({},E,U))})},Ae=function(){var F=r()(n()().mark(function D(){return n()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:(0,L.NF)(W).then(function(U){var C=JSON.parse(U.paramDetail)[0]||[];$(JSON.stringify(C)==="{}"||!(C!=null&&C.parameters)?[]:C==null?void 0:C.parameters)}).catch(function(U){}).finally();case 1:case"end":return E.stop()}},D)}));return function(){return F.apply(this,arguments)}}();return(0,l.useEffect)(function(){W&&Ae()},[W]),De?null:(0,t.jsxs)(l.Fragment,{children:[(0,t.jsx)(M.u_,{className:"rounded-lg",containerClassName:"mx-5 w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",title:"\u65B0\u5EFA\u78B3\u8DB3\u8FF9\u7ED3\u679C",onClose:j,children:(0,t.jsxs)("div",{className:"mx-5 w-[640px] ",children:[(0,t.jsx)("span",{className:"font-normal leading-6 ",children:"\u78B3\u8DB3\u8FF9\u6279\u6B21\uFF1A"}),(0,t.jsx)("input",{value:u.loadName,onChange:Te,id:"loadName",name:"loadName",maxLength:30,className:"w-full mb-[20px] mt-[10px] px-5 border border-[#DDDDDD]  h-[50px]  bg-[#F8F8F8] rounded-lg"}),(0,t.jsx)("div",{className:"font-normal leading-6  mb-[10px]",children:"\u4EA7\u54C1\u7CFB\u7EDF\uFF1A"}),(0,t.jsx)(R.ub,o()(o()({},H),{},{openClassName:"max-h-[9rem] bg-white  rounded-lg py-3 "})),(0,t.jsx)("div",{className:"mt-5 font-normal leading-6",children:"\u5B9E\u666F\u6570\u636E\u586B\u62A5\uFF1A"}),(0,t.jsx)("div",{onClick:function(){return Fe()},className:" flex cursor-pointer rounded-[4px] leading-4 text-[16px] mt-[10px] bg-[#F1F1F1] w-[84px] h-[24px]  text-center items-center justify-center ",children:"\u524D\u5F80\u586B\u5199"}),(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5",children:[(0,t.jsx)(b.u,{onClick:j,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"\u53D6\u6D88"}),(0,t.jsx)(b.u,{className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:Ie,disabled:!W||!u.loadName,children:"\u8BA1\u7B97\u78B3\u7ED3\u679C"})]})]})}),w&&(0,t.jsx)(ge,{realData:p,tableData:A,realArr:I.lcaParamList,onOpenModal:function(){return X(!1)}})]})},ee=le,T,oe=(T={},h()(T,-1,{color:"text-[red]",text:"\u8BA1\u7B97\u5931\u8D25"}),h()(T,0,{color:"text-[#FF9800]",text:"\u7B49\u5F85\u8BA1\u7B97"}),h()(T,1,{color:"text-green-2",text:"\u67E5\u770B\u7ED3\u679C"}),h()(T,2,{color:"text-blue-600",text:"\u6B63\u5728\u8BA1\u7B97"}),T);function se(){var Z=(0,l.useState)(1),m=c()(Z,2),i=m[0],j=m[1],f=(0,l.useState)(!1),N=c()(f,2),K=N[0],w=N[1],X=(0,l.useState)(!1),Y=c()(X,2),G=Y[0],P=Y[1],S=(0,l.useRef)({inputData:"",data:""}),s=function(d){var u=d.param,g=d.paramDetail;S.current={inputData:u,data:g},P(!0)},v=(0,l.useMemo)(function(){return[{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"loadName",width:180,ellipsis:!0},{title:"\u5B9E\u666F\u6570\u636E",valueType:"option",width:120,render:function(d,u){return[(0,t.jsx)("div",{className:"flex justify-center whitespace-nowrap px-2.5 bg-[#F1F1F1] rounded",onClick:function(){return s(u)},children:(0,t.jsx)("span",{className:"cursor-pointer",children:"\u67E5\u770B\u5B9E\u666F\u6570\u636E"})},"key_look_real")]}},{title:"\u6279\u6B21\u7ED3\u679CID",dataIndex:"loadNumber",width:170,renderText:Q.zL},{title:"\u4EA7\u54C1\u7CFB\u7EDF\u540D\u79F0",width:128,dataIndex:"productName",ellipsis:!0},{title:"\u7CFB\u7EDF\u4EA7\u54C1ID",dataIndex:"productUuid",width:170,renderText:Q.zL},{title:"\u63CF\u8FF0",dataIndex:"productDescription",width:300,ellipsis:!0},{title:"\u64CD\u4F5C\u4EBA",dataIndex:"operator",width:100,ellipsis:!0},{title:"\u751F\u6210\u65F6\u95F4",dataIndex:"calculateSuccessTime",valueType:"dateTime",width:180},{title:"\u78B3\u8DB3\u8FF9\u7ED3\u679C",dataIndex:"state",width:130,render:function(d,u){var g,z;return(0,t.jsx)("div",{className:fe()({"cursor-pointer":u.state===1},(g=oe[u.state])===null||g===void 0?void 0:g.color),onClick:function(){u.state===1&&q.history.push("/main/tools/inventory/result?id=".concat(u.loadNumber))},children:(z=oe[u.state])===null||z===void 0?void 0:z.text})}},{title:"\u7EC4\u7EC7\u540D\u79F0",dataIndex:"orgName",width:130,ellipsis:!0},{title:"\u7EC4\u7EC7\u7F16\u53F7",dataIndex:"orgSerialNumber",width:130,ellipsis:!0}]},[]),I=(0,re.cc)(i,1e4),p=I.data,O=I.isLoading,V=I.mutate,A=(0,l.useMemo)(function(){return((p==null?void 0:p.records)||[]).map(function(x,d){return o()(o()({},x),{},{key:"key_inventory_"+d})})},[p]),$=(0,me.b)();return(0,t.jsxs)(ce.Z,{title:"\u6211\u7684\u4EA7\u54C1\u78B3\u8DB3\u8FF9\u7ED3\u679C",extra:$?[(0,t.jsx)(b.u,{onClick:function(){return w(!0)},children:"\u65B0\u5EFA\u78B3\u8DB3\u8FF9\u7ED3\u679C"},"new_inventory")]:[],children:[(0,t.jsx)("div",{className:"bg-white",children:(0,t.jsx)(Q.ZP,{columns:v,dataSource:A,loading:O,pagination:{pageSize:10,total:(p==null?void 0:p.total)||0,current:i,onChange:function(d){j(d)}}})}),K&&(0,t.jsx)(ee,{openResultModal:function(){return w(!1)},getList:function(){j(1),i===1&&V()}}),G&&(0,t.jsx)(k.d,o()(o()({},S.current),{},{onClose:function(){return P(!1)}}))]})}var B=se,te=function(){var Z=(0,q.useLocation)(),m=Z.pathname;return console.info("inventoryPage:",m),m!=="/main/tools/inventory"?(0,t.jsx)(q.Outlet,{}):(0,t.jsx)(B,{})}}}]);

"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9725],{27202:function(De,re,e){e.d(re,{dW:function(){return X},ub:function(){return ve}});var se=e(48651),n=e.n(se),ue=e(86516),s=e.n(ue),ie=e(7654),T=e(68591),Q=e.n(T),L=e(79685),I=e(30681),de=e(12239),ce=e(76852),p=e(63342);function X(a){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=(0,L.useState)(v),U=s()(y,2),K=U[0],P=U[1];return(0,L.useEffect)(function(){P(v)},[a,v]),{onChange:P,items:a,current:K}}function me(a){var v=a.items,y=a.current,U=a.onChange,K=a.className,P=K===void 0?"bg-white text-black px-5 py-3 text-lg rounded-lg w-[31.25rem] mo:w-full mo:text-sm":K,Y=a.currentClassName,k=Y===void 0?"flex justify-between items-center":Y,q=a.openClassName,fe=q===void 0?"max-h-[18rem] bg-white  rounded-lg py-3 ":q,t=v[y]?v[y].text:"",xe=(0,de.Z)(!1),le=s()(xe,2),ee=le[0],oe=le[1],pe=(0,L.useCallback)(function(M){y!==M&&U(M)},[y]),E=(0,ie.E)("t-side");return(0,ce.Z)(E,function(){return ee&&oe(!1)}),v.length===0?null:(0,p.jsxs)("div",{ref:E,className:Q()("relative cursor-pointer",P),onClick:function(){return oe()},children:[(0,p.jsxs)("div",{className:k,children:[(0,p.jsx)("span",{className:"truncate",children:t}),ee?(0,p.jsx)(I.pzk,{}):(0,p.jsx)(I._i7,{})]}),ee&&(0,p.jsx)("div",{className:Q()("absolute z-[100] left-0 w-full overflow-x-hidden overflow-y-auto",fe),style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:(0,p.jsx)("div",{className:"",children:v.map(function(M,te){return(0,p.jsx)("div",{style:{},className:Q()("w-full break-all px-5 py-2 text-sm hover:bg-gray-16",{"text-green-2":te===y}),onClick:function(){return pe(te)},children:M.text},"select_item_".concat(te))})})})]})}var ve=function(v){return(0,p.jsx)(me,n()({className:"h-[50px] px-5 items-center bg-stone-50 rounded-lg border border-neutral-200",currentClassName:"h-full flex justify-between items-center"},v))}},75631:function(De,re,e){e.r(re),e.d(re,{default:function(){return Ne}});var se=e(48651),n=e.n(se),ue=e(86516),s=e.n(ue),ie=e(5677),T=e.n(ie),Q=e(64082),L=e(18842),I=e(9991),de=e(59864),ce=e(8965),p=e(76222),X=e(12564),me=e(68591),ve=e.n(me),a=e(79685),v=e(22786),y=e.n(v),U=e(46299),K=e.n(U),P=e(95968),Y=e(27202),k=e(54916),q=e(81123),fe=e(35259),t=e(63342),xe=function(u){var i=u.onOpenModal,C=u.realData,d=u.tableData,h=u.realArr,V=(0,a.useState)(d),A=s()(V,2),$=A[0],z=A[1],Z=function(){for(var r,c=(r=document)===null||r===void 0?void 0:r.getElementById("realDataTable"),_=c.getElementsByTagName("tr"),f=[],R=0;R<_.length;R++){for(var O=[],j=_[R].getElementsByTagName("input"),F=0;F<j.length;F++){var m=j[F].value;O.push(m)}f.push(O)}var o=[];o=d==null?void 0:d.map(function(x,w){var G={processId:x.context["@id"],paramValue:f.slice(1)[w][0]||x.value.toString(),paramName:x.name,dateTime:(0,q.p6)()};return G});var l={lcaParamList:o};typeof i=="function"&&i(),typeof C=="function"&&C(l)};(0,a.useEffect)(function(){var g=d==null?void 0:d.map(function(r,c){return h!=null&&h.length&&h[c].paramName===r.name?n()(n()({},r),{},{inputValue:h[c].paramValue}):n()({},r)});z(g)},[h,d]);var B=[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:"9rem",render:function(r){return(0,t.jsx)("div",{className:" flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:r})}},{title:"\u8FC7\u7A0B\u540D\u79F0",dataIndex:"name",width:"7rem",render:function(r,c){return(0,t.jsx)("div",{className:"flex items-center  h-[33px] font-normal leading-[21px] text-[14px] ",children:c.context.name})}},{title:"\u53C2\u8003\u503C",width:"10rem",dataIndex:"value",render:function(r){return(0,t.jsx)("div",{className:"flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:r})}},{title:"\u586B\u5165\u503C",width:"10rem",dataIndex:"createTime",render:function(r,c){return(0,t.jsx)("input",{defaultValue:c.inputValue,type:"number",className:"font-normal  leading-[21px] text-[14px] w-[10rem] h-[33px] "})}}];return(0,t.jsxs)(P.u_,{title:"\u5B9E\u666F\u6570\u636E\u586B\u62A5",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",onClose:typeof i=="function"&&i||void 0,children:[(0,t.jsx)("div",{className:" mx-5 w-[640px] max-h-[400px] overflow-y-auto ",children:(0,t.jsx)(fe.i,{columns:B,tableId:"realDataTable",data:$||[],isSetBorder:!0,maxHeight:"calc(100vh - 260px)",headerClassName:{background:"#DDDDDD",position:"sticky",top:"-1px",fontWeight:"700",fontSize:"18px",lineHeight:"30px",height:"50px"}})}),(0,t.jsx)("div",{className:"mx-5 ",children:(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5",children:[(0,t.jsx)(I.u,{onClick:typeof i=="function"&&i||void 0,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"\u53D6\u6D88"}),(0,t.jsx)(I.u,{className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:Z,children:"\u786E\u5B9A"})]})})]})},le=xe,ee={loadName:"",productId:""},oe=function(u){var i,C=u.openResultModal,d=u.getList,h=(0,a.useState)(!1),V=s()(h,2),A=V[0],$=V[1],z=(0,a.useState)([{name:"",id:""}]),Z=s()(z,2),B=Z[0],g=Z[1],r=(0,a.useState)({lcaParamList:[]}),c=s()(r,2),_=c[0],f=c[1],R=(0,a.useState)([]),O=s()(R,2),j=O[0],F=O[1],m=(0,a.useState)(ee),o=s()(m,2),l=o[0],x=o[1],w=(0,a.useMemo)(function(){return B.map(function(S){return n()(n()({},S),{},{text:S.name})})},[B]),G=(0,Y.dW)(w,-1),W=(i=G.items[G.current])===null||i===void 0?void 0:i.id,ye=(0,a.useState)(!0),ge=s()(ye,2),Ce=ge[0],_e=ge[1],Se=function(){(0,k.ev)().then(function(D){g(D||{name:"",id:""}),_e(!1)}).catch(function(D){}).finally()},Ee=function(){var D,H=l.loadName;if(!(!H||!W)){var b=j==null?void 0:j.map(function(ne){return{processId:ne.context["@id"],paramValue:ne.value.toString(),paramName:ne.name,dateTime:(0,q.p6)()}}),J=(D=_.lcaParamList)!==null&&D!==void 0&&D.length?_:{lcaParamList:b.length?b:void 0},N=n()(n()({},J),{},{loadName:H,productId:W});(0,k.E)(N).then(function(ne){typeof d=="function"&&d()}).catch(function(ne){}).finally(function(){typeof C=="function"&&C()})}};(0,a.useEffect)(function(){Se()},[]);var je=function(){W&&$(!0)},Ie=function(D){var H=D.target,b=H.name,J=H.value;x(function(N){return n()(n()({},N),{},T()({},b,J))})},Me=function(){var S=K()(y()().mark(function D(){return y()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:(0,k.NF)(W).then(function(J){var N=JSON.parse(J.paramDetail)[0]||[];F(JSON.stringify(N)==="{}"||!(N!=null&&N.parameters)?[]:N==null?void 0:N.parameters)}).catch(function(J){}).finally();case 1:case"end":return b.stop()}},D)}));return function(){return S.apply(this,arguments)}}();return(0,a.useEffect)(function(){W&&Me()},[W]),Ce?null:(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(P.u_,{className:"rounded-lg",containerClassName:"mx-5 w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",title:"\u65B0\u5EFA\u78B3\u8DB3\u8FF9\u7ED3\u679C",onClose:C,children:(0,t.jsxs)("div",{className:"mx-5 w-[640px] ",children:[(0,t.jsx)("span",{className:"font-normal leading-6 ",children:"\u78B3\u8DB3\u8FF9\u6279\u6B21\uFF1A"}),(0,t.jsx)("input",{value:l.loadName,onChange:Ie,id:"loadName",name:"loadName",maxLength:30,className:"w-full mb-[20px] mt-[10px] px-5 border border-[#DDDDDD]  h-[50px]  bg-[#F8F8F8] rounded-lg"}),(0,t.jsx)("div",{className:"font-normal leading-6  mb-[10px]",children:"\u4EA7\u54C1\u7CFB\u7EDF\uFF1A"}),(0,t.jsx)(Y.ub,n()(n()({},G),{},{openClassName:"max-h-[9rem] bg-white  rounded-lg py-3 "})),(0,t.jsx)("div",{className:"mt-5 font-normal leading-6",children:"\u5B9E\u666F\u6570\u636E\u586B\u62A5\uFF1A"}),(0,t.jsx)("div",{onClick:function(){return je()},className:" flex cursor-pointer rounded-[4px] leading-4 text-[16px] mt-[10px] bg-[#F1F1F1] w-[84px] h-[24px]  text-center items-center justify-center ",children:"\u524D\u5F80\u586B\u5199"}),(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5",children:[(0,t.jsx)(I.u,{onClick:C,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"\u53D6\u6D88"}),(0,t.jsx)(I.u,{className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:Ee,disabled:!W||!l.loadName,children:"\u8BA1\u7B97\u78B3\u7ED3\u679C"})]})]})}),A&&(0,t.jsx)(le,{realData:f,tableData:j,realArr:_.lcaParamList,onOpenModal:function(){return $(!1)}})]})},pe=oe,E,M=(E={},T()(E,-1,{color:"text-[red]",text:"\u8BA1\u7B97\u5931\u8D25"}),T()(E,0,{color:"text-[#FF9800]",text:"\u7B49\u5F85\u8BA1\u7B97"}),T()(E,1,{color:"text-green-2",text:"\u67E5\u770B\u7ED3\u679C"}),T()(E,2,{color:"text-blue-600",text:"\u6B63\u5728\u8BA1\u7B97"}),E);function te(){var ae=(0,a.useState)(1),u=s()(ae,2),i=u[0],C=u[1],d=(0,a.useState)(!1),h=s()(d,2),V=h[0],A=h[1],$=(0,a.useState)(!1),z=s()($,2),Z=z[0],B=z[1],g=(0,a.useRef)({inputData:"",data:""}),r=function(o){var l=o.param,x=o.paramDetail;g.current={inputData:l,data:x},B(!0)},c=(0,a.useMemo)(function(){return[{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"loadName",width:180,ellipsis:!0},{title:"\u5B9E\u666F\u6570\u636E",valueType:"option",width:120,render:function(o,l){return[(0,t.jsx)("div",{className:"flex justify-center whitespace-nowrap px-2.5 bg-[#F1F1F1] rounded",onClick:function(){return r(l)},children:(0,t.jsx)("span",{className:"cursor-pointer",children:"\u67E5\u770B\u5B9E\u666F\u6570\u636E"})},"key_look_real")]}},{title:"\u6279\u6B21\u7ED3\u679CID",dataIndex:"loadNumber",width:170,renderText:L.zL},{title:"\u4EA7\u54C1\u7CFB\u7EDF\u540D\u79F0",width:128,dataIndex:"productName",ellipsis:!0},{title:"\u7CFB\u7EDF\u4EA7\u54C1ID",dataIndex:"productUuid",width:170,renderText:L.zL},{title:"\u63CF\u8FF0",dataIndex:"productDescription",width:300,ellipsis:!0},{title:"\u64CD\u4F5C\u4EBA",dataIndex:"operator",width:100,ellipsis:!0},{title:"\u751F\u6210\u65F6\u95F4",dataIndex:"calculateSuccessTime",valueType:"dateTime",width:180},{title:"\u78B3\u8DB3\u8FF9\u7ED3\u679C",dataIndex:"state",width:130,render:function(o,l){var x,w;return(0,t.jsx)("div",{className:ve()({"cursor-pointer":l.state===1},(x=M[l.state])===null||x===void 0?void 0:x.color),onClick:function(){l.state===1&&X.history.push("/main/tools/inventory/result?id=".concat(l.loadNumber))},children:(w=M[l.state])===null||w===void 0?void 0:w.text})}},{title:"\u7EC4\u7EC7\u540D\u79F0",dataIndex:"orgName",width:130,ellipsis:!0},{title:"\u7EC4\u7EC7\u7F16\u53F7",dataIndex:"orgSerialNumber",width:130,ellipsis:!0}]},[]),_=(0,ce.cc)(i,1e4),f=_.data,R=_.isLoading,O=_.mutate,j=(0,a.useMemo)(function(){return((f==null?void 0:f.records)||[]).map(function(m,o){return n()(n()({},m),{},{key:"key_inventory_"+o})})},[f]),F=(0,p.b)();return(0,t.jsxs)(Q.Z,{title:"\u6211\u7684\u4EA7\u54C1\u78B3\u8DB3\u8FF9\u7ED3\u679C",extra:F?[(0,t.jsx)(I.u,{onClick:function(){return A(!0)},children:"\u65B0\u5EFA\u78B3\u8DB3\u8FF9\u7ED3\u679C"},"new_inventory")]:[],children:[(0,t.jsx)("div",{className:"bg-white",children:(0,t.jsx)(L.ZP,{columns:c,dataSource:j,loading:R,pagination:{pageSize:10,total:(f==null?void 0:f.total)||0,onChange:function(o){C(o)}}})}),V&&(0,t.jsx)(pe,{openResultModal:function(){return A(!1)},getList:function(){C(1),i===1&&O()}}),Z&&(0,t.jsx)(de.d,n()(n()({},g.current),{},{onClose:function(){return B(!1)}}))]})}var he=te,Ne=function(){var ae=(0,X.useLocation)(),u=ae.pathname;return console.info("inventoryPage:",u),u!=="/main/tools/inventory"?(0,t.jsx)(X.Outlet,{}):(0,t.jsx)(he,{})}}}]);

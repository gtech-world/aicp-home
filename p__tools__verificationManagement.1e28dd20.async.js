"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2941],{64082:function(G,C,n){var D=n(48651),d=n.n(D),u=n(38046),s=n.n(u),B=n(30541),h=n(33421),y=n(68591),P=n.n(y),p=n(63342),E=["className"];function I(g){var a=g.className,c=s()(g,E),i=(0,h.l)(function(v){var x=v.token;return{".ant-page-header":{padding:"1rem 1.5rem",paddingBlock:"1rem !important",paddingInline:"1.5rem !important",backgroundColor:x.colorBgBase,".ant-breadcrumb":{fontSize:".875rem",paddingBlockStart:"0 !important"},".ant-page-header-heading-title":{fontSize:"1.25rem"}},".ant-pro-grid-content":{padding:"1.5rem",backgroundColor:"transparent",".ant-pro-page-container-children-content":{padding:0,paddingBlock:"0 !important"},".ant-pro-page-container-children-container":{paddingBlock:"0 !important",paddingInline:"0 !important"}}}});return(0,p.jsx)(B._z,d()({className:P()(a,i)},c))}C.Z=I},18842:function(G,C,n){n.d(C,{rx:function(){return v},zL:function(){return i}});var D=n(48651),d=n.n(D),u=n(38046),s=n.n(u),B=n(81123),h=n(54695),y=n(33421),P=n(9021),p=n(68591),E=n.n(p),I=n(97207),g=n.n(I),a=n(63342),c=["className","columns"];function i(x){return g().size(x)>=16?(0,a.jsx)(P.Z,{title:x,children:(0,B.lS)(x,8,8)}):x}function v(x){var X=x.className,m=x.columns,z=s()(x,c),R=(0,y.l)(function(N){var Y=N.token;return{".ant-table-container":{borderStartStartRadius:"0 !important",borderStartEndRadius:"0 !important"},".ant-pro-card-body":{paddingInline:"0 !important",paddingBlock:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:first-child":{borderStartStartRadius:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:last-child":{borderStartEndRadius:"0 !important"},".ant-pagination-item, .ant-pagination-prev, .ant-pagination-next":{borderRadius:"2px !important",minWidth:"30px !important",height:"30px !important",lineHeight:"28px !important"},".ant-pagination-total-text":{lineHeight:"30px !important",visibility:"hidden"}}}),M=g().sumBy(m,"width");return(0,a.jsx)(h.Z,d()({bordered:!0,columns:m,scroll:{x:M},search:!1,options:!1,rowKey:"key",className:E()(X,"p-6",R)},z))}C.ZP=v},8242:function(G,C,n){var D=n(68591),d=n.n(D),u=n(63342),s=function(h){var y=h.onClick,P=h.busy,p=h.btnText,E=h.btnClassName,I=h.prohibit;return(0,u.jsx)("div",{onClick:I?void 0:y,className:d()(I?" border bg-[#F5F5F5] !text-[#00000040] cursor-no-drop hover:border-[#F5F5F5] hover:!text-[#00000040]  ":"cursor-pointer","flex hover:border-[#29953A] hover:text-[#29953A] border text-[#000000] rounded-[2px] leading-4 text-[14px]  w-[100px] h-[24px]  text-center items-center justify-center ",P?"cursor-not-allowed":"cursor-pointer",E),children:p})};C.Z=s},46284:function(G,C,n){var D=n(48651),d=n.n(D),u=n(38046),s=n.n(u),B=n(74589),h=n(79685),y=n(63342),P=["options","data","optionEmptyText","wrapperStyle","hideIfEmpty"],p=["render","dataIndex","show"],E=B.Z.Item,I=function(a){var c=a.options,i=a.data,v=a.optionEmptyText,x=a.wrapperStyle,X=x===void 0?"backroundColor: 'red'":x,m=a.hideIfEmpty,z=s()(a,P);return console.log("wrapperStyle",X),(0,h.useMemo)(function(){return(0,y.jsx)(B.Z,d()(d()({},z),{},{children:c.map(function(R){var M=R.render,N=R.dataIndex,Y=R.show,w=s()(R,p),$="";if(Y!==!1&&(console.log("dadatatadatadata",i[N],N),!(typeof M=="function"&&($=M(i[N],i),$===!1))&&!(m&&(i[N]===void 0||i[N]===null)&&(typeof M!="function"||$==null||$==="")))){var re=typeof v!="undefined"&&v!==null?v:"";return console.log("emptyTextemptyText",re,$),(0,h.createElement)(E,d()(d()({},w),{},{key:N}),typeof M=="function"?$||re:typeof i[N]!="undefined"&&i[N]!==null?i[N]:re)}})}))},[a])};C.Z=I},9991:function(G,C,n){n.d(C,{u:function(){return a},z:function(){return g}});var D=n(48651),d=n.n(D),u=n(38046),s=n.n(u),B=n(68591),h=n.n(B),y=n(68717),P=n(31887),p=n(63342),E=["children","className"],I=["busy","disabled","type","className","defStyle","children"];function g(c){var i=c.children,v=c.className,x=s()(c,E);return(0,p.jsx)("button",d()(d()({},x),{},{className:h()(v),children:c.children}))}function a(c){var i=c.busy,v=c.disabled,x=c.type,X=x===void 0?"primary":x,m=c.className,z=c.defStyle,R=z===void 0?"btn-primary":z,M=c.children,N=s()(c,I);return(0,p.jsx)(P.ZP,d()(d()({type:R==="btn-primary-1"?"default":X,className:h()(m,"leading-none !shadow-none",{})},N),{},{children:i?(0,p.jsx)(y.fCD,{className:"mx-auto animate-spin"}):M}))}},11e3:function(G,C,n){n.d(C,{I:function(){return I},g:function(){return E}});var D=n(48651),d=n.n(D),u=n(38046),s=n.n(u),B=n(68591),h=n.n(B),y=n(26082),P=n(63342),p=["className","color","size"];function E(g){var a=g.className,c=g.color,i=g.size,v=i===void 0?"":i,x=s()(g,p);return(0,P.jsx)("div",d()(d()({},x),{},{className:h()("text-black w-full h-full flex items-center justify-center",a),children:(0,P.jsx)(y.uur,{color:c,style:v?{fontSize:v}:{},className:"text-[3.125rem] animate-spin"})}))}function I(){return(0,P.jsx)(E,{className:"fixed z-50 left-0 top-0 w-full !h-full bg-black/25"})}},95968:function(G,C,n){n.d(C,{u_:function(){return X}});var D=n(48651),d=n.n(D),u=n(86516),s=n.n(u),B=n(38046),h=n.n(B),y=n(97980),P=n(68591),p=n.n(P),E=n(79685),I=n(50374),g=n(22798),a=n(63342),c=["className","title","onClose","outClose","titleClassName","containerClassName","chilrenClassName","bottomBtn","children","line"],i={current:null};i.current=document.body;function v(m){var z=m.title,R=m.onClose,M=m.titleClassName,N=m.containerClassName;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:p()("flex items-center justify-between mt-5  text-base font-semibold mx-5",N),children:[(0,a.jsx)("div",{className:p()("max-w-[70%] overflow-hidden text-ellipsis whitespace-nowrap",M),children:z}),(0,a.jsx)(g.q5L,{onClick:function(w){w.stopPropagation(),R&&R()},className:"text-2xl cursor-pointer"})]}),(0,a.jsx)("div",{className:"mt-5 border-b "})]})}function x(){return _jsx("div",{})}function X(m){var z=m.className,R=m.title,M=m.onClose,N=m.outClose,Y=N===void 0?!1:N,w=m.titleClassName,$=m.containerClassName,re=m.chilrenClassName,be=m.bottomBtn,Ce=m.children,ge=m.line,t=ge===void 0?!1:ge,De=h()(m,c),se=(0,E.useRef)(null),Pe=(0,E.useState)(!0),xe=s()(Pe,2),de=xe[0],Ee=xe[1],ye=function(){M&&(Ee(!0),setTimeout(function(){return M()},300))},Ne=(0,y.R)(function(ue){ue.stopPropagation();var Me=se.current&&se.current!==ue.target&&se.current.contains(ue.target);!Me&&Y&&ye()});return(0,E.useEffect)(function(){Ee(!1)},[]),i.current?(0,I.createPortal)((0,a.jsx)("div",d()(d()({},De),{},{ref:se,className:p()("fixed left-0  top-0 w-full h-full overflow-auto z-[500] flex justify-center items-center",{"transition-[background_ease_300ms]":!0,"bg-black/0":de,"bg-black/25":!de},z),onClick:Ne,children:(0,a.jsxs)("div",{id:"mo",className:p()("bg-white rounded min-w-[20rem]  min-h-[150]",{"transition-[all_ease_300ms]":!0,"scale-0":de,"scale-100":!de}),children:[(0,a.jsx)(v,{title:R,containerClassName:$,titleClassName:w,onClose:ye}),(0,a.jsx)("div",{className:p()("mt-5",re),children:Ce}),t&&(0,a.jsx)("div",{className:"p-6 border-t mt-5",children:be})]})})),i.current):null}},8965:function(G,C,n){n.d(C,{H4:function(){return h},Kv:function(){return B},TW:function(){return a},Tz:function(){return P},We:function(){return y},Y5:function(){return I},cc:function(){return E},cu:function(){return c},e0:function(){return g},uU:function(){return p}});var D=n(97207),d=n.n(D),u=n(94437),s=n(54916);function B(i){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,u.ZP)("/api/product-system/".concat(i,"/detail"),{refreshInterval:v})}function h(i){return(0,u.ZP)(d().isNil(i)?null:"/api/verifyRecord/".concat(i,"/detail"))}function y(i){return(0,u.ZP)(i?"/api/inventory/all":null)}function P(i){return(0,u.ZP)(i?"/api/verifyRecord/verifiers":null)}function p(i){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,u.ZP)("/api/product-system/list/?pageNum=".concat(i,"&pageSize=10"),{refreshInterval:v})}function E(i){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,u.ZP)("/api/inventory/list/?pageNum=".concat(i,"&pageSize=10"),{refreshInterval:v})}function I(i){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,u.ZP)("/api/verifyRecord/list/?pageNum=".concat(i,"&pageSize=10"),{refreshInterval:v})}function g(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(0,u.ZP)("/api/sbt/token/list/?pageNum=".concat(i,"&pageSize=999"))}function a(i){return(0,u.ZP)(i?"/api/sbt/token/uuid/".concat(i):null,{fetcher:s.Gh})}function c(i){return(0,u.ZP)(i?"/api/sbt/token/nft/".concat(i):null,{fetcher:s.Gh})}},97980:function(G,C,n){n.d(C,{R:function(){return d}});var D=n(79685);function d(u){var s=(0,D.useRef)(u);return(0,D.useLayoutEffect)(function(){s.current=u}),(0,D.useCallback)(function(){return s.current&&s.current.apply(s,arguments)},[])}},11187:function(G,C,n){n.r(C),n.d(C,{default:function(){return We}});var D=n(48651),d=n.n(D),u=n(86516),s=n.n(u),B=n(64082),h=n(18842),y=n(9991),P=n(99095),p=n(4151),E=n(8965),I=n(97207),g=n.n(I),a=n(79685),c=n(8242),i=n(46284),v=n(11e3),x=n(95968),X=n(22786),m=n.n(X),z=n(46299),R=n.n(z),M=n(54916);function N(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,j=(0,a.useRef)(new AbortController),Q=function(K){var L=K,J=function(){if(L.length!==0){var W=L[0];return L=g().drop(L),{file:W,index:K.length-L.length-1}}},F=g().min([_e,L.length]),te=g().range(K.length),q=function(){var T=R()(m()().mark(function W(){var S,b,H,A;return m()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(S=J(),!S){_.next=10;break}return b=S.file,H=S.index,_.next=6,(0,M.qM)(b,{signal:j.current.signal});case 6:A=_.sent,te[H]=A,_.next=11;break;case 10:return _.abrupt("return");case 11:_.next=0;break;case 13:case"end":return _.stop()}},W)}));return function(){return T.apply(this,arguments)}}();return Promise.all(g().range(F).map(function(){return q()})).then(function(){return te})};return[Q,function(){try{j.current.abort()}catch(k){console.info("abort upfiles")}}]}var Y=n(81123),w=n(3826),$=n(51791),re=n(7698),be=n(50510),Ce=n.n(be),ge=n(98919),t=n(63342),De=function(j){return(0,t.jsx)("div",{className:"font-normal leading-[21.79px] text-[14px] text-gray-9",children:j.value})},se=function(j){var Q,k,K,L,J,F=j.closeModal,te=j.recordId,q=j.type,T=q===void 0?"new":q,W=(0,a.useRef)(null),S=(0,P.oR)(),b=S.userData,H=(0,E.H4)(te),A=H.isLoading,e=H.data,_=(0,E.We)(T==="new"||T==="editor"),oe=_.isLoading,ee=_.data,Z=(0,E.Tz)(T==="new"||T==="editor"),je=Z.isLoading,ve=Z.data,fe=A||oe||je,O=(0,ge.Z)({verifyState:!0,carbonNum:""}),V=s()(O,2),r=V[0],U=V[1],pe=N(),me=s()(pe,2),Oe=me[0],Se=me[1];(0,a.useEffect)(function(){return Se},[]);var he=!r.files||r.files.length===0||r.files.length>20||g().findIndex(r.files,function(l){return l.size>=1024*1024*1024*2||l.name.length>=128})>=0,Te=!ee||!ve||!r.name||!r.carbonNum||!r.verifyName||he,Ke=(0,a.useState)(!1),Be=s()(Ke,2),ae=Be[0],ce=Be[1],Fe=function(){Te||ae||(ce(!0),Oe(r.files).then(function(o){var f;return(0,M._Q)({name:r.name,loadNumber:r.carbonNum||e.loadNumber,description:r.desc||"",fileList:o,verifyUserId:r.verifyName||(e==null||(f=e.verifyUser)===null||f===void 0?void 0:f.id)}).then(function(){return F(!0)}).catch(console.error).finally(function(){ce(!1)})}))},Ue=!e||!ee||!ve||(r.name||e.name)===e.name&&(r.desc||e.description)===e.description&&r.loadNumber===e.loadNumber&&r.verifyName===e.verifyUserId&&he,ze=function(){if(!(Ue||ae)){var o;if(ce(!0),r.files)o=Oe(r.files).then(function(ne){var Ie;return(0,M.u_)(e.id,{name:r.name||e.name,loadNumber:r.carbonNum||e.loadNumber,description:r.desc||e.description,fileList:ne,verifyUserId:r.verifyName||(e==null||(Ie=e.verifyUser)===null||Ie===void 0?void 0:Ie.id)})});else{var f;o=(0,M.u_)(e.id,{name:r.name,loadNumber:r.carbonNum||e.loadNumber,description:r.desc,verifyUserId:r.verifyName||(e==null||(f=e.verifyUser)===null||f===void 0?void 0:f.id)})}o.then(function(){return F(!0)}).catch(console.error).finally(function(){ce(!1)})}},Re=!e||he||!r.functionalUnit||!r.evaluationBoundary||!r.evaluationBasis||!r.evaluationExpireTime,we=function(){Re||!r.files||ae||(ce(!0),Oe(r.files).then(function(o){return(0,M.A6)(e.id,{fileList:o,state:!0,functionalUnit:r.functionalUnit,evaluationBoundary:r.evaluationBoundary,evaluationBasis:r.evaluationBasis,certificateNumber:r.certificateNumber,evaluationExpireTime:r.evaluationExpireTime+" 00:00:00"})}).then(function(){return F(!0)}).catch(console.error).finally(function(){ce(!1)}))},Ze={directory:"",webkitdirectory:""},le="w-full  shrink-0 px-5 border border-[#DDDDDD]  h-[40px]  bg-[#F8F8F8] rounded-lg",Le=T==="verify",Ve=(0,a.useMemo)(function(){var l;if(he||!r.files)return"\u9A8C\u8BC1\u6587\u4EF6";var o=((l=r.files.item(0))===null||l===void 0?void 0:l.webkitRelativePath.split("/")[0])||"\u9A8C\u8BC1\u6587\u4EF6";return(0,Y.lS)(o,10,10)},[r.files,he]),Ae={label:Le?"\u9A8C\u8BC1\u6587\u6863":"\u9644\u4EF6",dataIndex:"verifyDoc",render:function(){return(0,t.jsx)(a.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 mt-[-15px]",children:[(0,t.jsx)("input",d()(d()({},Ze),{},{ref:W,type:"file",hidden:!0,onChange:function(f){return U({files:f.target.files})}})),(0,t.jsx)(p.SW,{}),(0,t.jsx)(De,{value:Ve}),(0,t.jsx)(c.Z,{onClick:function(f){var ne;return!ae&&((ne=W.current)===null||ne===void 0?void 0:ne.click())},busy:ae,btnText:" \u9009\u62E9\u6587\u4EF6\u5939"})]})})}},$e={verifyRecord:e==null?void 0:e.name,carbonNum:e==null?void 0:e.loadNumber,description:r.desc||(e==null?void 0:e.description),verifyName:"verifyName",createName:b==null?void 0:b.name,organizationName:b==null||(Q=b.organization)===null||Q===void 0?void 0:Q.name},ke={verifyName:e==null?void 0:e.name,verifyId:e==null?void 0:e.id,createUser:e==null||(k=e.createUser)===null||k===void 0?void 0:k.name,organizationName:e==null||(K=e.organization)===null||K===void 0?void 0:K.name,description:e==null?void 0:e.description,loadName:e==null||(L=e.inventory)===null||L===void 0?void 0:L.loadName,loadNumber:e==null?void 0:e.loadNumber,verifyUser:e==null||(J=e.verifyUser)===null||J===void 0?void 0:J.name,verifyDoc:"",functionalUnit:r.functionalUnit||(e==null?void 0:e.functionalUnit),evaluationBoundary:r.evaluationBoundary||(e==null?void 0:e.evaluationBoundary),evaluationBasis:r.evaluationBasis||(e==null?void 0:e.evaluationBasis),evaluationExpireTime:r.evaluationExpireTime||(e==null?void 0:e.evaluationExpireTime)},ie=function(o){return(0,t.jsx)("div",{className:" mt-[-15px]",children:o})},He=[{label:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"verifyName",render:function(){return ie(e==null?void 0:e.name)}},{label:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"verifyId",render:function(){return ie(e==null?void 0:e.id)}},{label:"\u53D1\u8D77\u4EBA",dataIndex:"createUser",render:function(){var o;return ie(e==null||(o=e.createUser)===null||o===void 0?void 0:o.name)}},{label:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"organizationName",render:function(){var o;return ie(e==null||(o=e.organization)===null||o===void 0?void 0:o.name)}},{label:"\u63CF\u8FF0",dataIndex:"description",render:function(){return ie(e==null?void 0:e.description)}},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"loadName",render:function(){var o;return ie(e==null||(o=e.inventory)===null||o===void 0?void 0:o.loadName)}},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber",render:function(){return ie(e==null?void 0:e.loadNumber)}},{label:"\u9A8C\u8BC1\u4EBA",dataIndex:"verifyUser",render:function(){var o;return ie(e==null||(o=e.verifyUser)===null||o===void 0?void 0:o.name)}},Ae,{label:"\u8BC1\u4E66\u7F16\u53F7",dataIndex:"certificateNumber",render:function(){return(0,t.jsx)(w.Z,{style:{marginTop:"-15px"},value:r.certificateNumber||(e==null?void 0:e.certificateNumber),onChange:function(f){return U({certificateNumber:f.target.value})},maxLength:30,className:le})}},{label:"\u529F\u80FD\u5355\u4F4D",dataIndex:"functionalUnit",render:function(){return(0,t.jsx)(w.Z,{style:{marginTop:"-15px"},value:r.functionalUnit||(e==null?void 0:e.functionalUnit),onChange:function(f){return U({functionalUnit:f.target.value})},maxLength:30,className:le})}},{label:"\u8BC4\u4EF7\u8FB9\u754C",dataIndex:"evaluationBoundary",render:function(){return(0,t.jsx)(w.Z,{style:{marginTop:"-15px"},value:r.evaluationBoundary||(e==null?void 0:e.evaluationBoundary),onChange:function(f){return U({evaluationBoundary:f.target.value})},maxLength:30,className:le})}},{label:"\u8BC4\u4EF7\u4F9D\u636E",dataIndex:"evaluationBasis",render:function(){return(0,t.jsx)(w.Z,{style:{marginTop:"-15px"},value:r.evaluationBasis||(e==null?void 0:e.evaluationBasis),onChange:function(f){return U({evaluationBasis:f.target.value})},maxLength:30,className:le})}},{label:"\u8BC4\u4EF7\u6709\u6548\u671F",dataIndex:"evaluationExpireTime",render:function(){return(0,t.jsx)($.default,{style:{marginTop:"-15px"},defaultValue:r.evaluationExpireTime||(e==null?void 0:e.evaluationExpireTime)&&Ce()(r.evaluationExpireTime||(e==null?void 0:e.evaluationExpireTime)),onChange:function(f,ne){U({evaluationExpireTime:ne})},className:le})}}],Ge=[{label:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"verifyRecord",render:function(){return(0,t.jsx)(w.Z,{value:r.name||(e==null?void 0:e.name),onChange:function(f){return U({name:f.target.value})},maxLength:30,style:{marginTop:"-15px"},className:le})}},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"carbonNum",render:function(){return(0,t.jsx)(re.default,{value:r.carbonNum||(e==null?void 0:e.loadNumber),style:{height:"40px",width:"100%",marginTop:"-15px"},onChange:function(f){return U({carbonNum:f})},options:(0,Y.ry)("loadName","loadNumber",ee)})}},{label:"\u63CF\u8FF0",dataIndex:"description",render:function(){return(0,t.jsx)(w.Z,{style:{marginTop:"-15px"},value:r.desc||(e==null?void 0:e.description),onChange:function(f){return U({desc:f.target.value})},maxLength:100,className:le})}},{label:"\u9009\u62E9\u9A8C\u8BC1\u4EBA",dataIndex:"verifyName",render:function(){var o;return(0,t.jsx)(re.default,{value:r.verifyName||(e==null||(o=e.verifyUser)===null||o===void 0?void 0:o.id),style:{marginTop:"-15px",height:"40px",borderColor:"#DDDDDD",backgroundColor:"#F8F8F8",width:"100%"},onChange:function(ne){return U({verifyName:ne})},options:(0,Y.ry)("name","id",ve)})}},{label:"\u53D1\u8D77\u4EBA",dataIndex:"createName",render:function(){return(0,t.jsx)("div",{className:" mt-[-15px]",children:b==null?void 0:b.name})}},{label:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"organizationName",render:function(){var o;return(0,t.jsx)("div",{className:" mt-[-15px]",children:b==null||(o=b.organization)===null||o===void 0?void 0:o.name})}},Ae];return(0,t.jsx)(a.Fragment,{children:(0,t.jsx)(x.u_,{className:"rounded-lg",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[16px] leading-5 font-bold",title:T==="new"?"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55":"\u7F16\u8F91\u9A8C\u8BC1\u8BB0\u5F55",line:!0,bottomBtn:!fe&&(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5  w-full ",children:[T==="new"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.u,{size:"large",defStyle:"btn-primary-1",className:"flex-1",onClick:function(){return F(!1)},children:"\u53D6\u6D88"}),(0,t.jsx)(y.u,{size:"large",busy:ae,disabled:Te,defStyle:"btn-primary",className:"flex-1",onClick:Fe,children:"\u786E\u5B9A"})]}),T==="editor"&&(0,t.jsx)(y.u,{busy:ae,size:"large",disabled:Ue,className:"flex-1",onClick:ze,children:"\u63D0\u4EA4\u66F4\u65B0"}),T==="verify"&&(0,t.jsx)(y.u,{busy:ae,size:"large",disabled:Re,className:"flex-1",onClick:we,children:"\u63D0\u4EA4\u9A8C\u8BC1"})]}),onClose:function(){return F(!1)},children:(0,t.jsxs)("div",{className:"flex flex-col py-[1px] gap-5 px-5 w-[640px] min-h-[6.25rem] max-h-mc overflow-y-auto",children:[fe&&(0,t.jsx)(v.g,{}),!fe&&(0,t.jsx)(t.Fragment,{children:Le?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Z,{options:He,data:ke,optionEmptyText:"-",layout:"vertical",column:1,contentStyle:{color:"#999999",fontWeight:"400",fontSize:"14px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"14px",marginTop:"-5px"}})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Z,{options:Ge,data:$e,optionEmptyText:"-",layout:"vertical",column:1,contentStyle:{color:"#999999",fontWeight:"400",fontSize:"14px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"15px",marginTop:"-5px"}})})})]})})})},Pe=se,xe=n(30905),de=n.n(xe),Ee=n(64470),ye=function(j){var Q=j.closeModal,k=j.fileList,K=(0,a.useState)(!1),L=s()(K,2),J=L[0],F=L[1],te=(0,P.h3)(),q=function(){var T=R()(m()().mark(function W(){var S,b,H,A;return m()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return F(!0),_.prev=1,S=new(de()),b="",k.forEach(function(oe){b=oe.fileName.split("/")[0];var ee=Ee.default.get(oe.downloadUrl,{responseType:"arraybuffer"}).then(function(Z){return Z.data});S.file(oe.fileName,ee)}),_.next=7,S.generateAsync({type:"blob"});case 7:H=_.sent,A=document.createElement("a"),A.href=URL.createObjectURL(H),A.download="".concat(b,".zip"),A.click(),URL.revokeObjectURL(A.href),_.next=18;break;case 15:_.prev=15,_.t0=_.catch(1),te("\u6587\u4EF6\u4E0B\u8F7D\u51FA\u9519\uFF01");case 18:return _.prev=18,F(!1),_.finish(18);case 21:case"end":return _.stop()}},W,null,[[1,15,18,21]])}));return function(){return T.apply(this,arguments)}}();return(0,t.jsx)(a.Fragment,{children:(0,t.jsx)(x.u_,{onClose:Q,title:"\u67E5\u770B\u6587\u4EF6\u5939",line:!0,bottomBtn:(0,t.jsx)(y.u,{size:"large",disabled:J,className:"bg-[#29953A] w-full h-[50px] rounded-lg text-[#FFFFFF] ",onClick:q,children:"\u4E0B\u8F7D"}),children:(0,t.jsx)("div",{className:"px-5 overflow-y-auto  max-h-[260px]",children:k.map(function(T,W){var S=T.fileName.split("/");return(0,t.jsx)("div",{id:"view",className:"w-[640px] h-[34px] flex items-center ",children:(0,t.jsx)("span",{className:"ml-[10px] leading-5 text-[14px] font-normal",children:S[S.length-1]})},"file_".concat(W))})})})})},Ne=ye;function ue(){var _e=(0,P.oR)(),j=_e.userData,Q=(0,a.useState)(1),k=s()(Q,2),K=k[0],L=k[1],J=(0,a.useState)(!1),F=s()(J,2),te=F[0],q=F[1],T=(0,a.useState)(!1),W=s()(T,2),S=W[0],b=W[1],H=(0,a.useRef)([]),A=(0,a.useRef)(),e=function(V){H.current=V,b(!0)},_=(0,a.useCallback)(function(O){q(!0),A.current={type:g().isEmpty(O)?"new":(j==null?void 0:j.role)==="verify"?"verify":"editor",recordId:O.id}},[j]),oe=(0,a.useMemo)(function(){return[{title:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"name",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"id",width:160,ellipsis:!0},{title:"\u53D1\u8D77\u4EBA",dataIndex:"_createUserName",width:160,ellipsis:!0},{title:"\u7EC4\u7EC7\u673A\u6784",width:160,ellipsis:!0,dataIndex:"_organizationName"},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"_loadName",width:160,ellipsis:!0},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber",width:170,renderText:h.zL},{title:"\u9644\u4EF6",width:160,render:function(V,r){return(0,t.jsxs)("div",{onClick:function(){return e(r.attachmentFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,t.jsx)(p.SW,{width:"14"}),(0,t.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]})}},{title:"\u6700\u540E\u7F16\u8F91",dataIndex:"updateTime",valueType:"dateTime",width:170},{title:"\u9A8C\u8BC1\u4EBA",dataIndex:"_verifyUserName",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u6587\u6863",width:130,render:function(V,r){return r.verifyFileList.length?(0,t.jsxs)("div",{onClick:function(){return e(r.verifyFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,t.jsx)(p.SW,{width:"14"}),(0,t.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]}):null}},{title:"\u9A8C\u8BC1\u72B6\u6001",width:130,render:function(V,r){return(0,t.jsx)("span",{className:"",children:r.state?"\u5DF2\u9A8C\u8BC1":""})}},{title:"\u9A8C\u8BC1\u65F6\u95F4",dataIndex:"proofTime",valueType:"dateTime",width:170},{title:"\u64CD\u4F5C",width:120,valueType:"option",render:function(V,r){return r.state?[]:[(0,t.jsx)("div",{className:"flex justify-between flex-1 text-green-2 break-keep",children:(0,t.jsx)("div",{className:"flex items-center font-normal justify-center cursor-pointer leading-[27px]",onClick:function(){return _(r)},children:"\u7F16\u8F91"})},"edit")]}}]},[_]),ee=(0,E.Y5)(K),Z=ee.data,je=ee.isLoading,ve=ee.mutate,fe=(0,a.useMemo)(function(){return((Z==null?void 0:Z.records)||[]).map(function(O,V){var r,U,pe,me;return d()(d()({},O),{},{key:"verify_"+V,_createUserName:(r=O.createUser)===null||r===void 0?void 0:r.name,_organizationName:(U=O.organization)===null||U===void 0?void 0:U.name,_loadName:(pe=O.inventory)===null||pe===void 0?void 0:pe.loadName,_verifyUserName:(me=O.verifyUser)===null||me===void 0?void 0:me.name})})},[Z]);return(0,t.jsxs)(B.Z,{title:"\u9A8C\u8BC1\u7BA1\u7406\u5217\u8868",extra:(j==null?void 0:j.role)==="admin"?[(0,t.jsx)(y.u,{onClick:function(){return _({})},children:"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55"},"key_new_verify")]:[],children:[(0,t.jsx)("div",{className:"bg-white",children:(0,t.jsx)(h.ZP,{columns:oe,dataSource:fe,loading:je,scroll:{x:scrollX},pagination:{pageSize:10,total:(Z==null?void 0:Z.total)||0,current:K,onChange:function(V){L(V)}}})}),te&&A.current&&(0,t.jsx)(Pe,{type:A.current.type,recordId:A.current.recordId,closeModal:function(){L(1),K===1&&ve(),q(!1),A.current=void 0}}),S&&(0,t.jsx)(Ne,{fileList:H.current,closeModal:function(){b(!1)}})]})}var Me=ue,We=Me}}]);

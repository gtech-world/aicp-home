"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2941],{64082:function(le,b,e){var M=e(48651),u=e.n(M),h=e(38046),m=e.n(h),W=e(30541),I=e(33421),j=e(68591),O=e.n(j),C=e(63342),D=["className"];function F(l){var a=l.className,g=m()(l,D),r=(0,I.l)(function(o){var s=o.token;return{".ant-page-header":{padding:"1rem 1.5rem",backgroundColor:s.colorBgBase,".ant-breadcrumb":{fontSize:".875rem",paddingBlockStart:"0 !important"},".ant-page-header-heading-title":{fontSize:"1.25rem"}},".ant-pro-grid-content":{padding:"1.5rem",backgroundColor:"transparent",".ant-pro-page-container-children-content":{padding:0,paddingBlock:"0 !important"},".ant-pro-page-container-children-container":{paddingBlock:"0 !important",paddingInline:"0 !important"}}}});return(0,C.jsx)(W._z,u()({className:O()(a,r)},g))}b.Z=F},18842:function(le,b,e){e.d(b,{rx:function(){return o},zL:function(){return r}});var M=e(48651),u=e.n(M),h=e(38046),m=e.n(h),W=e(81123),I=e(54695),j=e(33421),O=e(9021),C=e(68591),D=e.n(C),F=e(97207),l=e.n(F),a=e(63342),g=["className","columns"];function r(s){return l().size(s)>=16?(0,a.jsx)(O.Z,{title:s,children:(0,W.lS)(s,8,8)}):s}function o(s){var P=s.className,f=s.columns,B=m()(s,g),R=(0,j.l)(function(S){var re=S.token;return{".ant-table-container":{borderStartStartRadius:"0 !important",borderStartEndRadius:"0 !important"},".ant-pro-card-body":{paddingInline:0,paddingBlock:0},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:first-child":{borderStartStartRadius:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:last-child":{borderStartEndRadius:"0 !important"},".ant-pagination-item, .ant-pagination-prev, .ant-pagination-next":{borderRadius:"2px !important",minWidth:"30px !important",height:"30px !important",lineHeight:"28px !important"},".ant-pagination-total-text":{lineHeight:"30px !important",visibility:"hidden"}}}),U=l().sumBy(f,"width");return(0,a.jsx)(I.Z,u()({bordered:!0,columns:f,scroll:{x:U},search:!1,options:!1,rowKey:"key",className:D()(P,"p-6",R)},B))}b.ZP=o},9991:function(le,b,e){e.d(b,{u:function(){return a},z:function(){return l}});var M=e(48651),u=e.n(M),h=e(38046),m=e.n(h),W=e(68591),I=e.n(W),j=e(68717),O=e(31887),C=e(63342),D=["children","className"],F=["busy","type","className","defStyle","children"];function l(g){var r=g.children,o=g.className,s=m()(g,D);return(0,C.jsx)("button",u()(u()({},s),{},{className:I()(o),children:g.children}))}function a(g){var r=g.busy,o=g.type,s=o===void 0?"primary":o,P=g.className,f=g.defStyle,B=f===void 0?"btn-primary":f,R=g.children,U=m()(g,F);return(0,C.jsx)(O.ZP,u()(u()({type:B==="btn-primary-1"?"default":s,className:I()(P,"leading-none !shadow-none",{})},U),{},{children:r?(0,C.jsx)(j.fCD,{className:"animate-spin mx-auto"}):R}))}},95968:function(le,b,e){e.d(b,{u_:function(){return P}});var M=e(48651),u=e.n(M),h=e(86516),m=e.n(h),W=e(38046),I=e.n(W),j=e(97980),O=e(68591),C=e.n(O),D=e(79685),F=e(50374),l=e(22798),a=e(63342),g=["className","title","onClose","outClose","titleClassName","containerClassName","children"],r={current:null};r.current=document.body;function o(f){var B=f.title,R=f.onClose,U=f.titleClassName,S=f.containerClassName;return(0,a.jsxs)("div",{className:C()("flex items-center justify-between pb-6 mb-6 text-xl font-bold border-b mt-2.5 mx-5",S),children:[(0,a.jsx)("span",{className:C()("max-w-[70%] overflow-hidden text-ellipsis whitespace-nowrap",U),children:B}),(0,a.jsx)(l.q5L,{onClick:function(se){se.stopPropagation(),R&&R()},className:"text-2xl cursor-pointer"})]})}function s(){return _jsx("div",{})}function P(f){var B=f.className,R=f.title,U=f.onClose,S=f.outClose,re=S===void 0?!1:S,se=f.titleClassName,he=f.containerClassName,pe=f.children,ce=I()(f,g),n=(0,D.useRef)(null),p=(0,D.useState)(!0),N=m()(p,2),ee=N[0],X=N[1],ae=function(){U&&(X(!0),setTimeout(function(){return U()},300))},Ee=(0,j.R)(function(me){me.stopPropagation();var je=n.current&&n.current!==me.target&&n.current.contains(me.target);!je&&re&&ae()});return(0,D.useEffect)(function(){X(!1)},[]),r.current?(0,F.createPortal)((0,a.jsx)("div",u()(u()({},ce),{},{ref:n,className:C()("fixed left-0  top-0 w-full h-full overflow-auto z-[500] flex justify-center items-center",{"transition-[background_ease_300ms]":!0,"bg-black/0":ee,"bg-black/25":!ee},B),onClick:Ee,children:(0,a.jsxs)("div",{id:"mo",className:C()("bg-white rounded p-5 min-w-[20rem] min-h-[150]",{"transition-[all_ease_300ms]":!0,"scale-0":ee,"scale-100":!ee}),children:[(0,a.jsx)(o,{title:R,containerClassName:he,titleClassName:se,onClose:ae}),pe]})})),r.current):null}},27202:function(le,b,e){e.d(b,{dW:function(){return a},ub:function(){return r}});var M=e(48651),u=e.n(M),h=e(86516),m=e.n(h),W=e(7654),I=e(68591),j=e.n(I),O=e(79685),C=e(30681),D=e(12239),F=e(76852),l=e(63342);function a(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,P=(0,O.useState)(s),f=m()(P,2),B=f[0],R=f[1];return(0,O.useEffect)(function(){R(s)},[o,s]),{onChange:R,items:o,current:B}}function g(o){var s=o.items,P=o.current,f=o.onChange,B=o.className,R=B===void 0?"bg-white text-black px-5 py-3 text-lg rounded-lg w-[31.25rem] mo:w-full mo:text-sm":B,U=o.currentClassName,S=U===void 0?"flex justify-between items-center":U,re=o.openClassName,se=re===void 0?"max-h-[18rem] bg-white  rounded-lg py-3 ":re,he=s[P]?s[P].text:"",pe=(0,D.Z)(!1),ce=m()(pe,2),n=ce[0],p=ce[1],N=(0,O.useCallback)(function(X){P!==X&&f(X)},[P]),ee=(0,W.E)("t-side");return(0,F.Z)(ee,function(){return n&&p(!1)}),s.length===0?null:(0,l.jsxs)("div",{ref:ee,className:j()("relative cursor-pointer",R),onClick:function(){return p()},children:[(0,l.jsxs)("div",{className:S,children:[(0,l.jsx)("span",{className:"truncate",children:he}),n?(0,l.jsx)(C.pzk,{}):(0,l.jsx)(C._i7,{})]}),n&&(0,l.jsx)("div",{className:j()("absolute z-[100] left-0 w-full overflow-x-hidden overflow-y-auto",se),style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:(0,l.jsx)("div",{className:"",children:s.map(function(X,ae){return(0,l.jsx)("div",{style:{},className:j()("w-full break-all px-5 py-2 text-sm hover:bg-gray-16",{"text-green-2":ae===P}),onClick:function(){return N(ae)},children:X.text},"select_item_".concat(ae))})})})]})}var r=function(s){return(0,l.jsx)(g,u()({className:"h-[50px] px-5 items-center bg-stone-50 rounded-lg border border-neutral-200",currentClassName:"h-full flex justify-between items-center"},s))}},8965:function(le,b,e){e.d(b,{H4:function(){return I},Kv:function(){return W},TW:function(){return a},Tz:function(){return O},We:function(){return j},Y5:function(){return F},cc:function(){return D},cu:function(){return g},e0:function(){return l},uU:function(){return C}});var M=e(97207),u=e.n(M),h=e(94437),m=e(54916);function W(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,h.ZP)("/api/product-system/".concat(r,"/detail"),{refreshInterval:o})}function I(r){return(0,h.ZP)(u().isNil(r)?null:"/api/verifyRecord/".concat(r,"/detail"))}function j(r){return(0,h.ZP)(r?"/api/inventory/all":null)}function O(r){return(0,h.ZP)(r?"/api/verifyRecord/verifiers":null)}function C(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,h.ZP)("/api/product-system/list/?pageNum=".concat(r,"&pageSize=10"),{refreshInterval:o})}function D(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,h.ZP)("/api/inventory/list/?pageNum=".concat(r,"&pageSize=10"),{refreshInterval:o})}function F(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,h.ZP)("/api/verifyRecord/list/?pageNum=".concat(r,"&pageSize=10"),{refreshInterval:o})}function l(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(0,h.ZP)("/api/sbt/token/list/?pageNum=".concat(r,"&pageSize=999"))}function a(r){return(0,h.ZP)(r?"/api/sbt/token/uuid/".concat(r):null,{fetcher:m.Gh})}function g(r){return(0,h.ZP)(r?"/api/sbt/token/nft/".concat(r):null,{fetcher:m.Gh})}},97980:function(le,b,e){e.d(b,{R:function(){return u}});var M=e(79685);function u(h){var m=(0,M.useRef)(h);return(0,M.useLayoutEffect)(function(){m.current=h}),(0,M.useCallback)(function(){return m.current&&m.current.apply(m,arguments)},[])}},11187:function(le,b,e){e.r(b),e.d(b,{default:function(){return We}});var M=e(48651),u=e.n(M),h=e(86516),m=e.n(h),W=e(64082),I=e(18842),j=e(9991),O=e(99095),C=e(31196),D=e(8965),F=e(97207),l=e.n(F),a=e(79685),g=e(70300),r=e.n(g),o=e(11e3),s=e(95968),P=e(27202),f=e(22786),B=e.n(f),R=e(46299),U=e.n(R),S=e(54916);function re(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,E=(0,a.useRef)(new AbortController),ne=function(z){var A=z,te=function(){if(A.length!==0){var L=A[0];return A=l().drop(A),{file:L,index:z.length-A.length-1}}},k=l().min([ue,A.length]),Y=l().range(z.length),V=function(){var Q=U()(B()().mark(function L(){var x,$,J,y;return B()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(x=te(),!x){d.next=10;break}return $=x.file,J=x.index,d.next=6,(0,S.qM)($,{signal:E.current.signal});case 6:y=d.sent,Y[J]=y,d.next=11;break;case 10:return d.abrupt("return");case 11:d.next=0;break;case 13:case"end":return d.stop()}},L)}));return function(){return Q.apply(this,arguments)}}();return Promise.all(l().range(k).map(function(){return V()})).then(function(){return Y})};return[ne,function(){try{E.current.abort()}catch(Z){console.info("abort upfiles")}}]}var se=e(81123),he=e(68591),pe=e.n(he),ce=e(98919),n=e(63342),p=function(E){return(0,n.jsxs)("div",{className:"w-full flex flex-col gap-2.5",children:[(0,n.jsxs)("span",{className:"font-normal leading-6 text-[16px]",children:[E.title,"\uFF1A"]}),E.children]})},N=function(E){return(0,n.jsx)("div",{className:"font-normal leading-[21.79px] text-[16px] text-gray-9",children:E.value})},ee=function(E){var ne,Z,z,A,te,k,Y,V=E.closeModal,Q=E.recordId,L=E.type,x=L===void 0?"new":L,$=(0,a.useRef)(null),J=(0,O.oR)(),y=J.userData,de=(0,D.H4)(Q),d=de.isLoading,t=de.data,ie=(0,D.We)(x==="new"||x==="editor"),H=ie.isLoading,G=ie.data,Ce=(0,D.Tz)(x==="new"||x==="editor"),De=Ce.isLoading,v=Ce.data,K=d||H||De,T=(0,a.useMemo)(function(){return[(G||[]).map(function(_){return u()(u()({},_),{},{text:_.loadName})}),l().findIndex(G,function(_){return _.loadNumber===(t==null?void 0:t.loadNumber)})]},[G,t]),w=P.dW.apply(void 0,r()(T)),ge=(0,a.useMemo)(function(){return[(v||[]).map(function(_){return u()(u()({},_),{},{text:_.name})}),l().findIndex(v,function(_){var c;return _.id===(t==null||(c=t.verifyUser)===null||c===void 0?void 0:c.id)})]},[v,t]),q=P.dW.apply(void 0,r()(ge)),Fe=(0,ce.Z)({verifyState:!0}),Me=m()(Fe,2),i=Me[0],_e=Me[1],Ke=re(),Oe=m()(Ke,2),Pe=Oe[0],we=Oe[1];(0,a.useEffect)(function(){return we},[]);var xe=!i.files||i.files.length===0||i.files.length>20||l().findIndex(i.files,function(_){return _.size>=1024*1024*1024*2||_.name.length>=128})>=0,Be=!G||!v||!i.name||w.current<0||q.current<0||xe,ze=(0,a.useState)(!1),Ne=m()(ze,2),oe=Ne[0],ve=Ne[1],Ve=function(){Be||oe||(ve(!0),Pe(i.files).then(function(c){return(0,S._Q)({name:i.name,loadNumber:G[w.current].loadNumber,description:i.desc||"",fileList:c,verifyUserId:v[q.current].id}).then(function(){return V(!0)}).catch(console.error).finally(function(){ve(!1)})}))},Ae=!t||!G||!v||(i.name||t.name)===t.name&&(i.desc||t.description)===t.description&&((ne=G[w.current])===null||ne===void 0?void 0:ne.loadNumber)===t.loadNumber&&((Z=v[q.current])===null||Z===void 0?void 0:Z.id)===t.verifyUserId&&xe,$e=function(){if(!(Ae||oe)){var c;ve(!0),i.files?c=Pe(i.files).then(function(ye){return(0,S.u_)(t.id,{name:i.name||t.name,loadNumber:G[w.current].loadNumber,description:i.desc||t.description,fileList:ye,verifyUserId:v[q.current].id})}):c=(0,S.u_)(t.id,{name:i.name,loadNumber:G[w.current].loadNumber,description:i.desc,verifyUserId:v[q.current].id}),c.then(function(){return V(!0)}).catch(console.error).finally(function(){ve(!1)})}},Ie=!t||xe||!i.functionalUnit||!i.evaluationBoundary||!i.evaluationBasis||!i.evaluationExpireTime,Ze=function(){Ie||!i.files||oe||(ve(!0),Pe(i.files).then(function(c){return(0,S.A6)(t.id,{fileList:c,state:!0,functionalUnit:i.functionalUnit,evaluationBoundary:i.evaluationBoundary,evaluationBasis:i.evaluationBasis,evaluationExpireTime:i.evaluationExpireTime+" 00:00:00"})}).then(function(){return V(!0)}).catch(console.error).finally(function(){ve(!1)}))},ke={directory:"",webkitdirectory:""},fe="w-full shrink-0 px-5 border border-[#DDDDDD]  h-[50px]  bg-[#F8F8F8] rounded-lg",Re=x==="verify",He=(0,a.useMemo)(function(){var _;if(xe||!i.files)return"\u9A8C\u8BC1\u6587\u4EF6";var c=((_=i.files.item(0))===null||_===void 0?void 0:_.webkitRelativePath.split("/")[0])||"\u9A8C\u8BC1\u6587\u4EF6";return(0,se.lS)(c,10,10)},[i.files,xe]),Le=function(){return(0,n.jsx)(p,{title:Re?"\u9A8C\u8BC1\u6587\u6863":"\u9644\u4EF6",children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,n.jsx)("input",u()(u()({},ke),{},{ref:$,type:"file",hidden:!0,onChange:function(ye){return _e({files:ye.target.files})}})),(0,n.jsx)(C.SW,{}),(0,n.jsx)(N,{value:He}),(0,n.jsx)("div",{onClick:function(ye){var be;return!oe&&((be=$.current)===null||be===void 0?void 0:be.click())},className:pe()("flex  rounded-[4px] leading-4 text-[16px] bg-[#F1F1F1] w-[100px] h-[24px]  text-center items-center justify-center ",oe?"cursor-not-allowed":"cursor-pointer"),children:"\u9009\u62E9\u6587\u4EF6\u5939"})]})})};return(0,n.jsx)(a.Fragment,{children:(0,n.jsxs)(s.u_,{className:"rounded-lg",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",title:x==="new"?"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55":"\u7F16\u8F91\u9A8C\u8BC1\u8BB0\u5F55",onClose:function(){return V(!1)},children:[(0,n.jsxs)("div",{className:"flex flex-col py-[1px] gap-5 px-5 w-[640px] min-h-[6.25rem] max-h-mc overflow-y-auto",children:[K&&(0,n.jsx)(o.g,{}),!K&&(0,n.jsx)(n.Fragment,{children:Re?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p,{title:"\u9A8C\u8BC1\u8BB0\u5F55",children:(0,n.jsx)(N,{value:t==null?void 0:t.name})}),(0,n.jsx)(p,{title:"\u9A8C\u8BC1\u8BB0\u5F55ID",children:(0,n.jsx)(N,{value:t==null?void 0:t.id})}),(0,n.jsx)(p,{title:"\u53D1\u8D77\u4EBA",children:(0,n.jsx)(N,{value:t==null||(z=t.createUser)===null||z===void 0?void 0:z.name})}),(0,n.jsx)(p,{title:"\u7EC4\u7EC7\u673A\u6784",children:(0,n.jsx)(N,{value:t==null||(A=t.organization)===null||A===void 0?void 0:A.name})}),(0,n.jsx)(p,{title:"\u63CF\u8FF0",children:(0,n.jsx)(N,{value:t==null?void 0:t.description})}),(0,n.jsx)(p,{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",children:(0,n.jsx)(N,{value:t==null||(te=t.inventory)===null||te===void 0?void 0:te.loadName})}),(0,n.jsx)(p,{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",children:(0,n.jsx)(N,{value:t==null?void 0:t.loadNumber})}),(0,n.jsx)(p,{title:"\u9A8C\u8BC1\u4EBA",children:(0,n.jsx)(N,{value:t==null||(k=t.verifyUser)===null||k===void 0?void 0:k.name})}),Le(),(0,n.jsx)(p,{title:"\u529F\u80FD\u5355\u4F4D",children:(0,n.jsx)("input",{value:i.functionalUnit||(t==null?void 0:t.functionalUnit),onChange:function(c){return _e({functionalUnit:c.target.value})},maxLength:30,className:fe})}),(0,n.jsx)(p,{title:"\u8BC4\u4EF7\u8FB9\u754C",children:(0,n.jsx)("input",{value:i.evaluationBoundary||(t==null?void 0:t.evaluationBoundary),onChange:function(c){return _e({evaluationBoundary:c.target.value})},maxLength:30,className:fe})}),(0,n.jsx)(p,{title:"\u8BC4\u4EF7\u4F9D\u636E",children:(0,n.jsx)("input",{value:i.evaluationBasis||(t==null?void 0:t.evaluationBasis),onChange:function(c){return _e({evaluationBasis:c.target.value})},maxLength:30,className:fe})}),(0,n.jsx)(p,{title:"\u8BC4\u4EF7\u6709\u6548\u671F",children:(0,n.jsx)("input",{value:i.evaluationExpireTime||(t==null?void 0:t.evaluationExpireTime),type:"date",onChange:function(c){console.info("inputTime:",c.target.value),_e({evaluationExpireTime:c.target.value})},maxLength:30,className:fe})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p,{title:"\u9A8C\u8BC1\u8BB0\u5F55",children:(0,n.jsx)("input",{value:i.name||(t==null?void 0:t.name),onChange:function(c){return _e({name:c.target.value})},maxLength:30,className:fe})}),(0,n.jsx)(p,{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",children:(0,n.jsx)(P.ub,u()({},w))}),(0,n.jsx)(p,{title:"\u63CF\u8FF0",children:(0,n.jsx)("input",{value:i.desc||(t==null?void 0:t.description),onChange:function(c){return _e({desc:c.target.value})},maxLength:100,className:fe})}),(0,n.jsx)(p,{title:"\u9009\u62E9\u9A8C\u8BC1\u4EBA",children:(0,n.jsx)(P.ub,u()({},q))}),(0,n.jsx)(p,{title:"\u53D1\u8D77\u4EBA",children:(0,n.jsx)(N,{value:y==null?void 0:y.name})}),(0,n.jsx)(p,{title:"\u7EC4\u7EC7\u673A\u6784",children:(0,n.jsx)(N,{value:y==null||(Y=y.organization)===null||Y===void 0?void 0:Y.name})}),Le()]})})]}),!K&&(0,n.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5 w-full px-5",children:[x==="new"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.u,{defStyle:"btn-primary-1",className:"flex-1",onClick:function(){return V(!1)},children:"\u53D6\u6D88"}),(0,n.jsx)(j.u,{busy:oe,disabled:Be,defStyle:"btn-primary",className:"flex-1",onClick:Ve,children:"\u786E\u5B9A"})]}),x==="editor"&&(0,n.jsx)(j.u,{busy:oe,disabled:Ae,className:"flex-1",onClick:$e,children:"\u63D0\u4EA4\u66F4\u65B0"}),x==="verify"&&(0,n.jsx)(j.u,{busy:oe,disabled:Ie,className:"flex-1",onClick:Ze,children:"\u63D0\u4EA4\u9A8C\u8BC1"})]})]})})},X=ee,ae=e(30905),Ee=e.n(ae),me=e(64470),je=function(E){var ne=E.closeModal,Z=E.fileList,z=(0,a.useState)(!1),A=m()(z,2),te=A[0],k=A[1],Y=(0,O.h3)(),V=function(){var Q=U()(B()().mark(function L(){var x,$,J,y;return B()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return k(!0),d.prev=1,x=new(Ee()),$="",Z.forEach(function(t){$=t.fileName.split("/")[0];var ie=me.default.get(t.downloadUrl,{responseType:"arraybuffer"}).then(function(H){return H.data});x.file(t.fileName,ie)}),d.next=7,x.generateAsync({type:"blob"});case 7:J=d.sent,y=document.createElement("a"),y.href=URL.createObjectURL(J),y.download="".concat($,".zip"),y.click(),URL.revokeObjectURL(y.href),d.next=18;break;case 15:d.prev=15,d.t0=d.catch(1),Y("\u6587\u4EF6\u4E0B\u8F7D\u51FA\u9519\uFF01");case 18:return d.prev=18,k(!1),d.finish(18);case 21:case"end":return d.stop()}},L,null,[[1,15,18,21]])}));return function(){return Q.apply(this,arguments)}}();return(0,n.jsx)(a.Fragment,{children:(0,n.jsxs)(s.u_,{onClose:ne,title:"\u67E5\u770B\u6587\u4EF6\u5939",children:[(0,n.jsx)("div",{className:"px-5 overflow-y-auto  max-h-[260px]",children:Z.map(function(Q,L){var x=Q.fileName.split("/");return(0,n.jsx)("div",{id:"view",className:"w-[640px] h-[34px] flex items-center ",children:(0,n.jsx)("span",{className:"ml-[10px] leading-5 text-[16px] font-normal",children:x[x.length-1]})},"file_".concat(L))})}),(0,n.jsx)("button",{disabled:te,className:"bg-[#29953A] w-full h-[50px] rounded-lg text-[#FFFFFF] mt-5",onClick:V,children:"\u4E0B\u8F7D"})]})})},Te=je;function Ue(){var ue=(0,O.oR)(),E=ue.userData,ne=(0,a.useState)(1),Z=m()(ne,2),z=Z[0],A=Z[1],te=(0,a.useState)(!1),k=m()(te,2),Y=k[0],V=k[1],Q=(0,a.useState)(!1),L=m()(Q,2),x=L[0],$=L[1],J=(0,a.useRef)([]),y=(0,a.useRef)(),de=function(K){J.current=K,$(!0)},d=(0,a.useCallback)(function(v){V(!0),y.current={type:l().isEmpty(v)?"new":(E==null?void 0:E.role)==="verify"?"verify":"editor",recordId:v.id}},[E]),t=(0,a.useMemo)(function(){return[{title:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"name",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"id",width:160,ellipsis:!0},{title:"\u53D1\u8D77\u4EBA",dataIndex:"_createUserName",width:160,ellipsis:!0},{title:"\u7EC4\u7EC7\u673A\u6784",width:160,ellipsis:!0,dataIndex:"_organizationName"},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"_loadName",width:160,ellipsis:!0},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber",width:170,renderText:I.zL},{title:"\u9644\u4EF6",width:160,render:function(K,T){return(0,n.jsxs)("div",{onClick:function(){return de(T.attachmentFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,n.jsx)(C.SW,{}),(0,n.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]})}},{title:"\u6700\u540E\u7F16\u8F91",dataIndex:"updateTime",valueType:"dateTime",width:170},{title:"\u9A8C\u8BC1\u4EBA",dataIndex:"_verifyUserName",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u6587\u6863",width:130,render:function(K,T){return T.verifyFileList.length?(0,n.jsxs)("div",{onClick:function(){return de(T.verifyFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,n.jsx)(C.SW,{}),(0,n.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]}):null}},{title:"\u9A8C\u8BC1\u72B6\u6001",width:130,render:function(K,T){return(0,n.jsx)("span",{className:"",children:T.state?"\u5DF2\u9A8C\u8BC1":""})}},{title:"\u9A8C\u8BC1\u65F6\u95F4",dataIndex:"proofTime",valueType:"dateTime",width:170},{title:"\u64CD\u4F5C",width:120,valueType:"option",render:function(K,T){return T.state?[]:[(0,n.jsx)("div",{className:"flex justify-between flex-1 text-green-2 break-keep",children:(0,n.jsx)("div",{className:"flex items-center font-normal justify-center cursor-pointer leading-[27px]",onClick:function(){return d(T)},children:"\u7F16\u8F91"})},"edit")]}}]},[d]),ie=(0,D.Y5)(z),H=ie.data,G=ie.isLoading,Ce=ie.mutate,De=(0,a.useMemo)(function(){return((H==null?void 0:H.records)||[]).map(function(v,K){var T,w,ge,q;return u()(u()({},v),{},{key:"verify_"+K,_createUserName:(T=v.createUser)===null||T===void 0?void 0:T.name,_organizationName:(w=v.organization)===null||w===void 0?void 0:w.name,_loadName:(ge=v.inventory)===null||ge===void 0?void 0:ge.loadName,_verifyUserName:(q=v.verifyUser)===null||q===void 0?void 0:q.name})})},[H]);return(0,n.jsxs)(W.Z,{title:"\u9A8C\u8BC1\u7BA1\u7406\u5217\u8868",extra:(E==null?void 0:E.role)==="admin"?[(0,n.jsx)(j.u,{onClick:function(){return d({})},children:"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55"},"key_new_verify")]:[],children:[(0,n.jsx)("div",{className:"bg-white",children:(0,n.jsx)(I.ZP,{columns:t,dataSource:De,loading:G,scroll:{x:scrollX},pagination:{pageSize:10,total:(H==null?void 0:H.total)||0,onChange:function(K){A(K)}}})}),Y&&y.current&&(0,n.jsx)(X,{type:y.current.type,recordId:y.current.recordId,closeModal:function(){A(1),z===1&&Ce(),V(!1),y.current=void 0}}),x&&(0,n.jsx)(Te,{fileList:J.current,closeModal:function(){$(!1)}})]})}var Se=Ue,We=Se}}]);

"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2941],{64082:function(ee,b,e){var D=e(48651),d=e.n(D),_=e(38046),o=e.n(_),B=e(30541),M=e(33421),y=e(68591),C=e.n(y),p=e(63342),g=["className"];function L(v){var a=v.className,m=o()(v,g),i=(0,M.l)(function(l){var E=l.token;return{".ant-page-header":{padding:"1rem 1.5rem",paddingBlock:"1rem !important",paddingInline:"1.5rem !important",backgroundColor:E.colorBgBase,".ant-breadcrumb":{fontSize:".875rem",paddingBlockStart:"0 !important"},".ant-page-header-heading-title":{fontSize:"1.25rem"}},".ant-pro-grid-content":{padding:"1.5rem",backgroundColor:"transparent",".ant-pro-page-container-children-content":{padding:0,paddingBlock:"0 !important"},".ant-pro-page-container-children-container":{paddingBlock:"0 !important",paddingInline:"0 !important"}}}});return(0,p.jsx)(B._z,d()({className:C()(a,i)},m))}b.Z=L},18842:function(ee,b,e){e.d(b,{rx:function(){return l},zL:function(){return i}});var D=e(48651),d=e.n(D),_=e(38046),o=e.n(_),B=e(81123),M=e(54695),y=e(33421),C=e(9021),p=e(68591),g=e.n(p),L=e(97207),v=e.n(L),a=e(63342),m=["className","columns"];function i(E){return v().size(E)>=16?(0,a.jsx)(C.Z,{title:E,children:(0,B.lS)(E,8,8)}):E}function l(E){var z=E.className,s=E.columns,A=o()(E,m),f=(0,y.l)(function(Z){var j=Z.token;return{".ant-table-container":{borderStartStartRadius:"0 !important",borderStartEndRadius:"0 !important"},".ant-pro-card-body":{paddingInline:"0 !important",paddingBlock:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:first-child":{borderStartStartRadius:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:last-child":{borderStartEndRadius:"0 !important"},".ant-pagination-item, .ant-pagination-prev, .ant-pagination-next":{borderRadius:"2px !important",minWidth:"30px !important",height:"30px !important",lineHeight:"28px !important"},".ant-pagination-total-text":{lineHeight:"30px !important",visibility:"hidden"}}}),V=v().sumBy(s,"width");return(0,a.jsx)(M.Z,d()({bordered:!0,columns:s,scroll:{x:V},search:!1,options:!1,rowKey:"key",className:g()(z,"p-6",f)},A))}b.ZP=l},46284:function(ee,b,e){var D=e(48651),d=e.n(D),_=e(38046),o=e.n(_),B=e(74589),M=e(79685),y=e(63342),C=["options","data","optionEmptyText","hideIfEmpty"],p=["render","dataIndex","show"],g=B.Z.Item,L=function(a){var m=a.options,i=a.data,l=a.optionEmptyText,E=a.hideIfEmpty,z=o()(a,C);return(0,M.useMemo)(function(){return(0,y.jsx)(B.Z,d()(d()({},z),{},{children:m.map(function(s){var A=s.render,f=s.dataIndex,V=s.show,Z=o()(s,p),j="";if(V!==!1&&(console.log("dadatatadatadata",i[f],f),!(typeof A=="function"&&(j=A(i[f],i),j===!1))&&!(E&&(i[f]===void 0||i[f]===null)&&(typeof A!="function"||j==null||j==="")))){var G=typeof l!="undefined"&&l!==null?l:"";return console.log("emptyTextemptyText",G,j),(0,M.createElement)(g,d()(d()({},Z),{},{key:f}),typeof A=="function"?j||G:typeof i[f]!="undefined"&&i[f]!==null?i[f]:G)}})}))},[a])};b.Z=L},9991:function(ee,b,e){e.d(b,{u:function(){return a},z:function(){return v}});var D=e(48651),d=e.n(D),_=e(38046),o=e.n(_),B=e(68591),M=e.n(B),y=e(68717),C=e(31887),p=e(63342),g=["children","className"],L=["busy","type","className","defStyle","children"];function v(m){var i=m.children,l=m.className,E=o()(m,g);return(0,p.jsx)("button",d()(d()({},E),{},{className:M()(l),children:m.children}))}function a(m){var i=m.busy,l=m.type,E=l===void 0?"primary":l,z=m.className,s=m.defStyle,A=s===void 0?"btn-primary":s,f=m.children,V=o()(m,L);return(0,p.jsx)(C.ZP,d()(d()({type:A==="btn-primary-1"?"default":E,className:M()(z,"leading-none !shadow-none",{})},V),{},{children:i?(0,p.jsx)(y.fCD,{className:"animate-spin mx-auto"}):f}))}},11e3:function(ee,b,e){e.d(b,{I:function(){return L},g:function(){return g}});var D=e(48651),d=e.n(D),_=e(38046),o=e.n(_),B=e(68591),M=e.n(B),y=e(26082),C=e(63342),p=["className","color","size"];function g(v){var a=v.className,m=v.color,i=v.size,l=i===void 0?"":i,E=o()(v,p);return(0,C.jsx)("div",d()(d()({},E),{},{className:M()("text-black w-full h-full flex items-center justify-center",a),children:(0,C.jsx)(y.uur,{color:m,style:l?{fontSize:l}:{},className:"text-[3.125rem] animate-spin"})}))}function L(){return(0,C.jsx)(g,{className:"fixed z-50 left-0 top-0 w-full !h-full bg-black/25"})}},95968:function(ee,b,e){e.d(b,{u_:function(){return z}});var D=e(48651),d=e.n(D),_=e(86516),o=e.n(_),B=e(38046),M=e.n(B),y=e(97980),C=e(68591),p=e.n(C),g=e(79685),L=e(50374),v=e(22798),a=e(63342),m=["className","title","onClose","outClose","titleClassName","containerClassName","chilrenClassName","bottomBtn","children","line"],i={current:null};i.current=document.body;function l(s){var A=s.title,f=s.onClose,V=s.titleClassName,Z=s.containerClassName;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:p()("flex items-center justify-between mt-5 text-xl font-bold mx-5",Z),children:[(0,a.jsx)("div",{className:p()("max-w-[70%] overflow-hidden text-ellipsis whitespace-nowrap",V),children:A}),(0,a.jsx)(v.q5L,{onClick:function(G){G.stopPropagation(),f&&f()},className:"text-2xl cursor-pointer"})]}),(0,a.jsx)("div",{className:"mt-5 border-b "})]})}function E(){return _jsx("div",{})}function z(s){var A=s.className,f=s.title,V=s.onClose,Z=s.outClose,j=Z===void 0?!1:Z,G=s.titleClassName,fe=s.containerClassName,xe=s.chilrenClassName,ye=s.bottomBtn,be=s.children,pe=s.line,De=pe===void 0?!1:pe,t=M()(s,m),ie=(0,g.useRef)(null),Ce=(0,g.useState)(!0),he=o()(Ce,2),oe=he[0],ge=he[1],Ee=function(){V&&(ge(!0),setTimeout(function(){return V()},300))},Pe=(0,y.R)(function(le){le.stopPropagation();var Ne=ie.current&&ie.current!==le.target&&ie.current.contains(le.target);!Ne&&j&&Ee()});return(0,g.useEffect)(function(){ge(!1)},[]),i.current?(0,L.createPortal)((0,a.jsx)("div",d()(d()({},t),{},{ref:ie,className:p()("fixed left-0  top-0 w-full h-full overflow-auto z-[500] flex justify-center items-center",{"transition-[background_ease_300ms]":!0,"bg-black/0":oe,"bg-black/25":!oe},A),onClick:Pe,children:(0,a.jsxs)("div",{id:"mo",className:p()("bg-white rounded min-w-[20rem]  min-h-[150]",{"transition-[all_ease_300ms]":!0,"scale-0":oe,"scale-100":!oe}),children:[(0,a.jsx)(l,{title:f,containerClassName:fe,titleClassName:G,onClose:Ee}),(0,a.jsx)("div",{className:p()("mt-5",xe),children:be}),De&&(0,a.jsx)("div",{className:"p-6 border-t mt-5",children:ye})]})})),i.current):null}},8965:function(ee,b,e){e.d(b,{H4:function(){return M},Kv:function(){return B},TW:function(){return a},Tz:function(){return C},We:function(){return y},Y5:function(){return L},cc:function(){return g},cu:function(){return m},e0:function(){return v},uU:function(){return p}});var D=e(97207),d=e.n(D),_=e(94437),o=e(54916);function B(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,_.ZP)("/api/product-system/".concat(i,"/detail"),{refreshInterval:l})}function M(i){return(0,_.ZP)(d().isNil(i)?null:"/api/verifyRecord/".concat(i,"/detail"))}function y(i){return(0,_.ZP)(i?"/api/inventory/all":null)}function C(i){return(0,_.ZP)(i?"/api/verifyRecord/verifiers":null)}function p(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,_.ZP)("/api/product-system/list/?pageNum=".concat(i,"&pageSize=10"),{refreshInterval:l})}function g(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,_.ZP)("/api/inventory/list/?pageNum=".concat(i,"&pageSize=10"),{refreshInterval:l})}function L(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,_.ZP)("/api/verifyRecord/list/?pageNum=".concat(i,"&pageSize=10"),{refreshInterval:l})}function v(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(0,_.ZP)("/api/sbt/token/list/?pageNum=".concat(i,"&pageSize=999"))}function a(i){return(0,_.ZP)(i?"/api/sbt/token/uuid/".concat(i):null,{fetcher:o.Gh})}function m(i){return(0,_.ZP)(i?"/api/sbt/token/nft/".concat(i):null,{fetcher:o.Gh})}},97980:function(ee,b,e){e.d(b,{R:function(){return d}});var D=e(79685);function d(_){var o=(0,D.useRef)(_);return(0,D.useLayoutEffect)(function(){o.current=_}),(0,D.useCallback)(function(){return o.current&&o.current.apply(o,arguments)},[])}},11187:function(ee,b,e){e.r(b),e.d(b,{default:function(){return We}});var D=e(48651),d=e.n(D),_=e(86516),o=e.n(_),B=e(64082),M=e(18842),y=e(9991),C=e(99095),p=e(4151),g=e(8965),L=e(97207),v=e.n(L),a=e(79685),m=e(46284),i=e(11e3),l=e(95968),E=e(22786),z=e.n(E),s=e(46299),A=e.n(s),f=e(54916);function V(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,P=(0,a.useRef)(new AbortController),X=function(K){var T=K,Y=function(){if(T.length!==0){var W=T[0];return T=v().drop(T),{file:W,index:K.length-T.length-1}}},F=v().min([se,T.length]),ne=v().range(K.length),Q=function(){var O=A()(z()().mark(function W(){var S,U,H,R;return z()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(S=Y(),!S){u.next=10;break}return U=S.file,H=S.index,u.next=6,(0,f.qM)(U,{signal:P.current.signal});case 6:R=u.sent,ne[H]=R,u.next=11;break;case 10:return u.abrupt("return");case 11:u.next=0;break;case 13:case"end":return u.stop()}},W)}));return function(){return O.apply(this,arguments)}}();return Promise.all(v().range(F).map(function(){return Q()})).then(function(){return ne})};return[X,function(){try{P.current.abort()}catch(k){console.info("abort upfiles")}}]}var Z=e(81123),j=e(3826),G=e(51791),fe=e(7698),xe=e(68591),ye=e.n(xe),be=e(50510),pe=e.n(be),De=e(98919),t=e(63342),ie=function(P){return(0,t.jsx)("div",{className:"font-normal leading-[21.79px] text-[16px] text-gray-9",children:P.value})},Ce=function(P){var X,k,K,T,Y,F=P.closeModal,ne=P.recordId,Q=P.type,O=Q===void 0?"new":Q,W=(0,a.useRef)(null),S=(0,C.oR)(),U=S.userData,H=(0,g.H4)(ne),R=H.isLoading,n=H.data,u=(0,g.We)(O==="new"||O==="editor"),te=u.isLoading,J=u.data,w=(0,g.Tz)(O==="new"||O==="editor"),Me=w.isLoading,_e=w.data,me=R||te||Me,N=(0,De.Z)({verifyState:!0,carbonNum:""}),$=o()(N,2),r=$[0],I=$[1],ce=V(),ue=o()(ce,2),je=ue[0],Se=ue[1];(0,a.useEffect)(function(){return Se},[]);var ve=!r.files||r.files.length===0||r.files.length>20||v().findIndex(r.files,function(x){return x.size>=1024*1024*1024*2||x.name.length>=128})>=0,Ie=!J||!_e||!r.name||!r.carbonNum||!r.verifyName||ve,Ke=(0,a.useState)(!1),Be=o()(Ke,2),re=Be[0],de=Be[1],Fe=function(){Ie||re||(de(!0),je(r.files).then(function(h){var c;return(0,f._Q)({name:r.name,loadNumber:r.carbonNum||n.loadNumber,description:r.desc||"",fileList:h,verifyUserId:r.verifyName||(n==null||(c=n.verifyUser)===null||c===void 0?void 0:c.id)}).then(function(){return F(!0)}).catch(console.error).finally(function(){de(!1)})}))},Te=!n||!J||!_e||(r.name||n.name)===n.name&&(r.desc||n.description)===n.description&&r.loadNumber===n.loadNumber&&r.verifyName===n.verifyUserId&&ve,ze=function(){if(!(Te||re)){var h;if(de(!0),r.files)h=je(r.files).then(function(q){var Oe;return(0,f.u_)(n.id,{name:r.name||n.name,loadNumber:r.carbonNum||n.loadNumber,description:r.desc||n.description,fileList:q,verifyUserId:r.verifyName||(n==null||(Oe=n.verifyUser)===null||Oe===void 0?void 0:Oe.id)})});else{var c;h=(0,f.u_)(n.id,{name:r.name,loadNumber:r.carbonNum||n.loadNumber,description:r.desc,verifyUserId:r.verifyName||(n==null||(c=n.verifyUser)===null||c===void 0?void 0:c.id)})}h.then(function(){return F(!0)}).catch(console.error).finally(function(){de(!1)})}},Ue=!n||ve||!r.functionalUnit||!r.evaluationBoundary||!r.evaluationBasis||!r.evaluationExpireTime,Ve=function(){Ue||!r.files||re||(de(!0),je(r.files).then(function(h){return(0,f.A6)(n.id,{fileList:h,state:!0,functionalUnit:r.functionalUnit,evaluationBoundary:r.evaluationBoundary,evaluationBasis:r.evaluationBasis,certificateNumber:r.certificateNumber,evaluationExpireTime:r.evaluationExpireTime+" 00:00:00"})}).then(function(){return F(!0)}).catch(console.error).finally(function(){de(!1)}))},Ze={directory:"",webkitdirectory:""},ae="w-full shrink-0 px-5 border border-[#DDDDDD]  h-[50px]  bg-[#F8F8F8] rounded-lg",Re=O==="verify",we=(0,a.useMemo)(function(){var x;if(ve||!r.files)return"\u9A8C\u8BC1\u6587\u4EF6";var h=((x=r.files.item(0))===null||x===void 0?void 0:x.webkitRelativePath.split("/")[0])||"\u9A8C\u8BC1\u6587\u4EF6";return(0,Z.lS)(h,10,10)},[r.files,ve]),Le={label:Re?"\u9A8C\u8BC1\u6587\u6863":"\u9644\u4EF6",dataIndex:"verifyDoc",render:function(){return(0,t.jsx)(a.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)("input",d()(d()({},Ze),{},{ref:W,type:"file",hidden:!0,onChange:function(c){return I({files:c.target.files})}})),(0,t.jsx)(p.SW,{}),(0,t.jsx)(ie,{value:we}),(0,t.jsx)("div",{onClick:function(c){var q;return!re&&((q=W.current)===null||q===void 0?void 0:q.click())},className:ye()("flex  rounded-[4px] leading-4 text-[16px] bg-[#F1F1F1] w-[100px] h-[24px]  text-center items-center justify-center ",re?"cursor-not-allowed":"cursor-pointer"),children:"\u9009\u62E9\u6587\u4EF6\u5939"})]})})}},$e={verifyName:n==null?void 0:n.name,verifyId:n==null?void 0:n.id,createUser:n==null||(X=n.createUser)===null||X===void 0?void 0:X.name,organizationName:n==null||(k=n.organization)===null||k===void 0?void 0:k.name,description:n==null?void 0:n.description,loadName:n==null||(K=n.inventory)===null||K===void 0?void 0:K.loadName,loadNumber:n==null?void 0:n.loadNumber,verifyUser:n==null||(T=n.verifyUser)===null||T===void 0?void 0:T.name,verifyDoc:"",functionalUnit:r.functionalUnit||(n==null?void 0:n.functionalUnit),evaluationBoundary:r.evaluationBoundary||(n==null?void 0:n.evaluationBoundary),evaluationBasis:r.evaluationBasis||(n==null?void 0:n.evaluationBasis),evaluationExpireTime:r.evaluationExpireTime||(n==null?void 0:n.evaluationExpireTime)},ke={verifyRecord:n==null?void 0:n.name,carbonNum:n==null?void 0:n.loadNumber,description:r.desc||(n==null?void 0:n.description),verifyName:"verifyName",createName:U==null?void 0:U.name,organizationName:U==null||(Y=U.organization)===null||Y===void 0?void 0:Y.name},He=[{label:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"verifyName"},{label:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"verifyId"},{label:"\u53D1\u8D77\u4EBA",dataIndex:"createUser"},{label:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"organizationName"},{label:"\u63CF\u8FF0",dataIndex:"description"},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"loadName"},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber"},{label:"\u9A8C\u8BC1\u4EBA",dataIndex:"verifyUser"},Le,{label:"\u529F\u80FD\u5355\u4F4D",dataIndex:"functionalUnit",render:function(){return(0,t.jsx)(j.Z,{value:r.functionalUnit||(n==null?void 0:n.functionalUnit),onChange:function(c){return I({functionalUnit:c.target.value})},maxLength:30,className:ae})}},{label:"\u8BC1\u4E66\u7F16\u53F7",dataIndex:"certificateNumber",render:function(){return(0,t.jsx)(j.Z,{value:r.certificateNumber||(n==null?void 0:n.certificateNumber),onChange:function(c){return I({certificateNumber:c.target.value})},maxLength:30,className:ae})}},{label:"\u8BC4\u4EF7\u8FB9\u754C",dataIndex:"evaluationBoundary",render:function(){return(0,t.jsx)(j.Z,{value:r.evaluationBoundary||(n==null?void 0:n.evaluationBoundary),onChange:function(c){return I({evaluationBoundary:c.target.value})},maxLength:30,className:ae})}},{label:"\u8BC4\u4EF7\u4F9D\u636E",dataIndex:"evaluationBasis",render:function(){return(0,t.jsx)(j.Z,{value:r.evaluationBasis||(n==null?void 0:n.evaluationBasis),onChange:function(c){return I({evaluationBasis:c.target.value})},maxLength:30,className:ae})}},{label:"\u8BC4\u4EF7\u6709\u6548\u671F",dataIndex:"evaluationExpireTime",render:function(){return(0,t.jsx)(G.default,{defaultValue:r.evaluationExpireTime||(n==null?void 0:n.evaluationExpireTime)&&pe()(r.evaluationExpireTime||(n==null?void 0:n.evaluationExpireTime)),onChange:function(c,q){I({evaluationExpireTime:q})},className:ae})}}],Ge=[{label:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"verifyRecord",render:function(){return(0,t.jsx)(j.Z,{value:r.name||(n==null?void 0:n.name),onChange:function(c){return I({name:c.target.value})},maxLength:30,className:ae})}},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"carbonNum",render:function(){return(0,t.jsx)(fe.default,{value:r.carbonNum||(n==null?void 0:n.loadNumber),style:{height:"50px",borderColor:"#DDDDDD",backgroundColor:"#F8F8F8",width:"100%"},onChange:function(c){return I({carbonNum:c})},options:(0,Z.ry)("loadName","loadNumber",J)})}},{label:"\u63CF\u8FF0",dataIndex:"description",render:function(){return(0,t.jsx)(j.Z,{value:r.desc||(n==null?void 0:n.description),onChange:function(c){return I({desc:c.target.value})},maxLength:100,className:ae})}},{label:"\u9009\u62E9\u9A8C\u8BC1\u4EBA",dataIndex:"verifyName",render:function(){var h;return(0,t.jsx)(fe.default,{value:r.verifyName||(n==null||(h=n.verifyUser)===null||h===void 0?void 0:h.id),style:{height:"50px",borderColor:"#DDDDDD",backgroundColor:"#F8F8F8",width:"100%"},onChange:function(q){return I({verifyName:q})},options:(0,Z.ry)("name","id",_e)})}},{label:"\u53D1\u8D77\u4EBA",dataIndex:"createName"},{label:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"organizationName"},Le];return(0,t.jsx)(a.Fragment,{children:(0,t.jsx)(l.u_,{className:"rounded-lg",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",title:O==="new"?"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55":"\u7F16\u8F91\u9A8C\u8BC1\u8BB0\u5F55",line:!0,bottomBtn:!me&&(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5  w-full ",children:[O==="new"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.u,{size:"large",defStyle:"btn-primary-1",className:"flex-1",onClick:function(){return F(!1)},children:"\u53D6\u6D88"}),(0,t.jsx)(y.u,{size:"large",busy:re,disabled:Ie,defStyle:"btn-primary",className:"flex-1",onClick:Fe,children:"\u786E\u5B9A"})]}),O==="editor"&&(0,t.jsx)(y.u,{busy:re,size:"large",disabled:Te,className:"flex-1",onClick:ze,children:"\u63D0\u4EA4\u66F4\u65B0"}),O==="verify"&&(0,t.jsx)(y.u,{busy:re,size:"large",disabled:Ue,className:"flex-1",onClick:Ve,children:"\u63D0\u4EA4\u9A8C\u8BC1"})]}),onClose:function(){return F(!1)},children:(0,t.jsxs)("div",{className:"flex flex-col py-[1px] gap-5 px-5 w-[640px] min-h-[6.25rem] max-h-mc overflow-y-auto",children:[me&&(0,t.jsx)(i.g,{}),!me&&(0,t.jsx)(t.Fragment,{children:Re?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(m.Z,{options:He,data:$e,optionEmptyText:"-",layout:"vertical",column:1,contentStyle:{color:"#999999",fontWeight:"400",fontSize:"16px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"16px"}})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(m.Z,{options:Ge,data:ke,optionEmptyText:"-",layout:"vertical",column:1,contentStyle:{color:"#999999",fontWeight:"400",fontSize:"16px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"16px"}})})})]})})})},he=Ce,oe=e(30905),ge=e.n(oe),Ee=e(64470),Pe=function(P){var X=P.closeModal,k=P.fileList,K=(0,a.useState)(!1),T=o()(K,2),Y=T[0],F=T[1],ne=(0,C.h3)(),Q=function(){var O=A()(z()().mark(function W(){var S,U,H,R;return z()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return F(!0),u.prev=1,S=new(ge()),U="",k.forEach(function(te){U=te.fileName.split("/")[0];var J=Ee.default.get(te.downloadUrl,{responseType:"arraybuffer"}).then(function(w){return w.data});S.file(te.fileName,J)}),u.next=7,S.generateAsync({type:"blob"});case 7:H=u.sent,R=document.createElement("a"),R.href=URL.createObjectURL(H),R.download="".concat(U,".zip"),R.click(),URL.revokeObjectURL(R.href),u.next=18;break;case 15:u.prev=15,u.t0=u.catch(1),ne("\u6587\u4EF6\u4E0B\u8F7D\u51FA\u9519\uFF01");case 18:return u.prev=18,F(!1),u.finish(18);case 21:case"end":return u.stop()}},W,null,[[1,15,18,21]])}));return function(){return O.apply(this,arguments)}}();return(0,t.jsx)(a.Fragment,{children:(0,t.jsx)(l.u_,{onClose:X,title:"\u67E5\u770B\u6587\u4EF6\u5939",line:!0,bottomBtn:(0,t.jsx)(y.u,{size:"large",disabled:Y,className:"bg-[#29953A] w-full h-[50px] rounded-lg text-[#FFFFFF] ",onClick:Q,children:"\u4E0B\u8F7D"}),children:(0,t.jsx)("div",{className:"px-5 overflow-y-auto  max-h-[260px]",children:k.map(function(O,W){var S=O.fileName.split("/");return(0,t.jsx)("div",{id:"view",className:"w-[640px] h-[34px] flex items-center ",children:(0,t.jsx)("span",{className:"ml-[10px] leading-5 text-[16px] font-normal",children:S[S.length-1]})},"file_".concat(W))})})})})},le=Pe;function Ne(){var se=(0,C.oR)(),P=se.userData,X=(0,a.useState)(1),k=o()(X,2),K=k[0],T=k[1],Y=(0,a.useState)(!1),F=o()(Y,2),ne=F[0],Q=F[1],O=(0,a.useState)(!1),W=o()(O,2),S=W[0],U=W[1],H=(0,a.useRef)([]),R=(0,a.useRef)(),n=function($){H.current=$,U(!0)},u=(0,a.useCallback)(function(N){Q(!0),R.current={type:v().isEmpty(N)?"new":(P==null?void 0:P.role)==="verify"?"verify":"editor",recordId:N.id}},[P]),te=(0,a.useMemo)(function(){return[{title:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"name",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"id",width:160,ellipsis:!0},{title:"\u53D1\u8D77\u4EBA",dataIndex:"_createUserName",width:160,ellipsis:!0},{title:"\u7EC4\u7EC7\u673A\u6784",width:160,ellipsis:!0,dataIndex:"_organizationName"},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"_loadName",width:160,ellipsis:!0},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber",width:170,renderText:M.zL},{title:"\u9644\u4EF6",width:160,render:function($,r){return(0,t.jsxs)("div",{onClick:function(){return n(r.attachmentFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,t.jsx)(p.SW,{width:"14"}),(0,t.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]})}},{title:"\u6700\u540E\u7F16\u8F91",dataIndex:"updateTime",valueType:"dateTime",width:170},{title:"\u9A8C\u8BC1\u4EBA",dataIndex:"_verifyUserName",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u6587\u6863",width:130,render:function($,r){return r.verifyFileList.length?(0,t.jsxs)("div",{onClick:function(){return n(r.verifyFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,t.jsx)(p.SW,{width:"14"}),(0,t.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]}):null}},{title:"\u9A8C\u8BC1\u72B6\u6001",width:130,render:function($,r){return(0,t.jsx)("span",{className:"",children:r.state?"\u5DF2\u9A8C\u8BC1":""})}},{title:"\u9A8C\u8BC1\u65F6\u95F4",dataIndex:"proofTime",valueType:"dateTime",width:170},{title:"\u64CD\u4F5C",width:120,valueType:"option",render:function($,r){return r.state?[]:[(0,t.jsx)("div",{className:"flex justify-between flex-1 text-green-2 break-keep",children:(0,t.jsx)("div",{className:"flex items-center font-normal justify-center cursor-pointer leading-[27px]",onClick:function(){return u(r)},children:"\u7F16\u8F91"})},"edit")]}}]},[u]),J=(0,g.Y5)(K),w=J.data,Me=J.isLoading,_e=J.mutate,me=(0,a.useMemo)(function(){return((w==null?void 0:w.records)||[]).map(function(N,$){var r,I,ce,ue;return d()(d()({},N),{},{key:"verify_"+$,_createUserName:(r=N.createUser)===null||r===void 0?void 0:r.name,_organizationName:(I=N.organization)===null||I===void 0?void 0:I.name,_loadName:(ce=N.inventory)===null||ce===void 0?void 0:ce.loadName,_verifyUserName:(ue=N.verifyUser)===null||ue===void 0?void 0:ue.name})})},[w]);return(0,t.jsxs)(B.Z,{title:"\u9A8C\u8BC1\u7BA1\u7406\u5217\u8868",extra:(P==null?void 0:P.role)==="admin"?[(0,t.jsx)(y.u,{onClick:function(){return u({})},children:"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55"},"key_new_verify")]:[],children:[(0,t.jsx)("div",{className:"bg-white",children:(0,t.jsx)(M.ZP,{columns:te,dataSource:me,loading:Me,scroll:{x:scrollX},pagination:{pageSize:10,total:(w==null?void 0:w.total)||0,current:K,onChange:function($){T($)}}})}),ne&&R.current&&(0,t.jsx)(he,{type:R.current.type,recordId:R.current.recordId,closeModal:function(){T(1),K===1&&_e(),Q(!1),R.current=void 0}}),S&&(0,t.jsx)(le,{fileList:H.current,closeModal:function(){U(!1)}})]})}var Ae=Ne,We=Ae}}]);

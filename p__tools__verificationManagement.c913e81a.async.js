"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2941],{64082:function(ee,y,e){var b=e(48651),u=e.n(b),d=e(38046),i=e.n(d),I=e(30541),j=e(33421),D=e(68591),P=e.n(D),p=e(63342),E=["className"];function L(c){var o=c.className,_=i()(c,E),a=(0,j.l)(function(l){var g=l.token;return{".ant-page-header":{padding:"1rem 1.5rem",paddingBlock:"1rem !important",paddingInline:"1.5rem !important",backgroundColor:g.colorBgBase,".ant-breadcrumb":{fontSize:".875rem",paddingBlockStart:"0 !important"},".ant-page-header-heading-title":{fontSize:"1.25rem"}},".ant-pro-grid-content":{padding:"1.5rem",backgroundColor:"transparent",".ant-pro-page-container-children-content":{padding:0,paddingBlock:"0 !important"},".ant-pro-page-container-children-container":{paddingBlock:"0 !important",paddingInline:"0 !important"}}}});return(0,p.jsx)(I._z,u()({className:P()(o,a)},_))}y.Z=L},18842:function(ee,y,e){e.d(y,{rx:function(){return l},zL:function(){return a}});var b=e(48651),u=e.n(b),d=e(38046),i=e.n(d),I=e(81123),j=e(54695),D=e(33421),P=e(9021),p=e(68591),E=e.n(p),L=e(97207),c=e.n(L),o=e(63342),_=["className","columns"];function a(g){return c().size(g)>=16?(0,o.jsx)(P.Z,{title:g,children:(0,I.lS)(g,8,8)}):g}function l(g){var z=g.className,m=g.columns,A=i()(g,_),v=(0,D.l)(function(Z){var O=Z.token;return{".ant-table-container":{borderStartStartRadius:"0 !important",borderStartEndRadius:"0 !important"},".ant-pro-card-body":{paddingInline:"0 !important",paddingBlock:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:first-child":{borderStartStartRadius:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:last-child":{borderStartEndRadius:"0 !important"},".ant-pagination-item, .ant-pagination-prev, .ant-pagination-next":{borderRadius:"2px !important",minWidth:"30px !important",height:"30px !important",lineHeight:"28px !important"},".ant-pagination-total-text":{lineHeight:"30px !important",visibility:"hidden"}}}),V=c().sumBy(m,"width");return(0,o.jsx)(j.Z,u()({bordered:!0,columns:m,scroll:{x:V},search:!1,options:!1,rowKey:"key",className:E()(z,"p-6",v)},A))}y.ZP=l},46284:function(ee,y,e){var b=e(48651),u=e.n(b),d=e(38046),i=e.n(d),I=e(74589),j=e(79685),D=e(63342),P=["options","data","optionEmptyText","hideIfEmpty"],p=["render","dataIndex","show"],E=I.Z.Item,L=function(o){var _=o.options,a=o.data,l=o.optionEmptyText,g=o.hideIfEmpty,z=i()(o,P);return(0,j.useMemo)(function(){return(0,D.jsx)(I.Z,u()(u()({},z),{},{children:_.map(function(m){var A=m.render,v=m.dataIndex,V=m.show,Z=i()(m,p),O="";if(V!==!1&&(console.log("dadatatadatadata",a[v],v),!(typeof A=="function"&&(O=A(a[v],a),O===!1))&&!(g&&(a[v]===void 0||a[v]===null)&&(typeof A!="function"||O==null||O==="")))){var G=typeof l!="undefined"&&l!==null?l:"";return console.log("emptyTextemptyText",G,O),(0,j.createElement)(E,u()(u()({},Z),{},{key:v}),typeof A=="function"?O||G:typeof a[v]!="undefined"&&a[v]!==null?a[v]:G)}})}))},[o])};y.Z=L},9991:function(ee,y,e){e.d(y,{u:function(){return o},z:function(){return c}});var b=e(48651),u=e.n(b),d=e(38046),i=e.n(d),I=e(68591),j=e.n(I),D=e(68717),P=e(31887),p=e(63342),E=["children","className"],L=["busy","type","className","defStyle","children"];function c(_){var a=_.children,l=_.className,g=i()(_,E);return(0,p.jsx)("button",u()(u()({},g),{},{className:j()(l),children:_.children}))}function o(_){var a=_.busy,l=_.type,g=l===void 0?"primary":l,z=_.className,m=_.defStyle,A=m===void 0?"btn-primary":m,v=_.children,V=i()(_,L);return(0,p.jsx)(P.ZP,u()(u()({type:A==="btn-primary-1"?"default":g,className:j()(z,"leading-none !shadow-none",{})},V),{},{children:a?(0,p.jsx)(D.fCD,{className:"animate-spin mx-auto"}):v}))}},11e3:function(ee,y,e){e.d(y,{I:function(){return L},g:function(){return E}});var b=e(48651),u=e.n(b),d=e(38046),i=e.n(d),I=e(68591),j=e.n(I),D=e(26082),P=e(63342),p=["className","color","size"];function E(c){var o=c.className,_=c.color,a=c.size,l=a===void 0?"":a,g=i()(c,p);return(0,P.jsx)("div",u()(u()({},g),{},{className:j()("text-black w-full h-full flex items-center justify-center",o),children:(0,P.jsx)(D.uur,{color:_,style:l?{fontSize:l}:{},className:"text-[3.125rem] animate-spin"})}))}function L(){return(0,P.jsx)(E,{className:"fixed z-50 left-0 top-0 w-full !h-full bg-black/25"})}},95968:function(ee,y,e){e.d(y,{u_:function(){return z}});var b=e(48651),u=e.n(b),d=e(86516),i=e.n(d),I=e(38046),j=e.n(I),D=e(97980),P=e(68591),p=e.n(P),E=e(79685),L=e(50374),c=e(22798),o=e(63342),_=["className","title","onClose","outClose","titleClassName","containerClassName","children"],a={current:null};a.current=document.body;function l(m){var A=m.title,v=m.onClose,V=m.titleClassName,Z=m.containerClassName;return(0,o.jsxs)("div",{className:p()("flex items-center justify-between pb-6 mb-6 text-xl font-bold border-b mt-2.5 mx-5",Z),children:[(0,o.jsx)("span",{className:p()("max-w-[70%] overflow-hidden text-ellipsis whitespace-nowrap",V),children:A}),(0,o.jsx)(c.q5L,{onClick:function(G){G.stopPropagation(),v&&v()},className:"text-2xl cursor-pointer"})]})}function g(){return _jsx("div",{})}function z(m){var A=m.className,v=m.title,V=m.onClose,Z=m.outClose,O=Z===void 0?!1:Z,G=m.titleClassName,ve=m.containerClassName,Ee=m.children,ge=j()(m,_),ae=(0,E.useRef)(null),xe=(0,E.useState)(!0),fe=i()(xe,2),t=fe[0],pe=fe[1],he=function(){V&&(pe(!0),setTimeout(function(){return V()},300))},ye=(0,D.R)(function(oe){oe.stopPropagation();var be=ae.current&&ae.current!==oe.target&&ae.current.contains(oe.target);!be&&O&&he()});return(0,E.useEffect)(function(){pe(!1)},[]),a.current?(0,L.createPortal)((0,o.jsx)("div",u()(u()({},ge),{},{ref:ae,className:p()("fixed left-0  top-0 w-full h-full overflow-auto z-[500] flex justify-center items-center",{"transition-[background_ease_300ms]":!0,"bg-black/0":t,"bg-black/25":!t},A),onClick:ye,children:(0,o.jsxs)("div",{id:"mo",className:p()("bg-white rounded p-5 min-w-[20rem] min-h-[150]",{"transition-[all_ease_300ms]":!0,"scale-0":t,"scale-100":!t}),children:[(0,o.jsx)(l,{title:v,containerClassName:ve,titleClassName:G,onClose:he}),Ee]})})),a.current):null}},8965:function(ee,y,e){e.d(y,{H4:function(){return j},Kv:function(){return I},TW:function(){return o},Tz:function(){return P},We:function(){return D},Y5:function(){return L},cc:function(){return E},cu:function(){return _},e0:function(){return c},uU:function(){return p}});var b=e(97207),u=e.n(b),d=e(94437),i=e(54916);function I(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,d.ZP)("/api/product-system/".concat(a,"/detail"),{refreshInterval:l})}function j(a){return(0,d.ZP)(u().isNil(a)?null:"/api/verifyRecord/".concat(a,"/detail"))}function D(a){return(0,d.ZP)(a?"/api/inventory/all":null)}function P(a){return(0,d.ZP)(a?"/api/verifyRecord/verifiers":null)}function p(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,d.ZP)("/api/product-system/list/?pageNum=".concat(a,"&pageSize=10"),{refreshInterval:l})}function E(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,d.ZP)("/api/inventory/list/?pageNum=".concat(a,"&pageSize=10"),{refreshInterval:l})}function L(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,d.ZP)("/api/verifyRecord/list/?pageNum=".concat(a,"&pageSize=10"),{refreshInterval:l})}function c(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(0,d.ZP)("/api/sbt/token/list/?pageNum=".concat(a,"&pageSize=999"))}function o(a){return(0,d.ZP)(a?"/api/sbt/token/uuid/".concat(a):null,{fetcher:i.Gh})}function _(a){return(0,d.ZP)(a?"/api/sbt/token/nft/".concat(a):null,{fetcher:i.Gh})}},97980:function(ee,y,e){e.d(y,{R:function(){return u}});var b=e(79685);function u(d){var i=(0,b.useRef)(d);return(0,b.useLayoutEffect)(function(){i.current=d}),(0,b.useCallback)(function(){return i.current&&i.current.apply(i,arguments)},[])}},11187:function(ee,y,e){e.r(y),e.d(y,{default:function(){return We}});var b=e(48651),u=e.n(b),d=e(86516),i=e.n(d),I=e(64082),j=e(18842),D=e(9991),P=e(99095),p=e(4151),E=e(8965),L=e(97207),c=e.n(L),o=e(79685),_=e(46284),a=e(11e3),l=e(95968),g=e(22786),z=e.n(g),m=e(46299),A=e.n(m),v=e(54916);function V(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,C=(0,o.useRef)(new AbortController),X=function(K){var T=K,Y=function(){if(T.length!==0){var W=T[0];return T=c().drop(T),{file:W,index:K.length-T.length-1}}},F=c().min([ie,T.length]),ne=c().range(K.length),Q=function(){var N=A()(z()().mark(function W(){var S,U,H,R;return z()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(S=Y(),!S){s.next=10;break}return U=S.file,H=S.index,s.next=6,(0,v.qM)(U,{signal:C.current.signal});case 6:R=s.sent,ne[H]=R,s.next=11;break;case 10:return s.abrupt("return");case 11:s.next=0;break;case 13:case"end":return s.stop()}},W)}));return function(){return N.apply(this,arguments)}}();return Promise.all(c().range(F).map(function(){return Q()})).then(function(){return ne})};return[X,function(){try{C.current.abort()}catch(k){console.info("abort upfiles")}}]}var Z=e(81123),O=e(3826),G=e(51791),ve=e(7698),Ee=e(68591),ge=e.n(Ee),ae=e(50510),xe=e.n(ae),fe=e(98919),t=e(63342),pe=function(C){return(0,t.jsx)("div",{className:"font-normal leading-[21.79px] text-[16px] text-gray-9",children:C.value})},he=function(C){var X,k,K,T,Y,F=C.closeModal,ne=C.recordId,Q=C.type,N=Q===void 0?"new":Q,W=(0,o.useRef)(null),S=(0,P.oR)(),U=S.userData,H=(0,E.H4)(ne),R=H.isLoading,n=H.data,s=(0,E.We)(N==="new"||N==="editor"),te=s.isLoading,J=s.data,w=(0,E.Tz)(N==="new"||N==="editor"),De=w.isLoading,de=w.data,_e=R||te||De,M=(0,fe.Z)({verifyState:!0,carbonNum:""}),$=i()(M,2),r=$[0],B=$[1],me=V(),le=i()(me,2),Pe=le[0],Se=le[1];(0,o.useEffect)(function(){return Se},[]);var ce=!r.files||r.files.length===0||r.files.length>20||c().findIndex(r.files,function(x){return x.size>=1024*1024*1024*2||x.name.length>=128})>=0,Me=!J||!de||!r.name||!r.carbonNum||!r.verifyName||ce,Ke=(0,o.useState)(!1),je=i()(Ke,2),re=je[0],se=je[1],Fe=function(){Me||re||(se(!0),Pe(r.files).then(function(h){var f;return(0,v._Q)({name:r.name,loadNumber:r.carbonNum||n.loadNumber,description:r.desc||"",fileList:h,verifyUserId:r.verifyName||(n==null||(f=n.verifyUser)===null||f===void 0?void 0:f.id)}).then(function(){return F(!0)}).catch(console.error).finally(function(){se(!1)})}))},Ne=!n||!J||!de||(r.name||n.name)===n.name&&(r.desc||n.description)===n.description&&r.loadNumber===n.loadNumber&&r.verifyName===n.verifyUserId&&ce,ze=function(){if(!(Ne||re)){var h;if(se(!0),r.files)h=Pe(r.files).then(function(q){var Ce;return(0,v.u_)(n.id,{name:r.name||n.name,loadNumber:r.carbonNum||n.loadNumber,description:r.desc||n.description,fileList:q,verifyUserId:r.verifyName||(n==null||(Ce=n.verifyUser)===null||Ce===void 0?void 0:Ce.id)})});else{var f;h=(0,v.u_)(n.id,{name:r.name,loadNumber:r.carbonNum||n.loadNumber,description:r.desc,verifyUserId:r.verifyName||(n==null||(f=n.verifyUser)===null||f===void 0?void 0:f.id)})}h.then(function(){return F(!0)}).catch(console.error).finally(function(){se(!1)})}},Oe=!n||ce||!r.functionalUnit||!r.evaluationBoundary||!r.evaluationBasis||!r.evaluationExpireTime,Ve=function(){Oe||!r.files||re||(se(!0),Pe(r.files).then(function(h){return(0,v.A6)(n.id,{fileList:h,state:!0,functionalUnit:r.functionalUnit,evaluationBoundary:r.evaluationBoundary,evaluationBasis:r.evaluationBasis,evaluationExpireTime:r.evaluationExpireTime+" 00:00:00"})}).then(function(){return F(!0)}).catch(console.error).finally(function(){se(!1)}))},Ze={directory:"",webkitdirectory:""},ue="w-full shrink-0 px-5 border border-[#DDDDDD]  h-[50px]  bg-[#F8F8F8] rounded-lg",Ie=N==="verify",we=(0,o.useMemo)(function(){var x;if(ce||!r.files)return"\u9A8C\u8BC1\u6587\u4EF6";var h=((x=r.files.item(0))===null||x===void 0?void 0:x.webkitRelativePath.split("/")[0])||"\u9A8C\u8BC1\u6587\u4EF6";return(0,Z.lS)(h,10,10)},[r.files,ce]),Te={label:Ie?"\u9A8C\u8BC1\u6587\u6863":"\u9644\u4EF6",dataIndex:"verifyDoc",render:function(){return(0,t.jsx)(o.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)("input",u()(u()({},Ze),{},{ref:W,type:"file",hidden:!0,onChange:function(f){return B({files:f.target.files})}})),(0,t.jsx)(p.SW,{}),(0,t.jsx)(pe,{value:we}),(0,t.jsx)("div",{onClick:function(f){var q;return!re&&((q=W.current)===null||q===void 0?void 0:q.click())},className:ge()("flex  rounded-[4px] leading-4 text-[16px] bg-[#F1F1F1] w-[100px] h-[24px]  text-center items-center justify-center ",re?"cursor-not-allowed":"cursor-pointer"),children:"\u9009\u62E9\u6587\u4EF6\u5939"})]})})}},$e={verifyName:n==null?void 0:n.name,verifyId:n==null?void 0:n.id,createUser:n==null||(X=n.createUser)===null||X===void 0?void 0:X.name,organizationName:n==null||(k=n.organization)===null||k===void 0?void 0:k.name,description:n==null?void 0:n.description,loadName:n==null||(K=n.inventory)===null||K===void 0?void 0:K.loadName,loadNumber:n==null?void 0:n.loadNumber,verifyUser:n==null||(T=n.verifyUser)===null||T===void 0?void 0:T.name,verifyDoc:"",functionalUnit:r.functionalUnit||(n==null?void 0:n.functionalUnit),evaluationBoundary:r.evaluationBoundary||(n==null?void 0:n.evaluationBoundary),evaluationBasis:r.evaluationBasis||(n==null?void 0:n.evaluationBasis),evaluationExpireTime:r.evaluationExpireTime||(n==null?void 0:n.evaluationExpireTime)},ke={verifyRecord:n==null?void 0:n.name,carbonNum:n==null?void 0:n.loadNumber,description:r.desc||(n==null?void 0:n.description),verifyName:"verifyName",createName:U==null?void 0:U.name,organizationName:U==null||(Y=U.organization)===null||Y===void 0?void 0:Y.name},He=[{label:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"verifyName"},{label:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"verifyId"},{label:"\u53D1\u8D77\u4EBA",dataIndex:"createUser"},{label:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"organizationName"},{label:"\u63CF\u8FF0",dataIndex:"description"},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"loadName"},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber"},{label:"\u9A8C\u8BC1\u4EBA",dataIndex:"verifyUser"},Te,{label:"\u529F\u80FD\u5355\u4F4D",dataIndex:"functionalUnit",render:function(){return(0,t.jsx)(O.Z,{value:r.functionalUnit||(n==null?void 0:n.functionalUnit),onChange:function(f){return B({functionalUnit:f.target.value})},maxLength:30,className:ue})}},{label:"\u8BC4\u4EF7\u8FB9\u754C",dataIndex:"evaluationBoundary",render:function(){return(0,t.jsx)(O.Z,{value:r.evaluationBoundary||(n==null?void 0:n.evaluationBoundary),onChange:function(f){return B({evaluationBoundary:f.target.value})},maxLength:30,className:ue})}},{label:"\u8BC4\u4EF7\u4F9D\u636E",dataIndex:"evaluationBasis",render:function(){return(0,t.jsx)(O.Z,{value:r.evaluationBasis||(n==null?void 0:n.evaluationBasis),onChange:function(f){return B({evaluationBasis:f.target.value})},maxLength:30,className:ue})}},{label:"\u8BC4\u4EF7\u6709\u6548\u671F",dataIndex:"evaluationExpireTime",render:function(){return(0,t.jsx)(G.default,{defaultValue:r.evaluationExpireTime||(n==null?void 0:n.evaluationExpireTime)&&xe()(r.evaluationExpireTime||(n==null?void 0:n.evaluationExpireTime)),onChange:function(f,q){B({evaluationExpireTime:q})},className:ue})}}],Ge=[{label:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"verifyRecord",render:function(){return(0,t.jsx)(O.Z,{value:r.name||(n==null?void 0:n.name),onChange:function(f){return B({name:f.target.value})},maxLength:30,className:ue})}},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"carbonNum",render:function(){return(0,t.jsx)(ve.default,{value:r.carbonNum||(n==null?void 0:n.loadNumber),style:{height:"50px",borderColor:"#DDDDDD",backgroundColor:"#F8F8F8",width:"100%"},onChange:function(f){return B({carbonNum:f})},options:(0,Z.ry)("loadName","loadNumber",J)})}},{label:"\u63CF\u8FF0",dataIndex:"description",render:function(){return(0,t.jsx)(O.Z,{value:r.desc||(n==null?void 0:n.description),onChange:function(f){return B({desc:f.target.value})},maxLength:100,className:ue})}},{label:"\u9009\u62E9\u9A8C\u8BC1\u4EBA",dataIndex:"verifyName",render:function(){var h;return(0,t.jsx)(ve.default,{value:r.verifyName||(n==null||(h=n.verifyUser)===null||h===void 0?void 0:h.id),style:{height:"50px",borderColor:"#DDDDDD",backgroundColor:"#F8F8F8",width:"100%"},onChange:function(q){return B({verifyName:q})},options:(0,Z.ry)("name","id",de)})}},{label:"\u53D1\u8D77\u4EBA",dataIndex:"createName"},{label:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"organizationName"},Te];return(0,t.jsx)(o.Fragment,{children:(0,t.jsxs)(l.u_,{className:"rounded-lg",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",title:N==="new"?"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55":"\u7F16\u8F91\u9A8C\u8BC1\u8BB0\u5F55",onClose:function(){return F(!1)},children:[(0,t.jsxs)("div",{className:"flex flex-col py-[1px] gap-5 px-5 w-[640px] min-h-[6.25rem] max-h-mc overflow-y-auto",children:[_e&&(0,t.jsx)(a.g,{}),!_e&&(0,t.jsx)(t.Fragment,{children:Ie?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(_.Z,{options:He,data:$e,optionEmptyText:"-",layout:"vertical",column:1,contentStyle:{color:"#999999",fontWeight:"400",fontSize:"16px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"16px"}})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(_.Z,{options:Ge,data:ke,optionEmptyText:"-",layout:"vertical",column:1,contentStyle:{color:"#999999",fontWeight:"400",fontSize:"16px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"16px"}})})})]}),!_e&&(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5 w-full px-5",children:[N==="new"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.u,{defStyle:"btn-primary-1",className:"flex-1",onClick:function(){return F(!1)},children:"\u53D6\u6D88"}),(0,t.jsx)(D.u,{busy:re,disabled:Me,defStyle:"btn-primary",className:"flex-1",onClick:Fe,children:"\u786E\u5B9A"})]}),N==="editor"&&(0,t.jsx)(D.u,{busy:re,disabled:Ne,className:"flex-1",onClick:ze,children:"\u63D0\u4EA4\u66F4\u65B0"}),N==="verify"&&(0,t.jsx)(D.u,{busy:re,disabled:Oe,className:"flex-1",onClick:Ve,children:"\u63D0\u4EA4\u9A8C\u8BC1"})]})]})})},ye=he,oe=e(30905),be=e.n(oe),Ue=e(64470),Re=function(C){var X=C.closeModal,k=C.fileList,K=(0,o.useState)(!1),T=i()(K,2),Y=T[0],F=T[1],ne=(0,P.h3)(),Q=function(){var N=A()(z()().mark(function W(){var S,U,H,R;return z()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return F(!0),s.prev=1,S=new(be()),U="",k.forEach(function(te){U=te.fileName.split("/")[0];var J=Ue.default.get(te.downloadUrl,{responseType:"arraybuffer"}).then(function(w){return w.data});S.file(te.fileName,J)}),s.next=7,S.generateAsync({type:"blob"});case 7:H=s.sent,R=document.createElement("a"),R.href=URL.createObjectURL(H),R.download="".concat(U,".zip"),R.click(),URL.revokeObjectURL(R.href),s.next=18;break;case 15:s.prev=15,s.t0=s.catch(1),ne("\u6587\u4EF6\u4E0B\u8F7D\u51FA\u9519\uFF01");case 18:return s.prev=18,F(!1),s.finish(18);case 21:case"end":return s.stop()}},W,null,[[1,15,18,21]])}));return function(){return N.apply(this,arguments)}}();return(0,t.jsx)(o.Fragment,{children:(0,t.jsxs)(l.u_,{onClose:X,title:"\u67E5\u770B\u6587\u4EF6\u5939",children:[(0,t.jsx)("div",{className:"px-5 overflow-y-auto  max-h-[260px]",children:k.map(function(N,W){var S=N.fileName.split("/");return(0,t.jsx)("div",{id:"view",className:"w-[640px] h-[34px] flex items-center ",children:(0,t.jsx)("span",{className:"ml-[10px] leading-5 text-[16px] font-normal",children:S[S.length-1]})},"file_".concat(W))})}),(0,t.jsx)("button",{disabled:Y,className:"bg-[#29953A] w-full h-[50px] rounded-lg text-[#FFFFFF] mt-5",onClick:Q,children:"\u4E0B\u8F7D"})]})})},Be=Re;function Le(){var ie=(0,P.oR)(),C=ie.userData,X=(0,o.useState)(1),k=i()(X,2),K=k[0],T=k[1],Y=(0,o.useState)(!1),F=i()(Y,2),ne=F[0],Q=F[1],N=(0,o.useState)(!1),W=i()(N,2),S=W[0],U=W[1],H=(0,o.useRef)([]),R=(0,o.useRef)(),n=function($){H.current=$,U(!0)},s=(0,o.useCallback)(function(M){Q(!0),R.current={type:c().isEmpty(M)?"new":(C==null?void 0:C.role)==="verify"?"verify":"editor",recordId:M.id}},[C]),te=(0,o.useMemo)(function(){return[{title:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"name",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"id",width:160,ellipsis:!0},{title:"\u53D1\u8D77\u4EBA",dataIndex:"_createUserName",width:160,ellipsis:!0},{title:"\u7EC4\u7EC7\u673A\u6784",width:160,ellipsis:!0,dataIndex:"_organizationName"},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"_loadName",width:160,ellipsis:!0},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber",width:170,renderText:j.zL},{title:"\u9644\u4EF6",width:160,render:function($,r){return(0,t.jsxs)("div",{onClick:function(){return n(r.attachmentFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,t.jsx)(p.SW,{width:"14"}),(0,t.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]})}},{title:"\u6700\u540E\u7F16\u8F91",dataIndex:"updateTime",valueType:"dateTime",width:170},{title:"\u9A8C\u8BC1\u4EBA",dataIndex:"_verifyUserName",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u6587\u6863",width:130,render:function($,r){return r.verifyFileList.length?(0,t.jsxs)("div",{onClick:function(){return n(r.verifyFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,t.jsx)(p.SW,{width:"14"}),(0,t.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]}):null}},{title:"\u9A8C\u8BC1\u72B6\u6001",width:130,render:function($,r){return(0,t.jsx)("span",{className:"",children:r.state?"\u5DF2\u9A8C\u8BC1":""})}},{title:"\u9A8C\u8BC1\u65F6\u95F4",dataIndex:"proofTime",valueType:"dateTime",width:170},{title:"\u64CD\u4F5C",width:120,valueType:"option",render:function($,r){return r.state?[]:[(0,t.jsx)("div",{className:"flex justify-between flex-1 text-green-2 break-keep",children:(0,t.jsx)("div",{className:"flex items-center font-normal justify-center cursor-pointer leading-[27px]",onClick:function(){return s(r)},children:"\u7F16\u8F91"})},"edit")]}}]},[s]),J=(0,E.Y5)(K),w=J.data,De=J.isLoading,de=J.mutate,_e=(0,o.useMemo)(function(){return((w==null?void 0:w.records)||[]).map(function(M,$){var r,B,me,le;return u()(u()({},M),{},{key:"verify_"+$,_createUserName:(r=M.createUser)===null||r===void 0?void 0:r.name,_organizationName:(B=M.organization)===null||B===void 0?void 0:B.name,_loadName:(me=M.inventory)===null||me===void 0?void 0:me.loadName,_verifyUserName:(le=M.verifyUser)===null||le===void 0?void 0:le.name})})},[w]);return(0,t.jsxs)(I.Z,{title:"\u9A8C\u8BC1\u7BA1\u7406\u5217\u8868",extra:(C==null?void 0:C.role)==="admin"?[(0,t.jsx)(D.u,{onClick:function(){return s({})},children:"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55"},"key_new_verify")]:[],children:[(0,t.jsx)("div",{className:"bg-white",children:(0,t.jsx)(j.ZP,{columns:te,dataSource:_e,loading:De,scroll:{x:scrollX},pagination:{pageSize:10,total:(w==null?void 0:w.total)||0,current:K,onChange:function($){T($)}}})}),ne&&R.current&&(0,t.jsx)(ye,{type:R.current.type,recordId:R.current.recordId,closeModal:function(){T(1),K===1&&de(),Q(!1),R.current=void 0}}),S&&(0,t.jsx)(Be,{fileList:H.current,closeModal:function(){U(!1)}})]})}var Ae=Le,We=Ae}}]);

"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9725],{27202:function(Ne,ne,e){e.d(ne,{dW:function(){return X},ub:function(){return ve}});var se=e(48651),l=e.n(se),ue=e(86516),i=e.n(ue),ie=e(7654),b=e(68591),J=e.n(b),Q=e(79685),j=e(30681),de=e(12239),ce=e(76852),f=e(63342);function X(a){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=(0,Q.useState)(v),O=i()(N,2),F=O[0],P=O[1];return(0,Q.useEffect)(function(){P(v)},[a,v]),{onChange:P,items:a,current:F}}function me(a){var v=a.items,N=a.current,O=a.onChange,F=a.className,P=F===void 0?"bg-white text-black px-5 py-3 text-lg rounded-lg w-[31.25rem] mo:w-full mo:text-sm":F,Y=a.currentClassName,re=Y===void 0?"flex justify-between items-center":Y,w=a.openClassName,fe=w===void 0?"max-h-[18rem] bg-white  rounded-lg py-3 ":w,t=v[N]?v[N].text:"",xe=(0,de.Z)(!1),le=i()(xe,2),k=le[0],oe=le[1],pe=(0,Q.useCallback)(function(I){N!==I&&O(I)},[N]),S=(0,ie.E)("t-side");return(0,ce.Z)(S,function(){return k&&oe(!1)}),v.length===0?null:(0,f.jsxs)("div",{ref:S,className:J()("relative cursor-pointer",P),onClick:function(){return oe()},children:[(0,f.jsxs)("div",{className:re,children:[(0,f.jsx)("span",{className:"truncate",children:t}),k?(0,f.jsx)(j.pzk,{}):(0,f.jsx)(j._i7,{})]}),k&&(0,f.jsx)("div",{className:J()("absolute z-[100] left-0 w-full overflow-x-hidden overflow-y-auto",fe),style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:(0,f.jsx)("div",{className:"",children:v.map(function(I,q){return(0,f.jsx)("div",{style:{},className:J()("w-full break-all px-5 py-2 text-sm hover:bg-gray-16",{"text-green-2":q===N}),onClick:function(){return pe(q)},children:I.text},"select_item_".concat(q))})})})]})}var ve=function(v){return(0,f.jsx)(me,l()({className:"h-[50px] px-5 items-center bg-stone-50 rounded-lg border border-neutral-200",currentClassName:"h-full flex justify-between items-center"},v))}},75631:function(Ne,ne,e){e.r(ne),e.d(ne,{default:function(){return _e}});var se=e(48651),l=e.n(se),ue=e(86516),i=e.n(ue),ie=e(5677),b=e.n(ie),J=e(64082),Q=e(18842),j=e(9991),de=e(59864),ce=e(8965),f=e(76222),X=e(12564),me=e(68591),ve=e.n(me),a=e(79685),v=e(22786),N=e.n(v),O=e(46299),F=e.n(O),P=e(95968),Y=e(27202),re=e(24220),w=e(54916),fe=e(35259),t=e(63342),xe=function(d){var c=d.onOpenModal,_=d.realData,m=d.tableData,x=d.realArr,W=(0,a.useState)(m),A=i()(W,2),U=A[0],K=A[1],V=(0,re.N)(),L=V.formatDate,$=function(){for(var n,r=(n=document)===null||n===void 0?void 0:n.getElementById("realDataTable"),z=r.getElementsByTagName("tr"),B=[],y=0;y<z.length;y++){for(var Z=[],u=z[y].getElementsByTagName("input"),o=0;o<u.length;o++){var s=u[o].value;Z.push(s)}B.push(Z)}var h=[];h=m==null?void 0:m.map(function(M,E){var he={processId:M.context["@id"],paramValue:B.slice(1)[E][0]||M.value.toString(),paramName:M.name,dateTime:L(Date.now())};return he});var R={lcaParamList:h};typeof c=="function"&&c(),typeof _=="function"&&_(R)};(0,a.useEffect)(function(){var p=m==null?void 0:m.map(function(n,r){return x!=null&&x.length&&x[r].paramName===n.name?l()(l()({},n),{},{inputValue:x[r].paramValue}):l()({},n)});K(p)},[x,m]);var te=[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:"9rem",render:function(n){return(0,t.jsx)("div",{className:" flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:n})}},{title:"\u8FC7\u7A0B\u540D\u79F0",dataIndex:"name",width:"7rem",render:function(n,r){return(0,t.jsx)("div",{className:"flex items-center  h-[33px] font-normal leading-[21px] text-[14px] ",children:r.context.name})}},{title:"\u53C2\u8003\u503C",width:"10rem",dataIndex:"value",render:function(n){return(0,t.jsx)("div",{className:"flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:n})}},{title:"\u586B\u5165\u503C",width:"10rem",dataIndex:"createTime",render:function(n,r){return(0,t.jsx)("input",{defaultValue:r.inputValue,type:"number",className:"font-normal  leading-[21px] text-[14px] w-[10rem] h-[33px] "})}}];return(0,t.jsxs)(P.u_,{title:"\u5B9E\u666F\u6570\u636E\u586B\u62A5",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",onClose:typeof c=="function"&&c||void 0,children:[(0,t.jsx)("div",{className:" mx-5 w-[640px] max-h-[400px] overflow-y-auto ",children:(0,t.jsx)(fe.i,{columns:te,tableId:"realDataTable",data:U||[],isSetBorder:!0,maxHeight:"calc(100vh - 260px)",headerClassName:{background:"#DDDDDD",position:"sticky",top:"-1px",fontWeight:"700",fontSize:"18px",lineHeight:"30px",height:"50px"}})}),(0,t.jsx)("div",{className:"mx-5 ",children:(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5",children:[(0,t.jsx)(j.u,{onClick:typeof c=="function"&&c||void 0,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"\u53D6\u6D88"}),(0,t.jsx)(j.u,{className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:$,children:"\u786E\u5B9A"})]})})]})},le=xe,k={loadName:"",productId:""},oe=function(d){var c,_=d.openResultModal,m=d.getList,x=(0,a.useState)(!1),W=i()(x,2),A=W[0],U=W[1],K=(0,a.useState)([{name:"",id:""}]),V=i()(K,2),L=V[0],$=V[1],te=(0,a.useState)({lcaParamList:[]}),p=i()(te,2),n=p[0],r=p[1],z=(0,a.useState)([]),B=i()(z,2),y=B[0],Z=B[1],u=(0,a.useState)(k),o=i()(u,2),s=o[0],h=o[1],R=(0,a.useMemo)(function(){return L.map(function(C){return l()(l()({},C),{},{text:C.name})})},[L]),M=(0,Y.dW)(R,-1),E=(c=M.items[M.current])===null||c===void 0?void 0:c.id,he=(0,a.useState)(!0),De=i()(he,2),ye=De[0],Ce=De[1],Se=(0,re.N)(),Ee=Se.formatDate,je=function(){(0,w.ev)().then(function(g){$(g||{name:"",id:""}),Ce(!1)}).catch(function(g){}).finally()},Ie=function(){var g,G=s.loadName;if(!(!G||!E)){var T=y==null?void 0:y.map(function(ae){return{processId:ae.context["@id"],paramValue:ae.value.toString(),paramName:ae.name,dateTime:Ee(Date.now())}}),H=(g=n.lcaParamList)!==null&&g!==void 0&&g.length?n:{lcaParamList:T.length?T:void 0},D=l()(l()({},H),{},{loadName:G,productId:E});(0,w.E)(D).then(function(ae){typeof m=="function"&&m()}).catch(function(ae){}).finally(function(){typeof _=="function"&&_()})}};(0,a.useEffect)(function(){je()},[]);var Me=function(){E&&U(!0)},Te=function(g){var G=g.target,T=G.name,H=G.value;h(function(D){return l()(l()({},D),{},b()({},T,H))})},be=function(){var C=F()(N()().mark(function g(){return N()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:(0,w.NF)(E).then(function(H){var D=JSON.parse(H.paramDetail)[0]||[];Z(JSON.stringify(D)==="{}"||!(D!=null&&D.parameters)?[]:D==null?void 0:D.parameters)}).catch(function(H){}).finally();case 1:case"end":return T.stop()}},g)}));return function(){return C.apply(this,arguments)}}();return(0,a.useEffect)(function(){E&&be()},[E]),ye?null:(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(P.u_,{className:"rounded-lg",containerClassName:"mx-5 w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",title:"\u65B0\u5EFA\u78B3\u8DB3\u8FF9\u7ED3\u679C",onClose:_,children:(0,t.jsxs)("div",{className:"mx-5 w-[640px] ",children:[(0,t.jsx)("span",{className:"font-normal leading-6 ",children:"\u78B3\u8DB3\u8FF9\u6279\u6B21\uFF1A"}),(0,t.jsx)("input",{value:s.loadName,onChange:Te,id:"loadName",name:"loadName",maxLength:30,className:"w-full mb-[20px] mt-[10px] px-5 border border-[#DDDDDD]  h-[50px]  bg-[#F8F8F8] rounded-lg"}),(0,t.jsx)("div",{className:"font-normal leading-6  mb-[10px]",children:"\u4EA7\u54C1\u7CFB\u7EDF\uFF1A"}),(0,t.jsx)(Y.ub,l()(l()({},M),{},{openClassName:"max-h-[9rem] bg-white  rounded-lg py-3 "})),(0,t.jsx)("div",{className:"mt-5 font-normal leading-6",children:"\u5B9E\u666F\u6570\u636E\u586B\u62A5\uFF1A"}),(0,t.jsx)("div",{onClick:function(){return Me()},className:" flex cursor-pointer rounded-[4px] leading-4 text-[16px] mt-[10px] bg-[#F1F1F1] w-[84px] h-[24px]  text-center items-center justify-center ",children:"\u524D\u5F80\u586B\u5199"}),(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5",children:[(0,t.jsx)(j.u,{onClick:_,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"\u53D6\u6D88"}),(0,t.jsx)(j.u,{className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:Ie,disabled:!E||!s.loadName,children:"\u8BA1\u7B97\u78B3\u7ED3\u679C"})]})]})}),A&&(0,t.jsx)(le,{realData:r,tableData:y,realArr:n.lcaParamList,onOpenModal:function(){return U(!1)}})]})},pe=oe,S,I=(S={},b()(S,-1,{color:"text-[red]",text:"\u8BA1\u7B97\u5931\u8D25"}),b()(S,0,{color:"text-[#FF9800]",text:"\u7B49\u5F85\u8BA1\u7B97"}),b()(S,1,{color:"text-green-2",text:"\u67E5\u770B\u7ED3\u679C"}),b()(S,2,{color:"text-blue-600",text:"\u6B63\u5728\u8BA1\u7B97"}),S);function q(){var ee=(0,a.useState)(1),d=i()(ee,2),c=d[0],_=d[1],m=(0,a.useState)(!1),x=i()(m,2),W=x[0],A=x[1],U=(0,a.useState)(!1),K=i()(U,2),V=K[0],L=K[1],$=(0,a.useRef)({inputData:"",data:""}),te=function(o){var s=o.param,h=o.paramDetail;$.current={inputData:s,data:h},L(!0)},p=(0,a.useMemo)(function(){return[{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"loadName",width:180,ellipsis:!0},{title:"\u5B9E\u666F\u6570\u636E",valueType:"option",width:120,render:function(o,s){return[(0,t.jsx)("div",{className:"flex justify-center whitespace-nowrap px-2.5 bg-[#F1F1F1] rounded",onClick:function(){return te(s)},children:(0,t.jsx)("span",{className:"cursor-pointer",children:"\u67E5\u770B\u5B9E\u666F\u6570\u636E"})},"key_look_real")]}},{title:"\u6279\u6B21\u7ED3\u679CID",dataIndex:"loadNumber",width:128,ellipsis:!0},{title:"\u4EA7\u54C1\u7CFB\u7EDF\u540D\u79F0",width:128,dataIndex:"productName",ellipsis:!0},{title:"\u7CFB\u7EDF\u4EA7\u54C1ID",width:128,dataIndex:"productUuid",ellipsis:!0},{title:"\u63CF\u8FF0",dataIndex:"productDescription",width:300,ellipsis:!0},{title:"\u64CD\u4F5C\u4EBA",dataIndex:"operator",width:100,ellipsis:!0},{title:"\u751F\u6210\u65F6\u95F4",dataIndex:"calculateSuccessTime",valueType:"dateTime",width:180},{title:"\u78B3\u8DB3\u8FF9\u7ED3\u679C",dataIndex:"state",width:130,render:function(o,s){var h,R;return(0,t.jsx)("div",{className:ve()({"cursor-pointer":s.state===1},(h=I[s.state])===null||h===void 0?void 0:h.color),onClick:function(){s.state===1&&X.history.push("/main/tools/inventory/result?id=".concat(s.loadNumber))},children:(R=I[s.state])===null||R===void 0?void 0:R.text})}},{title:"\u7EC4\u7EC7\u540D\u79F0",dataIndex:"orgName",width:130,ellipsis:!0},{title:"\u7EC4\u7EC7\u7F16\u53F7",dataIndex:"orgSerialNumber",width:130,ellipsis:!0}]},[]),n=(0,ce.cc)(c,1e4),r=n.data,z=n.isLoading,B=n.mutate,y=(0,a.useMemo)(function(){return((r==null?void 0:r.records)||[]).map(function(u,o){return l()(l()({},u),{},{key:"key_inventory_"+o})})},[r]),Z=(0,f.b)();return(0,t.jsxs)(J.Z,{title:"\u6211\u7684\u4EA7\u54C1\u78B3\u8DB3\u8FF9\u7ED3\u679C",extra:Z?[(0,t.jsx)(j.u,{onClick:function(){return A(!0)},children:"\u65B0\u5EFA\u78B3\u8DB3\u8FF9\u7ED3\u679C"},"new_inventory")]:[],children:[(0,t.jsx)("div",{className:"bg-white",children:(0,t.jsx)(Q.Z,{columns:p,dataSource:y,loading:z,pagination:{pageSize:10,total:(r==null?void 0:r.total)||0,onChange:function(o){_(o)}}})}),W&&(0,t.jsx)(pe,{openResultModal:function(){return A(!1)},getList:function(){_(1),c===1&&B()}}),V&&(0,t.jsx)(de.d,l()(l()({},$.current),{},{onClose:function(){return L(!1)}}))]})}var ge=q,_e=function(){var ee=(0,X.useLocation)(),d=ee.pathname;return console.info("inventoryPage:",d),d!=="/main/tools/inventory"?(0,t.jsx)(X.Outlet,{}):(0,t.jsx)(ge,{})}}}]);

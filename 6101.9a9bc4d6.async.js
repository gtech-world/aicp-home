"use strict";var X=Object.defineProperty;var U=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var j=(_,c,n)=>c in _?X(_,c,{enumerable:!0,configurable:!0,writable:!0,value:n}):_[c]=n,A=(_,c)=>{for(var n in c||(c={}))Z.call(c,n)&&j(_,n,c[n]);if(U)for(var n of U(c))q.call(c,n)&&j(_,n,c[n]);return _};var z=(_,c,n)=>new Promise((m,u)=>{var L=b=>{try{M(n.next(b))}catch(k){u(k)}},e=b=>{try{M(n.throw(b))}catch(k){u(k)}},M=b=>b.done?m(b.value):Promise.resolve(b.value).then(L,e);M((n=n.apply(_,c)).next())});(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6101],{56101:function(_,c,n){n.r(c),n.d(c,{diagram:function(){return Q}});var m=n(2362),u=n(52015),L=n(42521),e=n(27846),M=n(92157),b=n(74637),k=n(91088),tt=n(65165),et=n(87892),lt=n(39185);const w=a=>e.e.sanitizeText(a,(0,e.c)());let P={dividerMargin:10,padding:5,textHeight:10,curve:void 0};const Y=function(a,s,v,i){const t=Object.keys(a);e.l.info("keys:",t),e.l.info(a),t.forEach(function(d){var f;var o,y;const l=a[d],p={shape:"rect",id:l.id,domId:l.domId,labelText:w(l.id),labelStyle:"",style:"fill: none; stroke: black",padding:(f=(o=(0,e.c)().flowchart)==null?void 0:o.padding)!=null?f:(y=(0,e.c)().class)==null?void 0:y.padding};s.setNode(l.id,p),I(l.classes,s,v,i,l.id),e.l.info("setNode",p)})},I=function(a,s,v,i,t){const d=Object.keys(a);e.l.info("keys:",d),e.l.info(a),d.filter(o=>a[o].parent==t).forEach(function(o){var D,E;var y,l;const r=a[o],p=r.cssClasses.join(" "),f={labelStyle:"",style:""},T=(D=r.label)!=null?D:r.id,h=0,x="class_box",g={labelStyle:f.labelStyle,shape:x,labelText:w(T),classData:r,rx:h,ry:h,class:p,style:f.style,id:r.id,domId:r.domId,tooltip:i.db.getTooltip(r.id,t)||"",haveCallback:r.haveCallback,link:r.link,width:r.type==="group"?500:void 0,type:r.type,padding:(E=(y=(0,e.c)().flowchart)==null?void 0:y.padding)!=null?E:(l=(0,e.c)().class)==null?void 0:l.padding};s.setNode(r.id,g),t&&s.setParent(r.id,t),e.l.info("setNode",g)})},$=function(a,s,v,i){e.l.info(a),a.forEach(function(t,d){var E;var o,y;const l=t,r="",p={labelStyle:"",style:""},f=l.text,T=0,h="note",x={labelStyle:p.labelStyle,shape:h,labelText:w(f),noteData:l,rx:T,ry:T,class:r,style:p.style,id:l.id,domId:l.id,tooltip:"",type:"note",padding:(E=(o=(0,e.c)().flowchart)==null?void 0:o.padding)!=null?E:(y=(0,e.c)().class)==null?void 0:y.padding};if(s.setNode(l.id,x),e.l.info("setNode",x),!l.class||!(l.class in i))return;const g=v+d,D={id:`edgeNote${g}`,classes:"relation",pattern:"dotted",arrowhead:"none",startLabelRight:"",endLabelLeft:"",arrowTypeStart:"none",arrowTypeEnd:"none",style:"fill:none",labelStyle:"",curve:(0,e.o)(P.curve,u.c_6)};s.setEdge(l.id,l.class,D,g)})},G=function(a,s){const v=(0,e.c)().flowchart;let i=0;a.forEach(function(t){var y;var d;i++;const o={classes:"relation",pattern:t.relation.lineType==1?"dashed":"solid",id:"id"+i,arrowhead:t.type==="arrow_open"?"none":"normal",startLabelRight:t.relationTitle1==="none"?"":t.relationTitle1,endLabelLeft:t.relationTitle2==="none"?"":t.relationTitle2,arrowTypeStart:O(t.relation.type1),arrowTypeEnd:O(t.relation.type2),style:"fill:none",labelStyle:"",curve:(0,e.o)(v==null?void 0:v.curve,u.c_6)};if(e.l.info(o,t),t.style!==void 0){const l=(0,e.k)(t.style);o.style=l.style,o.labelStyle=l.labelStyle}t.text=t.title,t.text===void 0?t.style!==void 0&&(o.arrowheadStyle="fill: #333"):(o.arrowheadStyle="fill: #333",o.labelpos="c",((y=(d=(0,e.c)().flowchart)==null?void 0:d.htmlLabels)!=null?y:(0,e.c)().htmlLabels)?(o.labelType="html",o.label='<span class="edgeLabel">'+t.text+"</span>"):(o.labelType="text",o.label=t.text.replace(e.e.lineBreakRegex,`
`),t.style===void 0&&(o.style=o.style||"stroke: #333; stroke-width: 1.5px;fill:none"),o.labelStyle=o.labelStyle.replace("color:","fill:"))),s.setEdge(t.id1,t.id2,o,i)})},H=function(a){P=A(A({},P),a)},F=function(a,s,v,i){return z(this,null,function*(){var E,R,B,N;e.l.info("Drawing class - ",s);const t=(E=(0,e.c)().flowchart)!=null?E:(0,e.c)().class,d=(0,e.c)().securityLevel;e.l.info("config:",t);const o=(R=t==null?void 0:t.nodeSpacing)!=null?R:50,y=(B=t==null?void 0:t.rankSpacing)!=null?B:50,l=new L.k({multigraph:!0,compound:!0}).setGraph({rankdir:i.db.getDirection(),nodesep:o,ranksep:y,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),r=i.db.getNamespaces(),p=i.db.getClasses(),f=i.db.getRelations(),T=i.db.getNotes();e.l.info(f),Y(r,l,s,i),I(p,l,s,i),G(f,l),$(T,l,f.length+1,p);let h;d==="sandbox"&&(h=(0,u.Ys)("#i"+s));const x=d==="sandbox"?(0,u.Ys)(h.nodes()[0].contentDocument.body):(0,u.Ys)("body"),g=x.select(`[id="${s}"]`),D=x.select("#"+s+" g");if(yield(0,M.r)(D,l,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",s),e.u.insertTitle(g,"classTitleText",(N=t==null?void 0:t.titleTopMargin)!=null?N:5,i.db.getDiagramTitle()),(0,e.p)(l,g,t==null?void 0:t.diagramPadding,t==null?void 0:t.useMaxWidth),!(t!=null&&t.htmlLabels)){const W=d==="sandbox"?h.nodes()[0].contentDocument:document,V=W.querySelectorAll('[id="'+s+'"] .edgeLabel .label');for(const C of V){const K=C.getBBox(),S=W.createElementNS("http://www.w3.org/2000/svg","rect");S.setAttribute("rx",0),S.setAttribute("ry",0),S.setAttribute("width",K.width),S.setAttribute("height",K.height),C.insertBefore(S,C.firstChild)}}})};function O(a){let s;switch(a){case 0:s="aggregation";break;case 1:s="extension";break;case 2:s="composition";break;case 3:s="dependency";break;case 4:s="lollipop";break;default:s="none"}return s}const J={setConf:H,draw:F},Q={parser:m.p,db:m.d,renderer:J,styles:m.s,init:a=>{a.class||(a.class={}),a.class.arrowMarkerAbsolute=a.arrowMarkerAbsolute,m.d.clear()}}}}]);

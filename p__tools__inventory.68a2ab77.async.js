"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9725],{27202:function(Ne,ae,e){e.d(ae,{dW:function(){return X},ub:function(){return ne}});var ie=e(48651),r=e.n(ie),de=e(86516),i=e.n(de),ce=e(7654),b=e(68591),H=e.n(b),J=e(79685),M=e(30681),me=e(12239),ve=e(76852),h=e(63342);function X(v){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=(0,J.useState)(f),O=i()(a,2),P=O[0],F=O[1];return(0,J.useEffect)(function(){F(f)},[v,f]),{onChange:F,items:v,current:P}}function fe(v){var f=v.items,a=v.current,O=v.onChange,P=v.className,F=P===void 0?"bg-white text-black px-5 py-3 text-lg rounded-lg w-[31.25rem] mo:w-full mo:text-sm":P,re=v.currentClassName,le=re===void 0?"flex justify-between items-center":re,Q=v.openClassName,oe=Q===void 0?"max-h-[18rem] bg-white  rounded-lg py-3 ":Q,Y=f[a]?f[a].text:"",xe=(0,me.Z)(!1),t=i()(xe,2),k=t[0],se=t[1],pe=(0,J.useCallback)(function(A){a!==A&&O(A)},[a]),ue=(0,ce.E)("t-side");return(0,ve.Z)(ue,function(){return k&&se(!1)}),f.length===0?null:(0,h.jsxs)("div",{ref:ue,className:H()("relative cursor-pointer",F),onClick:function(){return se()},children:[(0,h.jsxs)("div",{className:le,children:[(0,h.jsx)("span",{className:"truncate",children:Y}),k?(0,h.jsx)(M.pzk,{}):(0,h.jsx)(M._i7,{})]}),k&&(0,h.jsx)("div",{className:H()("absolute z-[100] left-0 w-full overflow-x-hidden overflow-y-auto",oe),style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:(0,h.jsx)("div",{className:"",children:f.map(function(A,C){return(0,h.jsx)("div",{style:{},className:H()("w-full break-all px-5 py-2 text-sm hover:bg-gray-16",{"text-green-2":C===a}),onClick:function(){return pe(C)},children:A.text},"select_item_".concat(C))})})})]})}var ne=function(f){return(0,h.jsx)(fe,r()({className:"h-[50px] px-5 items-center bg-stone-50 rounded-lg border border-neutral-200",currentClassName:"h-full flex justify-between items-center"},f))}},75631:function(Ne,ae,e){e.r(ae),e.d(ae,{default:function(){return Se}});var ie=e(48651),r=e.n(ie),de=e(86516),i=e.n(de),ce=e(5677),b=e.n(ce),H=e(64082),J=e(18842),M=e(9991),me=e(59864),ve=e(8965),h=e(76222),X=e(49759),fe=e(68591),ne=e.n(fe),v=e(97207),f=e.n(v),a=e(79685),O=e(22786),P=e.n(O),F=e(46299),re=e.n(F),le=e(95968),Q=e(27202),oe=e(24220),Y=e(54916),xe=e(35259),t=e(63342),k=function(d){var c=d.onOpenModal,S=d.realData,m=d.tableData,g=d.realArr,w=(0,a.useState)(m),L=i()(w,2),W=L[0],U=L[1],K=(0,oe.N)(),B=K.formatDate,V=function(){for(var n,o=(n=document)===null||n===void 0?void 0:n.getElementById("realDataTable"),p=o.getElementsByTagName("tr"),R=[],E=0;E<p.length;E++){for(var $=[],z=p[E].getElementsByTagName("input"),l=0;l<z.length;l++){var s=z[l].value;$.push(s)}R.push($)}var u=[];u=m==null?void 0:m.map(function(D,j){var ge={processId:D.context["@id"],paramValue:R.slice(1)[j][0]||D.value.toString(),paramName:D.name,dateTime:B(Date.now())};return ge});var _={lcaParamList:u};typeof c=="function"&&c(),typeof S=="function"&&S(_)};(0,a.useEffect)(function(){var x=m==null?void 0:m.map(function(n,o){return g!=null&&g.length&&g[o].paramName===n.name?r()(r()({},n),{},{inputValue:g[o].paramValue}):r()({},n)});U(x)},[g,m]);var ee=[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:"9rem",render:function(n){return(0,t.jsx)("div",{className:" flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:n})}},{title:"\u8FC7\u7A0B\u540D\u79F0",dataIndex:"name",width:"7rem",render:function(n,o){return(0,t.jsx)("div",{className:"flex items-center  h-[33px] font-normal leading-[21px] text-[14px] ",children:o.context.name})}},{title:"\u53C2\u8003\u503C",width:"10rem",dataIndex:"value",render:function(n){return(0,t.jsx)("div",{className:"flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:n})}},{title:"\u586B\u5165\u503C",width:"10rem",dataIndex:"createTime",render:function(n,o){return(0,t.jsx)("input",{defaultValue:o.inputValue,type:"number",className:"font-normal  leading-[21px] text-[14px] w-[10rem] h-[33px] "})}}];return(0,t.jsxs)(le.u_,{title:"\u5B9E\u666F\u6570\u636E\u586B\u62A5",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",onClose:typeof c=="function"&&c||void 0,children:[(0,t.jsx)("div",{className:" mx-5 w-[640px] max-h-[400px] overflow-y-auto ",children:(0,t.jsx)(xe.i,{columns:ee,tableId:"realDataTable",data:W||[],isSetBorder:!0,maxHeight:"calc(100vh - 260px)",headerClassName:{background:"#DDDDDD",position:"sticky",top:"-1px",fontWeight:"700",fontSize:"18px",lineHeight:"30px",height:"50px"}})}),(0,t.jsx)("div",{className:"mx-5 ",children:(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5",children:[(0,t.jsx)(M.u,{onClick:typeof c=="function"&&c||void 0,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"\u53D6\u6D88"}),(0,t.jsx)(M.u,{className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:V,children:"\u786E\u5B9A"})]})})]})},se=k,pe={loadName:"",productId:""},ue=function(d){var c,S=d.openResultModal,m=d.getList,g=(0,a.useState)(!1),w=i()(g,2),L=w[0],W=w[1],U=(0,a.useState)([{name:"",id:""}]),K=i()(U,2),B=K[0],V=K[1],ee=(0,a.useState)({lcaParamList:[]}),x=i()(ee,2),n=x[0],o=x[1],p=(0,a.useState)([]),R=i()(p,2),E=R[0],$=R[1],z=(0,a.useState)(pe),l=i()(z,2),s=l[0],u=l[1],_=(0,a.useMemo)(function(){return B.map(function(I){return r()(r()({},I),{},{text:I.name})})},[B]),D=(0,Q.dW)(_,-1),j=(c=D.items[D.current])===null||c===void 0?void 0:c.id,ge=(0,a.useState)(!0),De=i()(ge,2),Ee=De[0],_e=De[1],je=(0,oe.N)(),Ie=je.formatDate,Me=function(){(0,Y.ev)().then(function(N){V(N||{name:"",id:""}),_e(!1)}).catch(function(N){}).finally()},Te=function(){var N,Z=s.loadName;if(!(!Z||!j)){var T=E==null?void 0:E.map(function(te){return{processId:te.context["@id"],paramValue:te.value.toString(),paramName:te.name,dateTime:Ie(Date.now())}}),G=(N=n.lcaParamList)!==null&&N!==void 0&&N.length?n:{lcaParamList:T.length?T:void 0},y=r()(r()({},G),{},{loadName:Z,productId:j});(0,Y.E)(y).then(function(te){typeof m=="function"&&m()}).catch(function(te){}).finally(function(){typeof S=="function"&&S()})}};(0,a.useEffect)(function(){Me()},[]);var be=function(){j&&W(!0)},Pe=function(N){var Z=N.target,T=Z.name,G=Z.value;u(function(y){return r()(r()({},y),{},b()({},T,G))})},Ae=function(){var I=re()(P()().mark(function N(){return P()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:(0,Y.NF)(j).then(function(G){var y=JSON.parse(G.paramDetail)[0]||[];$(JSON.stringify(y)==="{}"||!(y!=null&&y.parameters)?[]:y==null?void 0:y.parameters)}).catch(function(G){}).finally();case 1:case"end":return T.stop()}},N)}));return function(){return I.apply(this,arguments)}}();return(0,a.useEffect)(function(){j&&Ae()},[j]),Ee?null:(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(le.u_,{className:"rounded-lg",containerClassName:"mx-5 w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",title:"\u65B0\u5EFA\u78B3\u8DB3\u8FF9\u7ED3\u679C",onClose:S,children:(0,t.jsxs)("div",{className:"mx-5 w-[640px] ",children:[(0,t.jsx)("span",{className:"font-normal leading-6 ",children:"\u78B3\u8DB3\u8FF9\u6279\u6B21\uFF1A"}),(0,t.jsx)("input",{value:s.loadName,onChange:Pe,id:"loadName",name:"loadName",maxLength:30,className:"w-full mb-[20px] mt-[10px] px-5 border border-[#DDDDDD]  h-[50px]  bg-[#F8F8F8] rounded-lg"}),(0,t.jsx)("div",{className:"font-normal leading-6  mb-[10px]",children:"\u4EA7\u54C1\u7CFB\u7EDF\uFF1A"}),(0,t.jsx)(Q.ub,r()(r()({},D),{},{openClassName:"max-h-[9rem] bg-white  rounded-lg py-3 "})),(0,t.jsx)("div",{className:"mt-5 font-normal leading-6",children:"\u5B9E\u666F\u6570\u636E\u586B\u62A5\uFF1A"}),(0,t.jsx)("div",{onClick:function(){return be()},className:" flex cursor-pointer rounded-[4px] leading-4 text-[16px] mt-[10px] bg-[#F1F1F1] w-[84px] h-[24px]  text-center items-center justify-center ",children:"\u524D\u5F80\u586B\u5199"}),(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5",children:[(0,t.jsx)(M.u,{onClick:S,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"\u53D6\u6D88"}),(0,t.jsx)(M.u,{className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:Te,disabled:!j||!s.loadName,children:"\u8BA1\u7B97\u78B3\u7ED3\u679C"})]})]})}),L&&(0,t.jsx)(se,{realData:o,tableData:E,realArr:n.lcaParamList,onOpenModal:function(){return W(!1)}})]})},A=ue,C,he=(C={},b()(C,-1,{color:"text-[red]",text:"\u8BA1\u7B97\u5931\u8D25"}),b()(C,0,{color:"text-[#FF9800]",text:"\u7B49\u5F85\u8BA1\u7B97"}),b()(C,1,{color:"text-green-2",text:"\u67E5\u770B\u7ED3\u679C"}),b()(C,2,{color:"text-blue-600",text:"\u6B63\u5728\u8BA1\u7B97"}),C);function ye(){var q=(0,a.useState)(1),d=i()(q,2),c=d[0],S=d[1],m=(0,a.useState)(!1),g=i()(m,2),w=g[0],L=g[1],W=(0,a.useState)(!1),U=i()(W,2),K=U[0],B=U[1],V=(0,a.useRef)({inputData:"",data:""}),ee=function(s){var u=s.param,_=s.paramDetail;V.current={inputData:u,data:_},B(!0)},x=(0,a.useMemo)(function(){return[{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"loadName",width:180,ellipsis:!0},{title:"\u5B9E\u666F\u6570\u636E",valueType:"option",width:120,render:function(s,u){return[(0,t.jsx)("div",{className:"flex justify-center whitespace-nowrap px-2.5 bg-[#F1F1F1] rounded",onClick:function(){return ee(u)},children:(0,t.jsx)("span",{className:"cursor-pointer",children:"\u67E5\u770B\u5B9E\u666F\u6570\u636E"})},"key_look_real")]}},{title:"\u6279\u6B21\u7ED3\u679CID",dataIndex:"loadNumber",width:128,ellipsis:!0},{title:"\u4EA7\u54C1\u7CFB\u7EDF\u540D\u79F0",width:128,dataIndex:"productName",ellipsis:!0},{title:"\u7CFB\u7EDF\u4EA7\u54C1ID",width:128,dataIndex:"productUuid",ellipsis:!0},{title:"\u63CF\u8FF0",dataIndex:"productDescription",width:300,ellipsis:!0},{title:"\u64CD\u4F5C\u4EBA",dataIndex:"operator",width:100,ellipsis:!0},{title:"\u751F\u6210\u65F6\u95F4",dataIndex:"calculateSuccessTime",valueType:"dateTime",width:180},{title:"\u78B3\u8DB3\u8FF9\u7ED3\u679C",dataIndex:"state",width:130,render:function(s,u){var _,D;return(0,t.jsx)("div",{className:ne()({"cursor-pointer":u.state===1},(_=he[u.state])===null||_===void 0?void 0:_.color),onClick:function(){u.state===1&&X.history.push("/main/tools/inventory/result?id=".concat(u.loadNumber))},children:(D=he[u.state])===null||D===void 0?void 0:D.text})}},{title:"\u7EC4\u7EC7\u540D\u79F0",dataIndex:"orgName",width:130,ellipsis:!0},{title:"\u7EC4\u7EC7\u7F16\u53F7",dataIndex:"orgSerialNumber",width:130,ellipsis:!0}]},[]),n=f().sumBy(x,"width"),o=(0,ve.cc)(c,1e4),p=o.data,R=o.isLoading,E=o.mutate,$=(0,a.useMemo)(function(){return((p==null?void 0:p.records)||[]).map(function(l,s){return r()(r()({},l),{},{key:"key_inventory_"+s})})},[p]),z=(0,h.b)();return(0,t.jsxs)(H.Z,{title:"\u6211\u7684\u4EA7\u54C1\u78B3\u8DB3\u8FF9\u7ED3\u679C",extra:z?[(0,t.jsx)(M.z,{onClick:function(){return L(!0)},className:ne()("w-40 text-lg font-normal text-white rounded bg-green-2 h-11"),children:"\u65B0\u5EFA\u78B3\u8DB3\u8FF9\u7ED3\u679C"},"newinventory")]:[],children:[(0,t.jsx)("div",{className:"bg-white",children:(0,t.jsx)(J.Z,{columns:x,dataSource:$,loading:R,scroll:{x:n},pagination:{pageSize:10,total:(p==null?void 0:p.total)||0,onChange:function(s){S(s)}}})}),w&&(0,t.jsx)(A,{openResultModal:function(){return L(!1)},getList:function(){S(1),c===1&&E()}}),K&&(0,t.jsx)(me.d,r()(r()({},V.current),{},{onClose:function(){return B(!1)}}))]})}var Ce=ye,Se=function(){var q=(0,X.useLocation)(),d=q.pathname;return console.info("inventoryPage:",d),d!=="/main/tools/inventory"?(0,t.jsx)(X.Outlet,{}):(0,t.jsx)(Ce,{})}}}]);

"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2941],{64082:function(ie,O,e){var N=e(48651),s=e.n(N),p=e(38046),d=e.n(p),F=e(30541),T=e(33421),B=e(68591),A=e.n(B),j=e(63342),D=["className"];function W(h){var a=h.className,x=d()(h,D),i=(0,T.l)(function(g){var b=g.token;return{".ant-page-header":{padding:"1rem 1.5rem",paddingBlock:"1rem !important",paddingInline:"1.5rem !important",backgroundColor:b.colorBgBase,".ant-breadcrumb":{fontSize:".875rem",paddingBlockStart:"0 !important"},".ant-page-header-heading-title":{fontSize:"1.25rem"}},".ant-pro-grid-content":{padding:"1.5rem",backgroundColor:"transparent",".ant-pro-page-container-children-content":{padding:0,paddingBlock:"0 !important"},".ant-pro-page-container-children-container":{paddingBlock:"0 !important",paddingInline:"0 !important"}}}});return(0,j.jsx)(F._z,s()({className:A()(a,i)},x))}O.Z=W},18842:function(ie,O,e){e.d(O,{rx:function(){return g},zL:function(){return i}});var N=e(48651),s=e.n(N),p=e(38046),d=e.n(p),F=e(81123),T=e(54695),B=e(33421),A=e(9021),j=e(68591),D=e.n(j),W=e(97207),h=e.n(W),a=e(63342),x=["className","columns"];function i(b){return h().size(b)>=16?(0,a.jsx)(A.Z,{title:b,children:(0,F.lS)(b,8,8)}):b}function g(b){var oe=b.className,y=b.columns,ee=d()(b,x),Q=(0,B.l)(function(ne){var fe=ne.token;return{".ant-table-container":{borderStartStartRadius:"0 !important",borderStartEndRadius:"0 !important"},".ant-pro-card-body":{paddingInline:"0 !important",paddingBlock:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:first-child":{borderStartStartRadius:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:last-child":{borderStartEndRadius:"0 !important"},".ant-pagination-item, .ant-pagination-prev, .ant-pagination-next":{borderRadius:"2px !important",minWidth:"30px !important",height:"30px !important",lineHeight:"28px !important"},".ant-pagination-total-text":{lineHeight:"30px !important",visibility:"hidden"}}}),K=h().sumBy(y,"width");return(0,a.jsx)(T.Z,s()({bordered:!0,columns:y,scroll:{x:K},search:!1,options:!1,rowKey:"key",className:D()(oe,"p-6",Q)},ee))}O.ZP=g},9991:function(ie,O,e){e.d(O,{u:function(){return a},z:function(){return h}});var N=e(48651),s=e.n(N),p=e(38046),d=e.n(p),F=e(68591),T=e.n(F),B=e(68717),A=e(31887),j=e(63342),D=["children","className"],W=["busy","type","className","defStyle","children"];function h(x){var i=x.children,g=x.className,b=d()(x,D);return(0,j.jsx)("button",s()(s()({},b),{},{className:T()(g),children:x.children}))}function a(x){var i=x.busy,g=x.type,b=g===void 0?"primary":g,oe=x.className,y=x.defStyle,ee=y===void 0?"btn-primary":y,Q=x.children,K=d()(x,W);return(0,j.jsx)(A.ZP,s()(s()({type:ee==="btn-primary-1"?"default":b,className:T()(oe,"leading-none !shadow-none",{})},K),{},{children:i?(0,j.jsx)(B.fCD,{className:"animate-spin mx-auto"}):Q}))}},11e3:function(ie,O,e){e.d(O,{I:function(){return W},g:function(){return D}});var N=e(48651),s=e.n(N),p=e(38046),d=e.n(p),F=e(68591),T=e.n(F),B=e(26082),A=e(63342),j=["className","color","size"];function D(h){var a=h.className,x=h.color,i=h.size,g=i===void 0?"":i,b=d()(h,j);return(0,A.jsx)("div",s()(s()({},b),{},{className:T()("text-black w-full h-full flex items-center justify-center",a),children:(0,A.jsx)(B.uur,{color:x,style:g?{fontSize:g}:{},className:"text-[3.125rem] animate-spin"})}))}function W(){return(0,A.jsx)(D,{className:"fixed z-50 left-0 top-0 w-full !h-full bg-black/25"})}},95968:function(ie,O,e){e.d(O,{u_:function(){return oe}});var N=e(48651),s=e.n(N),p=e(86516),d=e.n(p),F=e(38046),T=e.n(F),B=e(97980),A=e(68591),j=e.n(A),D=e(79685),W=e(50374),h=e(22798),a=e(63342),x=["className","title","onClose","outClose","titleClassName","containerClassName","children"],i={current:null};i.current=document.body;function g(y){var ee=y.title,Q=y.onClose,K=y.titleClassName,ne=y.containerClassName;return(0,a.jsxs)("div",{className:j()("flex items-center justify-between pb-6 mb-6 text-xl font-bold border-b mt-2.5 mx-5",ne),children:[(0,a.jsx)("span",{className:j()("max-w-[70%] overflow-hidden text-ellipsis whitespace-nowrap",K),children:ee}),(0,a.jsx)(h.q5L,{onClick:function(ve){ve.stopPropagation(),Q&&Q()},className:"text-2xl cursor-pointer"})]})}function b(){return _jsx("div",{})}function oe(y){var ee=y.className,Q=y.title,K=y.onClose,ne=y.outClose,fe=ne===void 0?!1:ne,ve=y.titleClassName,n=y.containerClassName,xe=y.children,Ce=T()(y,x),le=(0,D.useRef)(null),je=(0,D.useState)(!0),se=d()(je,2),de=se[0],pe=se[1],re=function(){K&&(pe(!0),setTimeout(function(){return K()},300))},be=(0,B.R)(function(ce){ce.stopPropagation();var De=le.current&&le.current!==ce.target&&le.current.contains(ce.target);!De&&fe&&re()});return(0,D.useEffect)(function(){pe(!1)},[]),i.current?(0,W.createPortal)((0,a.jsx)("div",s()(s()({},Ce),{},{ref:le,className:j()("fixed left-0  top-0 w-full h-full overflow-auto z-[500] flex justify-center items-center",{"transition-[background_ease_300ms]":!0,"bg-black/0":de,"bg-black/25":!de},ee),onClick:be,children:(0,a.jsxs)("div",{id:"mo",className:j()("bg-white rounded p-5 min-w-[20rem] min-h-[150]",{"transition-[all_ease_300ms]":!0,"scale-0":de,"scale-100":!de}),children:[(0,a.jsx)(g,{title:Q,containerClassName:n,titleClassName:ve,onClose:re}),xe]})})),i.current):null}},8965:function(ie,O,e){e.d(O,{H4:function(){return T},Kv:function(){return F},TW:function(){return a},Tz:function(){return A},We:function(){return B},Y5:function(){return W},cc:function(){return D},cu:function(){return x},e0:function(){return h},uU:function(){return j}});var N=e(97207),s=e.n(N),p=e(94437),d=e(54916);function F(i){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,p.ZP)("/api/product-system/".concat(i,"/detail"),{refreshInterval:g})}function T(i){return(0,p.ZP)(s().isNil(i)?null:"/api/verifyRecord/".concat(i,"/detail"))}function B(i){return(0,p.ZP)(i?"/api/inventory/all":null)}function A(i){return(0,p.ZP)(i?"/api/verifyRecord/verifiers":null)}function j(i){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,p.ZP)("/api/product-system/list/?pageNum=".concat(i,"&pageSize=10"),{refreshInterval:g})}function D(i){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,p.ZP)("/api/inventory/list/?pageNum=".concat(i,"&pageSize=10"),{refreshInterval:g})}function W(i){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,p.ZP)("/api/verifyRecord/list/?pageNum=".concat(i,"&pageSize=10"),{refreshInterval:g})}function h(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(0,p.ZP)("/api/sbt/token/list/?pageNum=".concat(i,"&pageSize=999"))}function a(i){return(0,p.ZP)(i?"/api/sbt/token/uuid/".concat(i):null,{fetcher:d.Gh})}function x(i){return(0,p.ZP)(i?"/api/sbt/token/nft/".concat(i):null,{fetcher:d.Gh})}},97980:function(ie,O,e){e.d(O,{R:function(){return s}});var N=e(79685);function s(p){var d=(0,N.useRef)(p);return(0,N.useLayoutEffect)(function(){d.current=p}),(0,N.useCallback)(function(){return d.current&&d.current.apply(d,arguments)},[])}},26846:function(ie,O,e){e.r(O),e.d(O,{default:function(){return ke}});var N=e(48651),s=e.n(N),p=e(86516),d=e.n(p),F=e(64082),T=e(18842),B=e(9991),A=e(99095),j=e(4151),D=e(8965),W=e(97207),h=e.n(W),a=e(79685),x=e(70300),i=e.n(x),g=e(11e3),b=e(95968),oe=e(38143),y={"t-side":function(r,u){return new KeyframeEffect(r,u==="add"?[{transform:"scaleY(0)",transformOrigin:"0 0",opacity:0},{transform:"scaleY(1)",transformOrigin:"0 0",opacity:1}]:u==="remove"?[{transform:"scaleY(1)",transformOrigin:"0 0",opacity:1},{transform:"scaleY(0)",transformOrigin:"0 0",opacity:0}]:[],{duration:300,easing:"ease-in-out"})},"r-side":function(r,u){return new KeyframeEffect(r,u==="add"?[{transform:"scaleX(0)",transformOrigin:"100% 0",opacity:0},{transform:"scaleX(1)",transformOrigin:"100% 0",opacity:1}]:u==="remove"?[{transform:"scaleX(1)",transformOrigin:"100% 0",opacity:1},{transform:"scaleX(0)",transformOrigin:"100% 0",opacity:0}]:[],{duration:300,easing:"ease-in-out"})},scale:function(r,u){return new KeyframeEffect(r,u==="add"?[{transform:"scale(0.8)",opacity:0},{transform:"scale(1)",opacity:1}]:u==="remove"?[{transform:"scale(1)",opacity:1},{transform:"scale(0.8)",opacity:0}]:[],{duration:300,easing:"ease-in-out"})},opacity:function(r,u){return new KeyframeEffect(r,u==="add"?[{opacity:0},{opacity:1}]:u==="remove"?[{opacity:1},{opacity:0}]:[],{duration:200,easing:"ease-in-out"})}};function ee(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"scale",r=(0,a.useRef)(null);return(0,a.useEffect)(function(){r.current&&(0,oe.ZP)(r.current,typeof f=="string"?y[f]:f)},[r.current]),r}var Q=e(68591),K=e.n(Q),ne=e(30681),fe=e(12239),ve=e(76852),n=e(63342);function xe(f){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=(0,a.useState)(r),L=d()(u,2),M=L[0],C=L[1];return(0,a.useEffect)(function(){C(r)},[f,r]),{onChange:C,items:f,current:M}}function Ce(f){var r=f.items,u=f.current,L=f.onChange,M=f.className,C=M===void 0?"bg-white text-black px-5 py-3 text-lg rounded-lg w-[31.25rem] mo:w-full mo:text-sm":M,k=f.currentClassName,w=k===void 0?"flex justify-between items-center":k,z=f.openClassName,S=z===void 0?"max-h-[18rem] bg-white  rounded-lg py-3 ":z,X=r[u]?r[u].text:"",I=(0,fe.Z)(!1),v=d()(I,2),R=v[0],V=v[1],E=(0,a.useCallback)(function(l){u!==l&&L(l)},[u]),J=ee("t-side");return(0,ve.Z)(J,function(){return R&&V(!1)}),r.length===0?null:(0,n.jsxs)("div",{ref:J,className:K()("relative cursor-pointer",C),onClick:function(){return V()},children:[(0,n.jsxs)("div",{className:w,children:[(0,n.jsx)("span",{className:"truncate",children:X}),R?(0,n.jsx)(ne.pzk,{}):(0,n.jsx)(ne._i7,{})]}),R&&(0,n.jsx)("div",{className:K()("absolute z-[100] left-0 w-full overflow-x-hidden overflow-y-auto",S),style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:(0,n.jsx)("div",{className:"",children:r.map(function(l,t){return(0,n.jsx)("div",{style:{},className:K()("w-full break-all px-5 py-2 text-sm hover:bg-gray-16",{"text-green-2":t===u}),onClick:function(){return E(t)},children:l.text},"select_item_".concat(t))})})})]})}var le=function(r){return(0,n.jsx)(Ce,s()({className:"h-[50px] px-5 items-center bg-stone-50 rounded-lg border border-neutral-200",currentClassName:"h-full flex justify-between items-center"},r))},je=e(22786),se=e.n(je),de=e(46299),pe=e.n(de),re=e(54916);function be(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,r=(0,a.useRef)(new AbortController),u=function(M){var C=M,k=function(){if(C.length!==0){var I=C[0];return C=h().drop(C),{file:I,index:M.length-C.length-1}}},w=h().min([f,C.length]),z=h().range(M.length),S=function(){var X=pe()(se()().mark(function I(){var v,R,V,E;return se()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(v=k(),!v){l.next=10;break}return R=v.file,V=v.index,l.next=6,(0,re.qM)(R,{signal:r.current.signal});case 6:E=l.sent,z[V]=E,l.next=11;break;case 10:return l.abrupt("return");case 11:l.next=0;break;case 13:case"end":return l.stop()}},I)}));return function(){return X.apply(this,arguments)}}();return Promise.all(h().range(w).map(function(){return S()})).then(function(){return z})};return[u,function(){try{r.current.abort()}catch(L){console.info("abort upfiles")}}]}var ce=e(81123),De=e(98919),P=function(r){return(0,n.jsxs)("div",{className:"w-full flex flex-col gap-2.5",children:[(0,n.jsxs)("span",{className:"font-normal leading-6 text-[16px]",children:[r.title,"\uFF1A"]}),r.children]})},Y=function(r){return(0,n.jsx)("div",{className:"font-normal leading-[21.79px] text-[16px] text-gray-9",children:r.value})},Se=function(r){var u,L,M,C,k,w,z,S=r.closeModal,X=r.recordId,I=r.type,v=I===void 0?"new":I,R=(0,a.useRef)(null),V=(0,A.oR)(),E=V.userData,J=(0,D.H4)(X),l=J.isLoading,t=J.data,te=(0,D.We)(v==="new"||v==="editor"),H=te.isLoading,G=te.data,Ee=(0,D.Tz)(v==="new"||v==="editor"),Pe=Ee.isLoading,m=Ee.data,$=l||H||Pe,U=(0,a.useMemo)(function(){return[(G||[]).map(function(c){return s()(s()({},c),{},{text:c.loadName})}),h().findIndex(G,function(c){return c.loadNumber===(t==null?void 0:t.loadNumber)})]},[G,t]),Z=xe.apply(void 0,i()(U)),he=(0,a.useMemo)(function(){return[(m||[]).map(function(c){return s()(s()({},c),{},{text:c.name})}),h().findIndex(m,function(c){var _;return c.id===(t==null||(_=t.verifyUser)===null||_===void 0?void 0:_.id)})]},[m,t]),q=xe.apply(void 0,i()(he)),Xe=(0,De.Z)({verifyState:!0}),Ne=d()(Xe,2),o=Ne[0],ue=Ne[1],Ye=be(),Be=d()(Ye,2),Me=Be[0],He=Be[1];(0,a.useEffect)(function(){return He},[]);var ge=!o.files||o.files.length===0||o.files.length>20||h().findIndex(o.files,function(c){return c.size>=1024*1024*1024*2||c.name.length>=128})>=0,Ae=!G||!m||!o.name||Z.current<0||q.current<0||ge,Ge=(0,a.useState)(!1),Ie=d()(Ge,2),ae=Ie[0],_e=Ie[1],Qe=function(){Ae||ae||(_e(!0),Me(o.files).then(function(_){return(0,re._Q)({name:o.name,loadNumber:G[Z.current].loadNumber,description:o.desc||"",fileList:_,verifyUserId:m[q.current].id}).then(function(){return S(!0)}).catch(console.error).finally(function(){_e(!1)})}))},Le=!t||!G||!m||(o.name||t.name)===t.name&&(o.desc||t.description)===t.description&&((u=G[Z.current])===null||u===void 0?void 0:u.loadNumber)===t.loadNumber&&((L=m[q.current])===null||L===void 0?void 0:L.id)===t.verifyUserId&&ge,Je=function(){if(!(Le||ae)){var _;_e(!0),o.files?_=Me(o.files).then(function(ye){return(0,re.u_)(t.id,{name:o.name||t.name,loadNumber:G[Z.current].loadNumber,description:o.desc||t.description,fileList:ye,verifyUserId:m[q.current].id})}):_=(0,re.u_)(t.id,{name:o.name,loadNumber:G[Z.current].loadNumber,description:o.desc,verifyUserId:m[q.current].id}),_.then(function(){return S(!0)}).catch(console.error).finally(function(){_e(!1)})}},Re=!t||ge||!o.functionalUnit||!o.evaluationBoundary||!o.evaluationBasis||!o.evaluationExpireTime,qe=function(){Re||!o.files||ae||(_e(!0),Me(o.files).then(function(_){return(0,re.A6)(t.id,{fileList:_,state:!0,functionalUnit:o.functionalUnit,evaluationBoundary:o.evaluationBoundary,evaluationBasis:o.evaluationBasis,evaluationExpireTime:o.evaluationExpireTime+" 00:00:00"})}).then(function(){return S(!0)}).catch(console.error).finally(function(){_e(!1)}))},en={directory:"",webkitdirectory:""},me="w-full shrink-0 px-5 border border-[#DDDDDD]  h-[50px]  bg-[#F8F8F8] rounded-lg",Te=v==="verify",nn=(0,a.useMemo)(function(){var c;if(ge||!o.files)return"\u9A8C\u8BC1\u6587\u4EF6";var _=((c=o.files.item(0))===null||c===void 0?void 0:c.webkitRelativePath.split("/")[0])||"\u9A8C\u8BC1\u6587\u4EF6";return(0,ce.lS)(_,10,10)},[o.files,ge]),Ue=function(){return(0,n.jsx)(P,{title:Te?"\u9A8C\u8BC1\u6587\u6863":"\u9644\u4EF6",children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,n.jsx)("input",s()(s()({},en),{},{ref:R,type:"file",hidden:!0,onChange:function(ye){return ue({files:ye.target.files})}})),(0,n.jsx)(j.SW,{}),(0,n.jsx)(Y,{value:nn}),(0,n.jsx)("div",{onClick:function(ye){var Oe;return!ae&&((Oe=R.current)===null||Oe===void 0?void 0:Oe.click())},className:K()("flex  rounded-[4px] leading-4 text-[16px] bg-[#F1F1F1] w-[100px] h-[24px]  text-center items-center justify-center ",ae?"cursor-not-allowed":"cursor-pointer"),children:"\u9009\u62E9\u6587\u4EF6\u5939"})]})})};return(0,n.jsx)(a.Fragment,{children:(0,n.jsxs)(b.u_,{className:"rounded-lg",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",title:v==="new"?"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55":"\u7F16\u8F91\u9A8C\u8BC1\u8BB0\u5F55",onClose:function(){return S(!1)},children:[(0,n.jsxs)("div",{className:"flex flex-col py-[1px] gap-5 px-5 w-[640px] min-h-[6.25rem] max-h-mc overflow-y-auto",children:[$&&(0,n.jsx)(g.g,{}),!$&&(0,n.jsx)(n.Fragment,{children:Te?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P,{title:"\u9A8C\u8BC1\u8BB0\u5F55",children:(0,n.jsx)(Y,{value:t==null?void 0:t.name})}),(0,n.jsx)(P,{title:"\u9A8C\u8BC1\u8BB0\u5F55ID",children:(0,n.jsx)(Y,{value:t==null?void 0:t.id})}),(0,n.jsx)(P,{title:"\u53D1\u8D77\u4EBA",children:(0,n.jsx)(Y,{value:t==null||(M=t.createUser)===null||M===void 0?void 0:M.name})}),(0,n.jsx)(P,{title:"\u7EC4\u7EC7\u673A\u6784",children:(0,n.jsx)(Y,{value:t==null||(C=t.organization)===null||C===void 0?void 0:C.name})}),(0,n.jsx)(P,{title:"\u63CF\u8FF0",children:(0,n.jsx)(Y,{value:t==null?void 0:t.description})}),(0,n.jsx)(P,{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",children:(0,n.jsx)(Y,{value:t==null||(k=t.inventory)===null||k===void 0?void 0:k.loadName})}),(0,n.jsx)(P,{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",children:(0,n.jsx)(Y,{value:t==null?void 0:t.loadNumber})}),(0,n.jsx)(P,{title:"\u9A8C\u8BC1\u4EBA",children:(0,n.jsx)(Y,{value:t==null||(w=t.verifyUser)===null||w===void 0?void 0:w.name})}),Ue(),(0,n.jsx)(P,{title:"\u529F\u80FD\u5355\u4F4D",children:(0,n.jsx)("input",{value:o.functionalUnit||(t==null?void 0:t.functionalUnit),onChange:function(_){return ue({functionalUnit:_.target.value})},maxLength:30,className:me})}),(0,n.jsx)(P,{title:"\u8BC4\u4EF7\u8FB9\u754C",children:(0,n.jsx)("input",{value:o.evaluationBoundary||(t==null?void 0:t.evaluationBoundary),onChange:function(_){return ue({evaluationBoundary:_.target.value})},maxLength:30,className:me})}),(0,n.jsx)(P,{title:"\u8BC4\u4EF7\u4F9D\u636E",children:(0,n.jsx)("input",{value:o.evaluationBasis||(t==null?void 0:t.evaluationBasis),onChange:function(_){return ue({evaluationBasis:_.target.value})},maxLength:30,className:me})}),(0,n.jsx)(P,{title:"\u8BC4\u4EF7\u6709\u6548\u671F",children:(0,n.jsx)("input",{value:o.evaluationExpireTime||(t==null?void 0:t.evaluationExpireTime),type:"date",onChange:function(_){console.info("inputTime:",_.target.value),ue({evaluationExpireTime:_.target.value})},maxLength:30,className:me})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P,{title:"\u9A8C\u8BC1\u8BB0\u5F55",children:(0,n.jsx)("input",{value:o.name||(t==null?void 0:t.name),onChange:function(_){return ue({name:_.target.value})},maxLength:30,className:me})}),(0,n.jsx)(P,{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",children:(0,n.jsx)(le,s()({},Z))}),(0,n.jsx)(P,{title:"\u63CF\u8FF0",children:(0,n.jsx)("input",{value:o.desc||(t==null?void 0:t.description),onChange:function(_){return ue({desc:_.target.value})},maxLength:100,className:me})}),(0,n.jsx)(P,{title:"\u9009\u62E9\u9A8C\u8BC1\u4EBA",children:(0,n.jsx)(le,s()({},q))}),(0,n.jsx)(P,{title:"\u53D1\u8D77\u4EBA",children:(0,n.jsx)(Y,{value:E==null?void 0:E.name})}),(0,n.jsx)(P,{title:"\u7EC4\u7EC7\u673A\u6784",children:(0,n.jsx)(Y,{value:E==null||(z=E.organization)===null||z===void 0?void 0:z.name})}),Ue()]})})]}),!$&&(0,n.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5 w-full px-5",children:[v==="new"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(B.u,{defStyle:"btn-primary-1",className:"flex-1",onClick:function(){return S(!1)},children:"\u53D6\u6D88"}),(0,n.jsx)(B.u,{busy:ae,disabled:Ae,defStyle:"btn-primary",className:"flex-1",onClick:Qe,children:"\u786E\u5B9A"})]}),v==="editor"&&(0,n.jsx)(B.u,{busy:ae,disabled:Le,className:"flex-1",onClick:Je,children:"\u63D0\u4EA4\u66F4\u65B0"}),v==="verify"&&(0,n.jsx)(B.u,{busy:ae,disabled:Re,className:"flex-1",onClick:qe,children:"\u63D0\u4EA4\u9A8C\u8BC1"})]})]})})},Fe=Se,We=e(30905),Ke=e.n(We),we=e(64470),ze=function(r){var u=r.closeModal,L=r.fileList,M=(0,a.useState)(!1),C=d()(M,2),k=C[0],w=C[1],z=(0,A.h3)(),S=function(){var X=pe()(se()().mark(function I(){var v,R,V,E;return se()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return w(!0),l.prev=1,v=new(Ke()),R="",L.forEach(function(t){R=t.fileName.split("/")[0];var te=we.default.get(t.downloadUrl,{responseType:"arraybuffer"}).then(function(H){return H.data});v.file(t.fileName,te)}),l.next=7,v.generateAsync({type:"blob"});case 7:V=l.sent,E=document.createElement("a"),E.href=URL.createObjectURL(V),E.download="".concat(R,".zip"),E.click(),URL.revokeObjectURL(E.href),l.next=18;break;case 15:l.prev=15,l.t0=l.catch(1),z("\u6587\u4EF6\u4E0B\u8F7D\u51FA\u9519\uFF01");case 18:return l.prev=18,w(!1),l.finish(18);case 21:case"end":return l.stop()}},I,null,[[1,15,18,21]])}));return function(){return X.apply(this,arguments)}}();return(0,n.jsx)(a.Fragment,{children:(0,n.jsxs)(b.u_,{onClose:u,title:"\u67E5\u770B\u6587\u4EF6\u5939",children:[(0,n.jsx)("div",{className:"px-5 overflow-y-auto  max-h-[260px]",children:L.map(function(X,I){var v=X.fileName.split("/");return(0,n.jsx)("div",{id:"view",className:"w-[640px] h-[34px] flex items-center ",children:(0,n.jsx)("span",{className:"ml-[10px] leading-5 text-[16px] font-normal",children:v[v.length-1]})},"file_".concat(I))})}),(0,n.jsx)("button",{disabled:k,className:"bg-[#29953A] w-full h-[50px] rounded-lg text-[#FFFFFF] mt-5",onClick:S,children:"\u4E0B\u8F7D"})]})})},Ve=ze;function $e(){var f=(0,A.oR)(),r=f.userData,u=(0,a.useState)(1),L=d()(u,2),M=L[0],C=L[1],k=(0,a.useState)(!1),w=d()(k,2),z=w[0],S=w[1],X=(0,a.useState)(!1),I=d()(X,2),v=I[0],R=I[1],V=(0,a.useRef)([]),E=(0,a.useRef)(),J=function($){V.current=$,R(!0)},l=(0,a.useCallback)(function(m){S(!0),E.current={type:h().isEmpty(m)?"new":(r==null?void 0:r.role)==="verify"?"verify":"editor",recordId:m.id}},[r]),t=(0,a.useMemo)(function(){return[{title:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"name",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"id",width:160,ellipsis:!0},{title:"\u53D1\u8D77\u4EBA",dataIndex:"_createUserName",width:160,ellipsis:!0},{title:"\u7EC4\u7EC7\u673A\u6784",width:160,ellipsis:!0,dataIndex:"_organizationName"},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"_loadName",width:160,ellipsis:!0},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber",width:170,renderText:T.zL},{title:"\u9644\u4EF6",width:160,render:function($,U){return(0,n.jsxs)("div",{onClick:function(){return J(U.attachmentFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,n.jsx)(j.SW,{}),(0,n.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]})}},{title:"\u6700\u540E\u7F16\u8F91",dataIndex:"updateTime",valueType:"dateTime",width:170},{title:"\u9A8C\u8BC1\u4EBA",dataIndex:"_verifyUserName",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u6587\u6863",width:130,render:function($,U){return U.verifyFileList.length?(0,n.jsxs)("div",{onClick:function(){return J(U.verifyFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,n.jsx)(j.SW,{}),(0,n.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]}):null}},{title:"\u9A8C\u8BC1\u72B6\u6001",width:130,render:function($,U){return(0,n.jsx)("span",{className:"",children:U.state?"\u5DF2\u9A8C\u8BC1":""})}},{title:"\u9A8C\u8BC1\u65F6\u95F4",dataIndex:"proofTime",valueType:"dateTime",width:170},{title:"\u64CD\u4F5C",width:120,valueType:"option",render:function($,U){return U.state?[]:[(0,n.jsx)("div",{className:"flex justify-between flex-1 text-green-2 break-keep",children:(0,n.jsx)("div",{className:"flex items-center font-normal justify-center cursor-pointer leading-[27px]",onClick:function(){return l(U)},children:"\u7F16\u8F91"})},"edit")]}}]},[l]),te=(0,D.Y5)(M),H=te.data,G=te.isLoading,Ee=te.mutate,Pe=(0,a.useMemo)(function(){return((H==null?void 0:H.records)||[]).map(function(m,$){var U,Z,he,q;return s()(s()({},m),{},{key:"verify_"+$,_createUserName:(U=m.createUser)===null||U===void 0?void 0:U.name,_organizationName:(Z=m.organization)===null||Z===void 0?void 0:Z.name,_loadName:(he=m.inventory)===null||he===void 0?void 0:he.loadName,_verifyUserName:(q=m.verifyUser)===null||q===void 0?void 0:q.name})})},[H]);return(0,n.jsxs)(F.Z,{title:"\u9A8C\u8BC1\u7BA1\u7406\u5217\u8868",extra:(r==null?void 0:r.role)==="admin"?[(0,n.jsx)(B.u,{onClick:function(){return l({})},children:"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55"},"key_new_verify")]:[],children:[(0,n.jsx)("div",{className:"bg-white",children:(0,n.jsx)(T.ZP,{columns:t,dataSource:Pe,loading:G,scroll:{x:scrollX},pagination:{pageSize:10,total:(H==null?void 0:H.total)||0,current:M,onChange:function($){C($)}}})}),z&&E.current&&(0,n.jsx)(Fe,{type:E.current.type,recordId:E.current.recordId,closeModal:function(){C(1),M===1&&Ee(),S(!1),E.current=void 0}}),v&&(0,n.jsx)(Ve,{fileList:V.current,closeModal:function(){R(!1)}})]})}var Ze=$e,ke=Ze}}]);

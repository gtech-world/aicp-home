"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9725],{8242:function(se,j,e){var T=e(68591),i=e.n(T),U=e(63342),n=function(r){var Y=r.onClick,A=r.busy,C=r.btnText,k=r.btnClassName,O=r.prohibit;return(0,U.jsx)("div",{onClick:O?void 0:Y,className:i()(O?" border bg-[#F5F5F5] !text-[#00000040] !cursor-no-drop hover:border-[#F5F5F5] hover:!text-[#00000040]  ":"cursor-pointer","flex hover:border-[#29953A] hover:text-[#29953A] border text-[#000000] rounded-[2px] leading-4 text-[14px]  w-[100px] h-[24px]  text-center items-center justify-center ",A?"cursor-not-allowed":"cursor-pointer",k),children:C})};j.Z=n},5053:function(se,j,e){e.d(j,{d:function(){return q}});var T=e(48651),i=e.n(T),U=e(38046),n=e.n(U),x=e(95968),r=e(81123),Y=e(97207),A=e.n(Y),C=e(79685),k=e(13633),O=e(63342),me=["data","inputData","isShow","header"];function q(w){var G=w.data,a=w.inputData,ce=w.isShow,ee=w.header,ve=ee===void 0?["\u53C2\u6570\u540D","\u8FC7\u7A0B\u540D\u79F0","\u53C2\u8003\u503C","\u8F93\u5165\u503C"]:ee,pe=n()(w,me),ie=(0,C.useMemo)(function(){var K;if(!G)return[];var V=a?A().mapKeys(typeof a=="string"?(0,r.OA)(a)||[]:a,function(L){return L.paramName}):{},t=(0,r.OA)(G)||[],fe=((K=t[0])===null||K===void 0?void 0:K.parameters)||[];return fe.map(function(L){var te;return[L.name,L.context.name,L.value,((te=V[L.name])===null||te===void 0?void 0:te.paramValue)||""]})},[G,a]);return(0,O.jsx)(x.u_,i()(i()({title:"\u5B9E\u666F\u6570\u636E"},pe),{},{chilrenClassName:"mt-0",children:(0,O.jsx)("div",{className:"w-[40rem] mo:w-full  mb-5 ",children:(0,O.jsx)(k.ZP,{scroll:{y:440},columns:ve,dataSource:ce?G:ie,pagination:!1,rootClassName:"",className:"h-full !p-0 mx-5 mt-5 "})})}))}},76222:function(se,j,e){e.d(j,{b:function(){return U},n:function(){return i}});var T=e(99095);function i(){var n=(0,T.oR)(),x=n.userData,r=n.inited;return r&&(x==null?void 0:x.role)==="verify"}function U(){var n=(0,T.oR)(),x=n.userData,r=n.inited;return r&&(x==null?void 0:x.role)!=="verify"}},75631:function(se,j,e){e.r(j),e.d(j,{default:function(){return Pe}});var T=e(48651),i=e.n(T),U=e(86516),n=e.n(U),x=e(5677),r=e.n(x),Y=e(89372),A=e(13633),C=e(9991),k=e(5053),O=e(8965),me=e(76222),q=e(12564),w=e(68591),G=e.n(w),a=e(79685),ce=e(22786),ee=e.n(ce),ve=e(46299),pe=e.n(ve),ie=e(95968),K=e(54916),V=e(81123),t=e(63342),fe=function(f){var m=f.onOpenModal,R=f.realData,h=f.tableData,D=f.realArr,ne=(0,a.useState)(h),B=n()(ne,2),re=B[0],$=B[1],oe=function(){for(var o,v=(o=document)===null||o===void 0?void 0:o.getElementById("realDataTable"),g=v.getElementsByTagName("tr"),y=[],F=0;F<g.length;F++){for(var M=[],Q=g[F].getElementsByTagName("input"),z=0;z<Q.length;z++){var X=Q[z].value;M.push(X)}y.push(M)}var d=[];d=h==null?void 0:h.map(function(s,l){var I={processId:s.context["@id"],paramValue:y.slice(2)[l][0]||s.value.toString(),paramName:s.name,dateTime:(0,V.p6)()};return I});var u={lcaParamList:d};typeof m=="function"&&m(),typeof R=="function"&&R(u)};(0,a.useEffect)(function(){var c=h==null?void 0:h.map(function(o,v){var g;return D!=null&&D.length&&((g=D[v])===null||g===void 0?void 0:g.paramName)===o.name?i()(i()({},o),{},{inputValue:D[v].paramValue}):i()({},o)});$(c)},[D,h]);var H=(0,a.useMemo)(function(){return[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:"9rem",render:function(o){return(0,t.jsx)("div",{className:" flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:o})}},{title:"\u8FC7\u7A0B\u540D\u79F0",dataIndex:"name",width:"7rem",render:function(o,v){return(0,t.jsx)("div",{className:"flex items-center  h-[33px] font-normal leading-[21px] text-[14px] ",children:v.context.name})}},{title:"\u53C2\u8003\u503C",width:"10rem",dataIndex:"value",render:function(o){return(0,t.jsx)("div",{className:"flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:o})}},{title:"\u586B\u5165\u503C",width:"10rem",dataIndex:"createTime",render:function(o,v){return(0,t.jsx)("input",{defaultValue:v.inputValue,type:"number",className:"font-normal  leading-[21px] text-[14px]  h-[33px] "})}}]},[]);return(0,t.jsx)(ie.u_,{title:"\u5B9E\u666F\u6570\u636E\u586B\u62A5",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[16px] leading-5 font-bold",onClose:typeof m=="function"&&m||void 0,line:!0,bottomBtn:(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5 ",children:[(0,t.jsx)(C.u,{size:"large",onClick:typeof m=="function"&&m||void 0,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"\u53D6\u6D88"}),(0,t.jsx)(C.u,{size:"large",className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:oe,children:"\u786E\u5B9A"})]})}),children:(0,t.jsx)("div",{className:" w-[640px] max-h-[400px] ",children:(0,t.jsx)(A.ZP,{scroll:{y:330},columns:H,id:"realDataTable",dataSource:re||[],pagination:!1,className:"h-full !p-0 mx-5 mt-5 "})})})},L=fe,te=e(46284),_e=e(3826),ye=e(7698),Ie=e(8242),Ee={loadName:"",productId:""},Ne=function(f){var m=f.openResultModal,R=f.getList,h=(0,a.useState)(!1),D=n()(h,2),ne=D[0],B=D[1],re=(0,a.useState)([{name:"",id:""}]),$=n()(re,2),oe=$[0],H=$[1],c=(0,a.useState)({lcaParamList:[]}),o=n()(c,2),v=o[0],g=o[1],y=(0,a.useState)([]),F=n()(y,2),M=F[0],Q=F[1],z=(0,a.useState)(Ee),X=n()(z,2),d=X[0],u=X[1],s=(0,a.useState)(!0),l=n()(s,2),I=l[0],Z=l[1],E=function(){(0,K.ev)().then(function(p){H(p||{name:"",id:""}),Z(!1)}).catch(function(p){}).finally()},N=function(){var p,P=d.loadName,W=d.productId;if(!(!P||!W)){var le=M==null?void 0:M.map(function(ue){return{processId:ue.context["@id"],paramValue:ue.value.toString(),paramName:ue.name,dateTime:(0,V.p6)()}}),b=(p=v.lcaParamList)!==null&&p!==void 0&&p.length?v:{lcaParamList:le.length?le:void 0},je=i()(i()({},b),{},{loadName:P,productId:W});(0,K.E)(je).then(function(ue){typeof R=="function"&&R()}).catch(function(ue){}).finally(function(){typeof m=="function"&&m()})}};(0,a.useEffect)(function(){E()},[]);var xe=function(){d.productId&&B(!0)},de=function(p,P){u(function(W){return i()(i()({},W),{},r()({},P,p))})},he=function(){var S=pe()(ee()().mark(function p(){return ee()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:(0,K.NF)(d.productId).then(function(le){var b=JSON.parse(le.paramDetail)[0]||[];Q(JSON.stringify(b)==="{}"||!(b!=null&&b.parameters)?[]:b==null?void 0:b.parameters)}).catch(function(le){}).finally();case 1:case"end":return W.stop()}},p)}));return function(){return S.apply(this,arguments)}}();(0,a.useEffect)(function(){d.productId&&he()},[d.productId]);var De={loadName:"",productId:"",realDataInput:""},be=[{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"loadName",render:function(){return(0,t.jsx)(_e.Z,{value:d.loadName,onChange:function(P){return de(P.target.value,"loadName")},id:"loadName",name:"loadName",maxLength:30,style:{marginTop:"-5px"},className:"w-full mb-[20px] px-5 border border-[#DDDDDD]  h-[40px]  bg-[#F8F8F8] rounded-lg"})}},{label:"\u4EA7\u54C1\u7CFB\u7EDF",dataIndex:"productId",render:function(){return(0,t.jsx)(ye.default,{value:d.productId,style:{height:"40px",borderColor:"#DDDDDD",backgroundColor:"#F8F8F8",width:"100%",marginTop:"-5px"},onChange:function(P){return de(P,"productId")},options:(0,V.ry)("name","id",oe)})}},{label:"\u5B9E\u666F\u6570\u636E\u586B\u62A5",dataIndex:"realDataInput",render:function(){return(0,t.jsx)(Ie.Z,{onClick:function(){return xe()},btnText:"\u524D\u5F80\u586B\u5199",prohibit:!d.productId})}}];return I?null:(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(ie.u_,{className:"rounded-lg",containerClassName:"mx-5 w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",title:"\u65B0\u5EFA\u78B3\u8DB3\u8FF9\u7ED3\u679C",onClose:m,line:!0,bottomBtn:(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5 ",children:[(0,t.jsx)(C.u,{size:"large",onClick:m,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"\u53D6\u6D88"}),(0,t.jsx)(C.u,{size:"large",type:"primary",className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:N,disabled:!d.productId||!d.loadName,children:"\u8BA1\u7B97\u78B3\u7ED3\u679C"})]}),children:(0,t.jsx)("div",{className:"mx-5 w-[640px] ",children:(0,t.jsx)(te.Z,{size:"small",options:be,data:De,optionEmptyText:"-",layout:"vertical",column:1,contentStyle:{color:"#999999",fontWeight:"400"},labelStyle:{color:"#000000",fontWeight:"400"}})})}),ne&&(0,t.jsx)(L,{realData:g,tableData:M,realArr:v.lcaParamList,onOpenModal:function(){return B(!1)}})]})},Ce=Ne,J,ge=(J={},r()(J,-1,{color:"text-[red]",text:"\u8BA1\u7B97\u5931\u8D25"}),r()(J,0,{color:"text-[#FF9800]",text:"\u7B49\u5F85\u8BA1\u7B97"}),r()(J,1,{color:"text-green-2",text:"\u67E5\u770B\u7ED3\u679C"}),r()(J,2,{color:"text-blue-600",text:"\u6B63\u5728\u8BA1\u7B97"}),J);function Me(){var ae=(0,a.useState)(1),f=n()(ae,2),m=f[0],R=f[1],h=(0,a.useState)(!1),D=n()(h,2),ne=D[0],B=D[1],re=(0,a.useState)(!1),$=n()(re,2),oe=$[0],H=$[1],c=(0,a.useRef)({inputData:"",data:""}),o=function(s){var l=s.param,I=s.paramDetail;c.current={inputData:l,data:I},H(!0)},v=(0,a.useMemo)(function(){return[{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"loadName",width:180,ellipsis:!0},{title:"\u5B9E\u666F\u6570\u636E",valueType:"option",width:120,render:function(s,l){return[(0,t.jsx)("div",{className:"flex justify-center whitespace-nowrap px-2.5 bg-[#F1F1F1] rounded",onClick:function(){return o(l)},children:(0,t.jsx)("span",{className:"cursor-pointer",children:"\u67E5\u770B\u5B9E\u666F\u6570\u636E"})},"key_look_real")]}},{title:"\u6279\u6B21\u7ED3\u679CID",dataIndex:"loadNumber",width:170,renderText:A.zL},{title:"\u4EA7\u54C1\u7CFB\u7EDF\u540D\u79F0",width:128,dataIndex:"productName",ellipsis:!0},{title:"\u7CFB\u7EDF\u4EA7\u54C1ID",dataIndex:"productUuid",width:170,renderText:A.zL},{title:"\u63CF\u8FF0",dataIndex:"productDescription",width:200,ellipsis:!0},{title:"\u64CD\u4F5C\u4EBA",dataIndex:"operator",width:100,ellipsis:!0},{title:"\u751F\u6210\u65F6\u95F4",dataIndex:"calculateSuccessTime",valueType:"dateTime",width:180},{title:"\u78B3\u8DB3\u8FF9\u7ED3\u679C",dataIndex:"state",width:130,render:function(s,l){var I,Z;return(0,t.jsx)("div",{className:G()({"cursor-pointer":l.state===1},(I=ge[l.state])===null||I===void 0?void 0:I.color),onClick:function(){l.state===1&&q.history.push("/main/tools/inventory/result?id=".concat(l.loadNumber))},children:(Z=ge[l.state])===null||Z===void 0?void 0:Z.text})}},{title:"\u7EC4\u7EC7\u540D\u79F0",dataIndex:"orgName",width:130,ellipsis:!0},{title:"\u7EC4\u7EC7\u7F16\u53F7",dataIndex:"orgSerialNumber",width:130,ellipsis:!0}]},[]),g=(0,O.cc)(m,1e4),y=g.data,F=g.isLoading,M=g.mutate,Q=(0,a.useMemo)(function(){return((y==null?void 0:y.records)||[]).map(function(u,s){return i()(i()({},u),{},{key:"key_inventory_"+s})})},[y]),z=(0,me.b)(),X=(0,a.useMemo)(function(){return[{title:"\u53C2\u6570\u540D",dataIndex:"name",ellipsis:!0,width:200},{title:"\u8FC7\u7A0B\u540D\u79F0",dataIndex:"uuid",width:170},{title:"\u53C2\u8003\u503C",dataIndex:"optName",width:100},{title:"\u8F93\u5165\u503C",dataIndex:"inputData",width:100}]},[]),d=(0,a.useMemo)(function(){var u;if(!c.current)return[];var s=(0,V.OA)(c.current.data)||[],l=c.current.inputData,I=c.current.inputData?_.mapKeys(typeof l=="string"?(0,V.OA)(l)||[]:l,function(E){return E.paramName}):{},Z=((u=s[0])===null||u===void 0?void 0:u.parameters)||[];return Z.map(function(E){var N;return[E.name,E.context.name,E.value,((N=I[E.name])===null||N===void 0?void 0:N.paramValue)||""]}).map(function(E){var N=n()(E,4),xe=N[0],de=N[1],he=N[2],De=N[3];return{name:xe,uuid:de,optName:he.toString(),inputData:De}})},[c.current]);return(0,t.jsxs)(Y.Z,{title:"\u6211\u7684\u4EA7\u54C1\u78B3\u8DB3\u8FF9\u7ED3\u679C",extra:z?[(0,t.jsx)(C.u,{onClick:function(){return B(!0)},children:"\u65B0\u5EFA\u78B3\u8DB3\u8FF9\u7ED3\u679C"},"new_inventory")]:[],children:[(0,t.jsx)("div",{className:"bg-white",children:(0,t.jsx)(A.ZP,{columns:v,dataSource:Q,loading:F,pagination:{pageSize:10,total:(y==null?void 0:y.total)||0,current:m,onChange:function(s){R(s)}}})}),ne&&(0,t.jsx)(Ce,{openResultModal:function(){return B(!1)},getList:function(){R(1),m===1&&M()}}),oe&&(0,t.jsx)(k.d,{isShow:!0,header:X,data:d,onClose:function(){return H(!1)}})]})}var Se=Me,Pe=function(){var ae=(0,q.useLocation)(),f=ae.pathname;return console.info("inventoryPage:",f),f!=="/main/tools/inventory"?(0,t.jsx)(q.Outlet,{}):(0,t.jsx)(Se,{})}}}]);

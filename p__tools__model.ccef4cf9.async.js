"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3942],{51111:function(_e,w,a){var W=a(86378),x=a.n(W),D=a(28488),E=a.n(D),j=a(4692),l=a(43250),f=a(84875),r=a.n(f),h=a(11527),v=["className"];function P(T){var z=T.className,oe=E()(T,v),y=(0,l.l)(function(e){var o=e.token;return{".ant-page-header":{padding:"1rem 1.5rem",backgroundColor:o.colorBgBase,".ant-breadcrumb":{fontSize:".875rem",marginBottom:"0.5rem"},".ant-page-header-heading-title":{fontSize:"1.25rem"}},".ant-pro-grid-content":{padding:"1.5rem",backgroundColor:"transparent",".ant-pro-page-container-children-content":{padding:0,paddingBlock:"0 !important"}}}});return(0,h.jsx)(j._z,x()({className:r()(z,y)},oe))}w.Z=P},67454:function(_e,w,a){a.d(w,{u:function(){return oe},z:function(){return z}});var W=a(24047),x=a.n(W),D=a(86378),E=a.n(D),j=a(28488),l=a.n(j),f=a(84875),r=a.n(f),h=a(9751),v=a(11527),P=["children","className"],T=["busy","disabled","className","defStyle","children"];function z(y){var e=y.children,o=y.className,H=l()(y,P);return(0,v.jsx)("button",E()(E()({},H),{},{className:r()(o),children:y.children}))}function oe(y){var e,o=y.busy,H=y.disabled,de=y.className,p=y.defStyle,Z=p===void 0?"btn-primary":p,U=y.children,ae=l()(y,T);return(0,v.jsx)("button",E()(E()({className:r()(de,(e={},x()(e,Z,!H),x()(e,"btn-disable",H),e))},ae),{},{children:o?(0,v.jsx)(h.fCD,{className:"animate-spin"}):U}))}},33875:function(_e,w,a){a.d(w,{E:function(){return E},K:function(){return j}});var W=a(84875),x=a.n(W),D=a(11527);function E(l){var f=l.value,r=l.bg,h=r===void 0?"#dddddd":r,v=l.color,P=v===void 0?"#29953A":v,T=l.className;return(0,D.jsx)("div",{className:x()(T,"w-full h-[10px]"),style:{background:h},children:(0,D.jsx)("div",{style:{width:"".concat(f,"%"),transition:"width 200ms ease",background:P},className:"h-full"})})}function j(l){var f=l.index,r=l.full,h=l.bg,v=h===void 0?"#dddddd":h,P=l.color,T=P===void 0?"#29953A":P,z=l.className;return(0,D.jsx)("div",{className:x()(z,"w-full h-[10px]"),style:{background:v},children:(0,D.jsx)("div",{style:{marginLeft:r?"0":"".concat(f*25,"%"),width:r?"100%":"25%",background:T},className:"h-full"})})}},51500:function(_e,w,a){a.d(w,{i:function(){return H}});var W=a(24047),x=a.n(W),D=a(90967),E=a.n(D),j=a(86378),l=a.n(j),f=a(30577),r=a.n(f),h=a(9107),v=a(49372),P=a(84875),T=a.n(P),z=a(50959),oe=a(21262),y=a(57681),e=a(77588),o=a(11527),H=function(p){var Z=p.columns,U=p.data,ae=p.className,he=p.headerClassName,ce=p.size,ee=ce===void 0?"":ce,G=p.maxHeight,te=p.loading,Ie=te===void 0?!1:te,s=p.hiddenHeader,Be=s===void 0?!1:s,me=p.mouseHoverKey,Ne=me===void 0?"":me,pe=p.columnsHeight,xe=pe===void 0?"":pe,Te=p.isSetBorder,ge=Te===void 0?!1:Te,Ze=p.tableId,ta=Ze===void 0?void 0:Ze,na=p.columnsClassName,Ge=p.onChangeColumn,Ye=Ge===void 0?function(t){return t}:Ge,la=(0,z.useState)(U||[]),Je=r()(la,2),A=Je[0],$e=Je[1],ra=(0,z.useState)({}),Ve=r()(ra,2),R=Ve[0],Ae=Ve[1],sa=(0,z.useState)({}),Xe=r()(sa,2),oa=Xe[0],fe=Xe[1],Se=(0,z.useRef)(null);(0,e.Z)(Se,function(){for(var t in R)R[t]&&(R[t].isFilterOpen=!1,Ae(l()({},R)))}),(0,z.useEffect)(function(){$e(U)},[U]),(0,z.useEffect)(function(){Z.forEach(function(t){if(t.filterOptions){var c;R[t.dataIndex]={isFilterOpen:!1,filterValueIndex:((c=R[t.dataIndex])===null||c===void 0?void 0:c.filterValueIndex)>-1?R[t.dataIndex].filterValueIndex:-1}}}),Ae(R)},[Z]);var b=function(c){if(A[c].level===void 0&&(A[c].level=0),A[c].children.forEach(function(Y){Y.level=A[c].level+1}),A[c].open=!A[c].open,A[c].open)$e(A.slice(0,c+1).concat(A[c].children).concat(A.slice(c+1)));else{var N=A[c].children.length;A[c].children.forEach(function(Y){Y.open&&(Y.open=!1,N+=Y.children.length)}),A.splice(c+1,N),$e(E()(A))}},Qe=function(c,N){Object.assign(R,x()({},c.dataIndex,{filterValueIndex:N,isFilterOpen:!1})),c.onFilterChange&&c.onFilterChange(N>-1?c.filterOptions[N]:null),Ae(R)},qe=function(c){R[c.dataIndex].isFilterOpen=!R[c.dataIndex].isFilterOpen,Ae(l()({},R))};return(0,o.jsxs)("div",{className:T()("w-full",ae,ee==="small"&&"text-xs",ee==="big"&&"text-lg mo:text-[.9375rem] "),children:[(0,o.jsxs)("table",{border:1,cellSpacing:0,className:"w-full text-left ",id:ta,children:[!Be&&(0,o.jsx)("thead",{className:T()("bg-gray-14 ",{"border bg-[#E5E5E5]":ge},ae,ee==="small"&&"text-sm"),style:he,children:(0,o.jsx)("tr",{className:"px-3",children:Z&&Z.map(function(t,c){var N;return(0,o.jsxs)("th",{style:{width:t.width?t.width:"auto"},className:T()("px-3 relative break-keep",c===0&&" ".concat(!ge&&"rounded-l"||""," overflow-hidden"),c===Z.length-1&&"".concat(!ge&&"rounded-r"||""," overflow-hidden"),v.NO[ee]||"py-2"),children:[!!t.tip&&(0,o.jsx)(y.gL9,{"data-tooltip-id":"tooltip","data-tooltip-content":t.tip,className:"inline-block text-xl mt-[-0.15rem] mr-1"}),(0,o.jsx)("span",{children:t.title}),!!R[t.dataIndex]&&(0,o.jsxs)("div",{className:"inline-block",ref:Se,children:[(0,o.jsx)(oe.Ihx,{color:((N=R[t.dataIndex])===null||N===void 0?void 0:N.filterValueIndex)>-1?"#29953A":"",onClick:function(){qe(t)},className:"inline-block text-xl mt-[-0.15rem] ml-1 cursor-pointer"}),R[t.dataIndex].isFilterOpen&&(0,o.jsx)("div",{className:"absolute left-0 font-normal top-10",children:(0,o.jsxs)("ul",{className:"bg-white w-[12.375rem] max-h-[14.875rem] overflow-auto text-sm rounded-lg py-3",style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)"},children:[(0,o.jsx)("li",{className:T()("py-2.5 px-5 hover:bg-[#F3F3F3] cursor-pointer",R[t.dataIndex].filterValueIndex===-1&&"text-green-2"),onClick:function(){Qe(t,-1)},children:"All"}),t.filterOptions.map(function(Y,Ee){return(0,o.jsx)("li",{onClick:function(){Qe(t,Ee)},className:T()("py-1.5 hover:bg-[#F3F3F3] px-5 break-all cursor-pointer",R[t.dataIndex].filterValueIndex===Ee?"text-green-2":""),children:Y.text},"productList".concat(Ee))})]})})]})]},"columns".concat(c))})})}),!Ie&&(0,o.jsx)("tbody",{style:{maxHeight:G},className:"w-full overflow-y-auto ",children:A.map(function(t,c){return(0,o.jsx)("tr",{className:" column-level-".concat(t.level?t.level:0," ").concat(xe," "),children:Z.map(function(N,Y){return(0,o.jsx)("td",{className:T()(na,"px-3  ",{"bg-[#F3F3F3]":oa[Ne]===t[Ne]&&Ne,border:ge},v.NO[ee]||"py-2",!!N.tip&&"pl-9"),style:{width:N.width?N.width:"auto"},children:(0,o.jsxs)("div",{onMouseOver:function(){return fe(t)},onClick:function(){return typeof Ye=="function"?Ye(t):void 0},className:"flex items-center ",style:{marginLeft:(t.level&&Y===0?t.level:0)*1.25+"rem"},children:[!!(t!=null&&t.children)&&(t==null?void 0:t.children.length)>0&&Y===0&&(0,o.jsx)(oe.Tfp,{onClick:function(){return b(c)},className:T()("mr-2 cursor-pointer text-gray-9",t.open&&"rotate-[90deg]")}),N.render?N.render(t[N.dataIndex],t):N.emptyText&&!t[N.dataIndex]?"-":t[N.dataIndex]]})},"data_column_".concat(Y))})},"table_data_".concat(c))})})]}),Ie?(0,o.jsx)(h.g,{className:"pt-8"}):!(A&&A.length>0)&&(0,o.jsx)("div",{className:"flex justify-center w-full py-20",children:"\u65E0\u6570\u636E"})]})}},10225:function(_e,w,a){a.d(w,{d:function(){return y}});var W=a(86378),x=a.n(W),D=a(28488),E=a.n(D),j=a(72121),l=a(50959),f=a(11527);function r(){return(0,f.jsx)("tr",{className:"text-lg font-normal text-center text-black ",children:(0,f.jsx)("td",{colSpan:100,className:"h-[100px] py-5 align-top",children:"\u65E0\u6570\u636E"})})}var h=function(o){var H=o.header,de=o.data,p=o.empty,Z=p===void 0?(0,f.jsx)(r,{}):p,U=o.className,ae=U===void 0?"relative min-w-full bg-neutral-200 ":U,he=o.headerClassName,ce=he===void 0?"bg-neutral-200 sticky top-0 text-left text-black text-lg font-bold leading-[27px]":he,ee=o.headerItemClassName,G=ee===void 0?"p-3":ee,te=o.tbodyClassName,Ie=te===void 0?"bg-white ":te,s=o.rowClassName,Be=s===void 0?"text-black text-sm font-normal whitespace-nowrap":s,me=o.cellClassName,Ne=me===void 0?"p-3":me;return(0,f.jsxs)("table",{className:ae,children:[(0,f.jsx)("thead",{children:(0,f.jsx)("tr",{className:ce,children:H.map(function(pe,xe){return(0,f.jsx)("th",{scope:"col",className:G,children:pe},xe)})})}),(0,f.jsxs)("tbody",{className:Ie,children:[de.map(function(pe,xe){return(0,f.jsx)("tr",{className:Be,children:pe.map(function(Te,ge){return(0,f.jsx)("td",{className:Ne,children:Te},ge)})},xe)}),de.length===0&&Z]})]})},v=h,P=a(14803),T=a(32699),z=a.n(T),oe=["data","inputData","header"];function y(e){var o=e.data,H=e.inputData,de=e.header,p=de===void 0?["\u53C2\u6570\u540D","\u8FC7\u7A0B\u540D\u79F0","\u53C2\u8003\u503C","\u8F93\u5165\u503C"]:de,Z=E()(e,oe),U=(0,l.useMemo)(function(){var ae;if(!o)return[];var he=H?z().mapKeys(typeof H=="string"?(0,P.OA)(H)||[]:H,function(G){return G.paramName}):{},ce=(0,P.OA)(o)||[],ee=((ae=ce[0])===null||ae===void 0?void 0:ae.parameters)||[];return ee.map(function(G){var te;return[G.name,G.context.name,G.value,((te=he[G.name])===null||te===void 0?void 0:te.paramValue)||""]})},[o,H]);return(0,f.jsx)(j.u_,x()(x()({title:"\u5B9E\u666F\u6570\u636E"},Z),{},{children:(0,f.jsx)("div",{className:"w-[40rem] px-5 max-h-mc overflow-y-auto",children:(0,f.jsx)(v,{data:U,header:p})})}))}},60084:function(_e,w,a){a.d(w,{H4:function(){return j},Kv:function(){return E},Tz:function(){return f},We:function(){return l},uU:function(){return r}});var W=a(32699),x=a.n(W),D=a(88297);function E(h){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,D.ZP)("/api/product-system/".concat(h,"/detail"),{refreshInterval:v})}function j(h){return(0,D.ZP)(x().isNil(h)?null:"/api/verifyRecord/".concat(h,"/detail"))}function l(h){return(0,D.ZP)(h?"/api/inventory/all":null)}function f(h){return(0,D.ZP)(h?"/api/verifyRecord/verifiers":null)}function r(h){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,D.ZP)("/api/product-system/list/?pageNum=".concat(h,"&pageSize=10"),{refreshInterval:v})}},81609:function(_e,w,a){a.d(w,{b:function(){return D},n:function(){return x}});var W=a(35888);function x(){var E=(0,W.oR)(),j=E.userData,l=E.inited;return l&&(j==null?void 0:j.role)==="verify"}function D(){var E=(0,W.oR)(),j=E.userData,l=E.inited;return l&&(j==null?void 0:j.role)!=="verify"}},67275:function(_e,w,a){a.d(w,{n:function(){return E},s:function(){return D}});var W=a(32699),x=a.n(W);function D(j){var l=x().groupBy(j,"flowId"),f=function r(h){h.forEach(function(v){if(v._child||(v._child=(v.childFlowIds||[]).map(function(T){return l[T][0]}),r(v._child)),v._child.length===0)v._depth=0;else{var P;v._depth=(((P=x().maxBy(v._child,"_depth"))===null||P===void 0?void 0:P._depth)||0)+1}})};f(j)}var E=function(l,f){var r=typeof l=="string"?[l]:l;return!!x().find(r,function(h){return h.startsWith(f)})}},83401:function(_e,w,a){a.r(w),a.d(w,{default:function(){return ma}});var W=a(58357),x=a.n(W),D=a(71977),E=a.n(D),j=a(86378),l=a.n(j),f=a(30577),r=a.n(f),h=a(51111),v=a(28488),P=a.n(v),T=a(75256),z=a(43250),oe=a(84875),y=a.n(oe),e=a(11527),o=["className"];function H(n){var u=n.className,i=P()(n,o),m=(0,z.l)(function(M){var g=M.token;return{".ant-pro-card-body":{paddingInline:0,paddingBlock:0}}});return(0,e.jsx)(T.Z,l()({search:!1,options:!1,rowKey:"key",className:y()(u,"p-6",m)},i))}var de=null,p=a(67454),Z=a(9107),U=a(72121),ae=a(51500),he=a(35888),ce=a(60084),ee=a(81609),G=a(14803),te=a(32699),Ie=a.n(te),s=a(50959),Be=a(99592),me=a(10225),Ne=a(90967),pe=a.n(Ne),xe=a(27846),Te=a(30161),ge=a(60904),Ze=a(45393),ta=a.n(Ze),na={startOnLoad:!0,theme:"default",logLevel:"fatal",securityLevel:"strict",arrowMarkerAbsolute:!1,flowchart:{htmlLabels:!0},themeVariables:{},sequence:{diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:800,height:200,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,mirrorActors:!0,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,wrapPadding:20},gantt:{titleTopMargin:25,barHeight:16,barGap:4,topPadding:50,leftPadding:75,gridLineStartPadding:35,fontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d"},class:{titleTopMargin:20,defaultRenderer:"dagre-wrapper"},pie:{}},Ge={count:1};function Ye(n){var u=n.className,i=n.data,m=i===void 0?"":i,M=(0,s.useMemo)(function(){return"aicp_mermaid_".concat(Ge.count++)},[]),g=function(){var B=E()(x()().mark(function L(){var q,F,C,O,I;return x()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(_.prev=0,q=document.querySelector("#"+M),q){_.next=4;break}return _.abrupt("return");case 4:return xe.N.initialize(na),_.next=7,xe.N.render(M+"-svg",m);case 7:if(F=_.sent,C=F.svg,O=F.bindFunctions,q.innerHTML=C,O==null||O(q),I=document.getElementById(M+"-svg"),I){_.next=15;break}return _.abrupt("return");case 15:I.setAttribute("height","100%"),I.style.maxWidth="100%",ta()(I,{mouseWheelZoomEnabled:!1,zoomEnabled:!0,controlIconsEnabled:!0}),_.next=23;break;case 20:_.prev=20,_.t0=_.catch(0),console.error(_.t0);case 23:case"end":return _.stop()}},L,null,[[0,20]])}));return function(){return B.apply(this,arguments)}}(),Q=(0,Te.Z)(),k=r()(Q,2),K=k[0],d=k[1].width;return(0,ge.Z)(g,300,[d,m]),(0,e.jsx)("div",{ref:K,id:M,className:y()("mermaid p-2.5",u)})}var la=Ye,Je=la,A=a(67275),$e=["onClose"],ra=function(u){var i=u.onClose,m=P()(u,$e),M=m.modelBomInfo,g=M===void 0?"":M,Q=g&&JSON.parse(g),k=function(C,O){var I=(0,A.n)(C.tagType,"REFERENCE"),J=(0,A.n)(O.tagType,"REFERENCE");return I&&!J?-1:!I&&J?1:0},K=(Q||[]).sort(k),d=[],B=`graph TD
`;(K||[]).forEach(function(F,C){var O=F.flowName,I=F.childFlowIds;B+="".concat(C+1,'["').concat(O,`"]
`),d.push("style ".concat(C+1,` color:black,fill:#F1F1F1,stroke:black
`)),I&&I.length>0&&I.forEach(function(J){var _=K.findIndex(function(ue){return ue.flowId===J});_!==-1&&(B+="".concat(_+1," --> ").concat(C+1,`
`),d.push("style ".concat(_+1,` color:black,fill:#F1F1F1,stroke:black
`)))})});var L=pe()(new Set(d||[])).toString().replace(/,style/g," style"),q="".concat(B,`
`).concat(L);return(0,e.jsx)(U.u_,l()(l()({},m),{},{title:"\u67E5\u770BBOM\u4FE1\u606F",onClose:i,children:(0,e.jsx)("div",{className:"flex flex-col gap-5 w-full min-w-[40rem] overflow-hidden",children:(0,e.jsxs)("div",{className:"flex flex-col gap-5 w-full flex-1 max-h-mc px-5 py-[1px] overflow-y-auto",children:[(0,e.jsx)(b,{tit:"BOM\u7ED3\u6784",value:(0,e.jsx)(Je,{data:q,className:"flex justify-center w-[800px] h-[200px] bg-[#F1F1F1]"})}),(0,e.jsx)(b,{tit:"Part Number\u4FE1\u606F",value:null}),(K||[]).map(function(F,C){return(0,e.jsxs)("div",{className:"flex flex-row gap-10 p-0",children:[(0,e.jsx)("div",{className:"w-[200px] text-base text-[#666666] ",children:F.flowName}),(0,e.jsx)("div",{className:"flex flex-wrap flex-shrink w-[30rem] items-center",children:((F==null?void 0:F.partNumbers)||[]).map(function(O,I){return(0,e.jsx)("div",{className:"flex max-w-lg items-center bg-[#F1F1F1] h-6 mb-[10px] rounded ml-5",children:(0,e.jsxs)("div",{className:" w-full mx-[10px] items-center font-normal","data-tooltip-id":"tooltip","data-tooltip-content":(0,G.iT)(O,10),children:["PN : ",(0,G.lS)(O,8,8)]})},"value_".concat(I))})})]},"info_".concat(C))})]})})}))},Ve=ra,R=["ps"];function Ae(n){var u,i,m,M,g=n.ps,Q=P()(n,R),k=(0,Be.Z)(!1),K=r()(k,2),d=K[0],B=K[1];return(0,e.jsxs)(U.u_,l()(l()({title:g.name},Q),{},{children:[(0,e.jsxs)("div",{className:"flex flex-col gap-5 w-full min-w-[40rem] px-5 py-[1px] max-h-mc overflow-y-auto",children:[(0,e.jsx)(b,{tit:"UID",value:g.uuid||"-"}),(0,e.jsx)(b,{tit:"\u7248\u672C",value:g.version||"-"}),(0,e.jsx)(b,{tit:"\u63CF\u8FF0",value:g.description||"-"}),(0,e.jsx)(b,{tit:"\u72B6\u6001",value:(0,e.jsx)(oa,{status:g.state})}),(0,e.jsx)(b,{tit:"\u53D8\u66F4\u4EBA",value:((u=g.updateUser)===null||u===void 0?void 0:u.name)||"-"}),(0,e.jsx)(b,{tit:"\u4EA7\u54C1\u7CFB\u7EDFLCA\u6587\u4EF6",value:(0,e.jsx)(Se,{modelId:(i=g.model)===null||i===void 0?void 0:i.id,modelStatus:(m=g.model)===null||m===void 0?void 0:m.state,isRead:!0})}),(0,e.jsx)(b,{tit:"\u5B9E\u666F\u53C2\u6570\u5217\u8868",value:(0,e.jsx)(fe,{action:"\u67E5\u770B",onClick:function(){return B(!0)}})}),(0,e.jsx)(qe,{organization:g.org})]}),d&&(0,e.jsx)(me.d,{data:(M=g.model)===null||M===void 0?void 0:M.paramDetail,onClose:function(){return B(!1)}})]}))}var sa=["defaultValue"],Xe=["psId","onSuccess"];function oa(n){var u=n.status;return Ie().isNil(u)?(0,e.jsx)("div",{className:"text-base font-normal leading-none text-neutral-400",children:"\u8349\u7A3F"}):(0,e.jsx)("div",{className:y()("w-min whitespace-nowrap h-6 px-2.5 py-1 bg-opacity-10 rounded justify-start items-center gap-2.5 inline-flex",{"bg-rose-500":u!==1,"bg-green-600":u===1}),children:(0,e.jsx)("div",{className:y()("text-green-600 text-base font-normal leading-none",{"text-rose-500":u!==1,"text-green-600":u===1}),children:u===1?"\u5F53\u524D\u4F7F\u7528":"\u8FC7\u53BB\u7248\u672C"})})}function fe(n){var u=n.action,i=n.onClick,m=n.to;return m?(0,e.jsx)("a",{href:m,className:"w-min whitespace-nowrap h-6 px-2.5 py-1 bg-zinc-100 rounded text-black text-base font-normal leading-none",children:u}):(0,e.jsx)("div",{className:"w-min whitespace-nowrap h-6 px-2.5 py-1 bg-zinc-100 rounded justify-start items-center gap-2.5 inline-flex cursor-pointer",onClick:i,children:(0,e.jsx)("div",{className:"text-base font-normal leading-none text-black",children:u})})}function Se(n){var u=n.psId,i=n.disableSelectFile,m=i===void 0?!1:i,M=n.openNewTab,g=M===void 0?!1:M,Q=n.hiddenUpdate,k=n.modelId,K=n.isNew,d=n.isRead,B=n.modelStatus,L=n.file,q=n.onFileChange,F=n.btnText,C=F===void 0?"\u4E0A\u4F20\u6A21\u578B":F,O=(0,s.useRef)(null),I=function(){return B!==1?(0,e.jsx)("div",{className:"text-base font-normal leading-none text-amber-500",children:"\u7B49\u5F85\u89E3\u6790"}):(0,e.jsx)(fe,{onClick:function(){return g?window.open("/model?id=".concat(k),"_blank"):void 0},to:g?void 0:"/model?id=".concat(k),action:"\u5728\u7EBF\u67E5\u770B"})},J=function(ue){var Ce;!m&&((Ce=O.current)===null||Ce===void 0||Ce.click())};return(0,e.jsxs)("div",{className:"text-neutral-400 text-base font-normal leading-none flex items-center gap-2.5",children:[(0,e.jsx)("input",{ref:O,type:"file",hidden:!0,accept:".zip",onChange:q}),!d&&(0,G.lS)(L==null?void 0:L.name,10,10),d?I():K?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(fe,{action:C,onClick:J})}):(0,e.jsx)(e.Fragment,{children:!L&&I()})]})}function b(n){var u=typeof n.value=="string"||typeof n.value=="number";return(0,e.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,e.jsxs)("div",{className:"text-base font-normal leading-normal text-black",children:[n.tit,": "]}),u?(0,e.jsx)("div",{className:"text-base font-normal leading-none text-neutral-400",children:n.value}):n.value]})}function Qe(n){var u=n.defaultValue,i=P()(n,sa);return(0,e.jsx)("input",l()({type:"text",className:"w-full px-5 py-[15px] bg-gray-28 rounded-lg border border-neutral-200 justify-start items-start gap-2.5 inline-flex text-black text-base font-normal leading-none"},i))}function qe(n){var u=(0,he.oR)(),i=u.userData,m=n.organization||(i==null?void 0:i.organization);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(b,{tit:"\u7EC4\u7EC7\u540D\u79F0",value:(m==null?void 0:m.name)||"-"}),(0,e.jsx)(b,{tit:"\u7EC4\u7EC7\u7F16\u53F7",value:(m==null?void 0:m.serialNumber)||"-"})]})}function t(n){var u,i,m,M,g=n.psId,Q=n.onSuccess,k=P()(n,Xe),K=(0,ce.Kv)(g,6e4),d=K.data,B=K.isLoading,L=K.error,q=(0,s.useState)(""),F=r()(q,2),C=F[0],O=F[1],I=(0,s.useRef)(!0);(0,s.useEffect)(function(){d&&I.current&&(O(d.description||""),I.current=!1)},[d]),(0,s.useEffect)(function(){L&&k.onClose&&k.onClose()},[L]);var J=(0,s.useState)(!1),_=r()(J,2),ue=_[0],Ce=_[1],De=(0,s.useState)(null),ve=r()(De,2),Re=ve[0],Le=ve[1],we=(0,s.useState)(!1),Pe=r()(we,2),ke=Pe[0],ie=Pe[1],ne=(0,s.useCallback)(function($){var le;Le((le=$.target.files)===null||le===void 0?void 0:le.item(0))},[]),We=(0,Be.Z)(!1),X=r()(We,2),ze=X[0],ye=X[1],Me=(0,s.useState)(),Ue=r()(Me,2),je=Ue[0],He=Ue[1],S=(0,ee.n)();return(0,e.jsxs)(U.u_,l()(l()({},k),{},{children:[B&&!d&&(0,e.jsx)(Z.g,{className:"min-h-[100px]"}),d&&(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"flex flex-col gap-5  w-full min-w-[40rem] px-5 py-[1px] max-h-mc overflow-y-auto",children:[(0,e.jsx)(b,{tit:"\u4EA7\u54C1\u7CFB\u7EDFID",value:d.uuid||"-"}),(0,e.jsx)(b,{tit:"\u63CF\u8FF0",value:(0,e.jsx)("div",{className:" break-words max-w-[40rem] flex-wrap text-[16px] font-normal text-[#999999]",children:C||"-"})}),(0,e.jsx)(b,{tit:"\u64CD\u4F5C\u4EBA",value:d.updateUser.name||"-"}),(0,e.jsx)(b,{tit:"BOM\u4FE1\u606F",value:(0,e.jsx)(fe,{action:"\u67E5\u770B",onClick:function(){return ie(!0)}})}),(0,e.jsx)(b,{tit:"\u5B9E\u666F\u53C2\u6570\u5217\u8868",value:(0,e.jsx)(fe,{action:"\u67E5\u770B",onClick:function(){return ye(!0)}})}),(0,e.jsx)(b,{tit:"\u4EA7\u54C1\u7CFB\u7EDFLCA\u6587\u4EF6",value:(0,e.jsx)(Se,{modelId:(u=d.model)===null||u===void 0?void 0:u.id,disableSelectFile:ue,modelStatus:(i=d.model)===null||i===void 0?void 0:i.state,hiddenUpdate:S,file:Re,onFileChange:ne})}),(0,e.jsx)(qe,{organization:d==null?void 0:d.org})]})}),ze&&(0,e.jsx)(me.d,{header:["\u53C2\u6570\u540D","\u8FC7\u7A0B\u540D\u79F0","\u53C2\u8003\u503C"],data:d==null||(m=d.model)===null||m===void 0?void 0:m.paramDetail,onClose:function(){return ye(!1)}}),je&&(0,e.jsx)(Ae,{onClose:function(){return He(void 0)},ps:je}),ke&&(0,e.jsx)(Ve,{modelBomInfo:d==null||(M=d.model)===null||M===void 0?void 0:M.modelBomInfo,onClose:function(){return ie(!1)}})]}))}var c=a(1267),N=a(97707),Y=a(33875),Ee=a(85295),ua=["onSuccess","onClose"];function ia(n){var u=n.onSuccess,i=n.onClose,m=P()(n,ua),M=(0,s.useState)(""),g=r()(M,2),Q=g[0],k=g[1],K=(0,s.useState)(!1),d=r()(K,2),B=d[0],L=d[1],q=(0,s.useState)(0),F=r()(q,2),C=F[0],O=F[1],I=(0,s.useState)(null),J=r()(I,2),_=J[0],ue=J[1],Ce=(0,s.useState)("upload"),De=r()(Ce,2),ve=De[0],Re=De[1],Le=!_,we=(0,s.useState)(""),Pe=r()(we,2),ke=Pe[0],ie=Pe[1],ne=(0,s.useState)({id:0,modelBomInfo:"",paramDetail:"",modelName:""}),We=r()(ne,2),X=We[0],ze=We[1],ye=(0,s.useState)(!1),Me=r()(ye,2),Ue=Me[0],je=Me[1],He=(0,s.useState)(!1),S=r()(He,2),$=S[0],le=S[1],Fe=(0,s.useCallback)(function(V){var re;ue((re=V.target.files)===null||re===void 0?void 0:re.item(0))},[]),ea=(0,s.useRef)(),be=(0,s.useCallback)(function(){var V;(V=ea.current)===null||V===void 0||V.abort(),i&&i()},[i]),aa=function(){L(!1),O(0),ie("")},fa=(0,Ee.o)(),va=function(){var V=E()(x()().mark(function re(Ke){var Oe;return x()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:ie("\u6A21\u578B\u89E3\u6790\u4E2D......");case 1:return se.next=4,(0,G._v)(5e3);case 4:if(fa.current){se.next=6;break}return se.abrupt("return");case 6:return se.next=8,(0,N.Yp)(Ke).catch(function(){});case 8:if(Oe=se.sent,O(function(pa){return Math.min(pa+10,100)}),!(Oe&&Oe.state===1&&Oe.modelBomInfo)){se.next=12;break}return se.abrupt("return",Oe);case 12:se.next=1;break;case 14:case"end":return se.stop()}},re)}));return function(Ke){return V.apply(this,arguments)}}(),_a=function(){ie("\u6B63\u5728\u4E0A\u4F20......");var re=new FormData;re.append("file",_),ea.current=new AbortController,(0,N.av)(re,{signal:ea.current.signal,onUploadProgress:function(Oe){O(Math.min(Math.round((Oe.progress||0)*100),60))}}).then(va).then(function(Ke){Ke&&(ze(Ke),Re("add"),aa())}).catch(function(){aa()})},ha=(0,c.R)(function(){if(!Le)if(ve==="upload"){if(B)return;L(!0),_a()}else(0,N.bc)({name:X.modelName,description:Q,modelId:X.id}).then(function(){u&&u(),be()}).catch(function(V){console.log("err",V)})});return(0,e.jsxs)(s.Fragment,{children:[(0,e.jsx)(U.u_,l()(l()({},m),{},{title:"\u65B0\u5EFA\u4EA7\u54C1\u7CFB\u7EDF",onClose:function(){be(),aa()},children:(0,e.jsxs)("div",{className:"flex flex-col gap-5 w-full min-w-[40rem] overflow-hidden",children:[(0,e.jsx)("div",{className:y()("flex flex-col w-full flex-1  max-h-mc px-5 py-[1px] overflow-y-auto ".concat(B?"gap-0":"gap-5")),children:B?(0,e.jsxs)(s.Fragment,{children:[(0,e.jsx)("div",{className:"flex justify-center w-full",children:ke}),(0,e.jsx)(Y.E,{value:C,className:"my-5 overflow-hidden rounded-lg"})]}):ve==="upload"?(0,e.jsx)(b,{tit:"\u4EA7\u54C1\u7CFB\u7EDFLCA\u6587\u4EF6",value:(0,e.jsx)(Se,{isNew:!0,disableSelectFile:B,file:_,onFileChange:Fe,btnText:"\u9009\u62E9\u6A21\u578B"})}):(0,e.jsxs)(s.Fragment,{children:[(0,e.jsx)(b,{tit:"\u4EA7\u54C1\u7CFB\u7EDF\u540D\u79F0",value:X==null?void 0:X.modelName}),(0,e.jsx)(b,{tit:"BOM\u4FE1\u606F",value:(0,e.jsx)(fe,{action:"\u67E5\u770B",onClick:function(){return je(!0)}})}),(0,e.jsx)(b,{tit:"\u5B9E\u666F\u53C2\u6570\u5217\u8868",value:(0,e.jsx)(fe,{action:"\u67E5\u770B",onClick:function(){return le(!0)}})}),(0,e.jsx)(b,{tit:"\u4EA7\u54C1\u7CFB\u7EDFLCA\u6587\u4EF6",value:(0,e.jsx)(Se,{modelStatus:B?0:1,modelId:X.id,openNewTab:!0,onFileChange:Fe})}),(0,e.jsx)(b,{tit:"\u63CF\u8FF0",value:(0,e.jsx)(Qe,{maxLength:100,value:Q,onChange:function(re){return k(re.target.value)}})})]})}),(0,e.jsx)("div",{className:"flex flex-shrink-0 w-full gap-5 px-5",children:!B&&(0,e.jsxs)(s.Fragment,{children:[(0,e.jsx)(p.u,{defStyle:"btn-primary-1",className:"flex-1",onClick:function(){be(),aa()},children:"\u53D6\u6D88"}),(0,e.jsx)(p.u,{className:"flex-1",onClick:ha,disabled:Le,children:ve==="upload"?"\u4E0A\u4F20":"\u786E\u5B9A"})]})})]})})),$&&(0,e.jsx)(me.d,{header:["\u53C2\u6570\u540D","\u8FC7\u7A0B\u540D\u79F0","\u53C2\u8003\u503C"],data:X==null?void 0:X.paramDetail,onClose:function(){return le(!1)}}),Ue&&(0,e.jsx)(Ve,l()(l()({},X),{},{onClose:function(){return je(!1)}}))]})}function da(){var n=(0,s.useState)(null),u=r()(n,2),i=u[0],m=u[1],M=(0,s.useState)(null),g=r()(M,2),Q=g[0],k=g[1],K=(0,s.useState)(),d=r()(K,2),B=d[0],L=d[1],q=(0,s.useState)(null),F=r()(q,2),C=F[0],O=F[1],I=(0,s.useState)(!1),J=r()(I,2),_=J[0],ue=J[1],Ce=(0,s.useState)(1),De=r()(Ce,2),ve=De[0],Re=De[1],Le=(0,s.useState)(0),we=r()(Le,2),Pe=we[0],ke=we[1],ie=(0,ce.uU)(ve,1e4),ne=ie.data,We=ie.isLoading,X=ie.mutate,ze=(0,s.useMemo)(function(){return((ne==null?void 0:ne.records)||[]).map(function(S,$){return l()(l()({},S),{},{key:"pl"+$,optName:S.updateUser.name})})},[ne]),ye=(0,s.useMemo)(function(){return[{title:"\u5B9E\u666F\u8F93\u5165\u9879",dataIndex:"context",width:"20%"},{title:"\u8FC7\u7A0B\u540D\u79F0",dataIndex:"parameter",width:"30%"},{title:"\u53C2\u8003\u503C",dataIndex:"amount",width:"20%"},{title:"\u4E0D\u786E\u5B9A\u6027",dataIndex:"uncertainty",emptyText:"-",width:"30%"}]},[]),Me=function(){var S=E()(x()().mark(function $(le){var Fe;return x()().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return Fe="\u66F4\u6539\u72B6\u6001",O({title:Fe,loading:!0}),be.next=4,(0,N.pF)(i.id,le);case 4:ke(Pe+1),O({title:Fe,loading:!1,resultText:"\u64CD\u4F5C\u6210\u529F"}),m(null);case 7:case"end":return be.stop()}},$)}));return function(le){return S.apply(this,arguments)}}(),Ue=(0,ee.b)(),je=function(){Re(1),ve===1&&X()},He=(0,s.useMemo)(function(){return[{title:"\u4EA7\u54C1\u7CFB\u7EDF",dataIndex:"name",ellipsis:!0,copyable:!0},{title:"\u4EA7\u54C1\u7CFB\u7EDFID",dataIndex:"uuid",ellipsis:!0,copyable:!0},{title:"\u64CD\u4F5C\u4EBA",dataIndex:"optName"},{title:"\u63CF\u8FF0",dataIndex:"description",ellipsis:!0,copyable:!0},{title:"\u4E0A\u4F20\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime"},{title:"\u64CD\u4F5C",valueType:"option",render:function($,le){return[(0,e.jsx)("div",{className:"text-green-2 cursor-pointer",onClick:function(){L(le)},children:"\u67E5\u770B"},"key_look")]}}]},[]);return(0,e.jsxs)(h.Z,{title:"\u6211\u7684\u4EA7\u54C1\u7CFB\u7EDF",extra:Ue?[(0,e.jsx)(p.z,{onClick:function(){return ue(!0)},className:y()("w-40 text-lg font-normal text-white rounded bg-green-2 h-11 hover:bg-green-28"),children:"\u65B0\u5EFA\u4EA7\u54C1\u7CFB\u7EDF"},"btn")]:[],children:[(0,e.jsx)("div",{className:"bg-white",children:(0,e.jsx)(H,{columns:He,dataSource:ze,loading:We,pagination:{pageSize:10,total:(ne==null?void 0:ne.total)||0,onChange:function($){Re($)}}})}),i!==null&&(0,e.jsx)(U.u_,{title:"\u66F4\u6539\u72B6\u6001",onClose:function(){return m(null)},children:(0,e.jsx)("div",{className:"flex",children:C!=null&&C.loading?(0,e.jsx)(Z.g,{}):(0,e.jsxs)("div",{className:"flex flex-1",children:[i.state>-2&&(0,e.jsx)(p.z,{onClick:function(){return Me(i.state===1?0:1)},className:"flex-1 w-full text-lg text-white rounded-lg bg-green-2 h-11",children:i.state===1?"\u5F03\u7528":"\u6FC0\u6D3B"}),i.state===-1&&(0,e.jsx)(p.z,{onClick:function(){return Me(-2)},className:"flex-1 w-full ml-5 text-lg border-2 rounded-lg border-green-2 bg-green-2/10 text-green-2 hover:bg-green-2/20 h-11",children:"\u5220\u9664"})]})})}),!!Q&&(0,e.jsx)(U.u_,{title:Q.modelName+"\u6A21\u578B\u4E2D\u7684\u5B9E\u666F\u8F93\u5165\u9879",onClose:function(){return k(null)},children:(0,e.jsxs)("div",{className:"flex w-[60rem] min-h-[16rem] flex-col pb-2",children:[(0,e.jsx)("ul",{className:"flex mb-1",children:ye.map(function(S,$){return(0,e.jsx)("li",{className:"px-3 text-lg font-bold",style:{width:S.width},children:S.title},"columns".concat($))})}),(0,e.jsx)("div",{className:"max-h-[15rem] min-h-[5rem] overflow-y-auto",children:(0,e.jsx)(ae.i,{size:"big",hiddenHeader:!0,columns:ye,data:Q.paramDetail})})]})}),C&&(0,e.jsx)(U.u_,{title:(C==null?void 0:C.title)||"\u64CD\u4F5C",onClose:function(){return O(null)},children:(0,e.jsx)("div",{className:"pb-2 text-center",children:C.loading?(0,e.jsx)(Z.g,{}):(0,e.jsx)("span",{children:C.resultText})})}),_&&(0,e.jsx)(ia,{onClose:function(){return ue(!1)},onSuccess:function(){return je()}}),B&&(0,e.jsx)(t,{psId:B.id,title:B.name,onClose:function(){return L(void 0)},onSuccess:function(){return je()}})]})}var ca=da,ma=ca}}]);

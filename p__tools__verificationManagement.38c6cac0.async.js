"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2941],{64082:function(J,D,e){var C=e(48651),s=e.n(C),d=e(38046),i=e.n(d),T=e(30541),M=e(33421),b=e(68591),P=e.n(b),p=e(63342),E=["className"];function R(f){var a=f.className,c=i()(f,E),o=(0,M.l)(function(r){var g=r.token;return{".ant-page-header":{padding:"1rem 1.5rem",paddingBlock:"1rem !important",paddingInline:"1.5rem !important",backgroundColor:g.colorBgBase,".ant-breadcrumb":{fontSize:".875rem",paddingBlockStart:"0 !important"},".ant-page-header-heading-title":{fontSize:"1.25rem"}},".ant-pro-grid-content":{padding:"1.5rem",backgroundColor:"transparent",".ant-pro-page-container-children-content":{padding:0,paddingBlock:"0 !important"},".ant-pro-page-container-children-container":{paddingBlock:"0 !important",paddingInline:"0 !important"}}}});return(0,p.jsx)(T._z,s()({className:P()(a,o)},c))}D.Z=R},18842:function(J,D,e){e.d(D,{rx:function(){return r},zL:function(){return o}});var C=e(48651),s=e.n(C),d=e(38046),i=e.n(d),T=e(81123),M=e(54695),b=e(33421),P=e(9021),p=e(68591),E=e.n(p),R=e(97207),f=e.n(R),a=e(63342),c=["className","columns"];function o(g){return f().size(g)>=16?(0,a.jsx)(P.Z,{title:g,children:(0,T.lS)(g,8,8)}):g}function r(g){var G=g.className,u=g.columns,$=i()(g,c),B=(0,b.l)(function(y){var te=y.token;return{".ant-table-container":{borderStartStartRadius:"0 !important",borderStartEndRadius:"0 !important"},".ant-pro-card-body":{paddingInline:"0 !important",paddingBlock:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:first-child":{borderStartStartRadius:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:last-child":{borderStartEndRadius:"0 !important"},".ant-pagination-item, .ant-pagination-prev, .ant-pagination-next":{borderRadius:"2px !important",minWidth:"30px !important",height:"30px !important",lineHeight:"28px !important"},".ant-pagination-total-text":{lineHeight:"30px !important",visibility:"hidden"}}}),L=f().sumBy(u,"width");return(0,a.jsx)(M.Z,s()({bordered:!0,columns:u,scroll:{x:L},search:!1,options:!1,rowKey:"key",className:E()(G,"p-6",B)},$))}D.ZP=r},46284:function(J,D,e){var C=e(48651),s=e.n(C),d=e(38046),i=e.n(d),T=e(74589),M=e(79685),b=e(63342),P=["options","data","optionEmptyText","wrapperStyle","hideIfEmpty"],p=["render","dataIndex","show"],E=T.Z.Item,R=function(a){var c=a.options,o=a.data,r=a.optionEmptyText,g=a.wrapperStyle,G=g===void 0?{backroundColor:"red"}:g,u=a.hideIfEmpty,$=i()(a,P);return console.log("wrapperStyle",G),(0,M.useMemo)(function(){return(0,b.jsx)(T.Z,s()(s()({},$),{},{contentStyle:{color:"#999999",fontWeight:"400",fontSize:"14px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"14px"},children:c.map(function(B){var L=B.render,y=B.dataIndex,te=B.show,q=i()(B,p),A="";if(te!==!1&&(console.log("dadatatadatadata",o[y],y),!(typeof L=="function"&&(A=L(o[y],o),A===!1))&&!(u&&(o[y]===void 0||o[y]===null)&&(typeof L!="function"||A==null||A==="")))){var ae=typeof r!="undefined"&&r!==null?r:"";return console.log("emptyTextemptyText",ae,A),(0,M.createElement)(E,s()(s()({},q),{},{key:y}),typeof L=="function"?A||ae:typeof o[y]!="undefined"&&o[y]!==null?o[y]:ae)}})}))},[a])};D.Z=R},9991:function(J,D,e){e.d(D,{u:function(){return a},z:function(){return f}});var C=e(48651),s=e.n(C),d=e(38046),i=e.n(d),T=e(68591),M=e.n(T),b=e(68717),P=e(31887),p=e(63342),E=["children","className"],R=["busy","type","className","defStyle","children"];function f(c){var o=c.children,r=c.className,g=i()(c,E);return(0,p.jsx)("button",s()(s()({},g),{},{className:M()(r),children:c.children}))}function a(c){var o=c.busy,r=c.type,g=r===void 0?"primary":r,G=c.className,u=c.defStyle,$=u===void 0?"btn-primary":u,B=c.children,L=i()(c,R);return(0,p.jsx)(P.ZP,s()(s()({type:$==="btn-primary-1"?"default":g,className:M()(G,"leading-none !shadow-none",{})},L),{},{children:o?(0,p.jsx)(b.fCD,{className:"animate-spin mx-auto"}):B}))}},11e3:function(J,D,e){e.d(D,{I:function(){return R},g:function(){return E}});var C=e(48651),s=e.n(C),d=e(38046),i=e.n(d),T=e(68591),M=e.n(T),b=e(26082),P=e(63342),p=["className","color","size"];function E(f){var a=f.className,c=f.color,o=f.size,r=o===void 0?"":o,g=i()(f,p);return(0,P.jsx)("div",s()(s()({},g),{},{className:M()("text-black w-full h-full flex items-center justify-center",a),children:(0,P.jsx)(b.uur,{color:c,style:r?{fontSize:r}:{},className:"text-[3.125rem] animate-spin"})}))}function R(){return(0,P.jsx)(E,{className:"fixed z-50 left-0 top-0 w-full !h-full bg-black/25"})}},95968:function(J,D,e){e.d(D,{u_:function(){return G}});var C=e(48651),s=e.n(C),d=e(86516),i=e.n(d),T=e(38046),M=e.n(T),b=e(97980),P=e(68591),p=e.n(P),E=e(79685),R=e(50374),f=e(22798),a=e(63342),c=["className","title","onClose","outClose","titleClassName","containerClassName","chilrenClassName","bottomBtn","children","line"],o={current:null};o.current=document.body;function r(u){var $=u.title,B=u.onClose,L=u.titleClassName,y=u.containerClassName;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:p()("flex items-center justify-between mt-5  text-base font-semibold mx-5",y),children:[(0,a.jsx)("div",{className:p()("max-w-[70%] overflow-hidden text-ellipsis whitespace-nowrap",L),children:$}),(0,a.jsx)(f.q5L,{onClick:function(q){q.stopPropagation(),B&&B()},className:"text-2xl cursor-pointer"})]}),(0,a.jsx)("div",{className:"mt-5 border-b "})]})}function g(){return _jsx("div",{})}function G(u){var $=u.className,B=u.title,L=u.onClose,y=u.outClose,te=y===void 0?!1:y,q=u.titleClassName,A=u.containerClassName,ae=u.chilrenClassName,ce=u.bottomBtn,ee=u.children,ge=u.line,xe=ge===void 0?!1:ge,De=M()(u,c),se=(0,E.useRef)(null),Ce=(0,E.useState)(!0),Ee=i()(Ce,2),de=Ee[0],ye=Ee[1],be=function(){L&&(ye(!0),setTimeout(function(){return L()},300))},Pe=(0,b.R)(function(ue){ue.stopPropagation();var Ne=se.current&&se.current!==ue.target&&se.current.contains(ue.target);!Ne&&te&&be()});return(0,E.useEffect)(function(){ye(!1)},[]),o.current?(0,R.createPortal)((0,a.jsx)("div",s()(s()({},De),{},{ref:se,className:p()("fixed left-0  top-0 w-full h-full overflow-auto z-[500] flex justify-center items-center",{"transition-[background_ease_300ms]":!0,"bg-black/0":de,"bg-black/25":!de},$),onClick:Pe,children:(0,a.jsxs)("div",{id:"mo",className:p()("bg-white rounded min-w-[20rem]  min-h-[150]",{"transition-[all_ease_300ms]":!0,"scale-0":de,"scale-100":!de}),children:[(0,a.jsx)(r,{title:B,containerClassName:A,titleClassName:q,onClose:be}),(0,a.jsx)("div",{className:p()("mt-5",ae),children:ee}),xe&&(0,a.jsx)("div",{className:"p-6 border-t mt-5",children:ce})]})})),o.current):null}},8965:function(J,D,e){e.d(D,{H4:function(){return M},Kv:function(){return T},TW:function(){return a},Tz:function(){return P},We:function(){return b},Y5:function(){return R},cc:function(){return E},cu:function(){return c},e0:function(){return f},uU:function(){return p}});var C=e(97207),s=e.n(C),d=e(94437),i=e(54916);function T(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,d.ZP)("/api/product-system/".concat(o,"/detail"),{refreshInterval:r})}function M(o){return(0,d.ZP)(s().isNil(o)?null:"/api/verifyRecord/".concat(o,"/detail"))}function b(o){return(0,d.ZP)(o?"/api/inventory/all":null)}function P(o){return(0,d.ZP)(o?"/api/verifyRecord/verifiers":null)}function p(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,d.ZP)("/api/product-system/list/?pageNum=".concat(o,"&pageSize=10"),{refreshInterval:r})}function E(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,d.ZP)("/api/inventory/list/?pageNum=".concat(o,"&pageSize=10"),{refreshInterval:r})}function R(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,d.ZP)("/api/verifyRecord/list/?pageNum=".concat(o,"&pageSize=10"),{refreshInterval:r})}function f(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(0,d.ZP)("/api/sbt/token/list/?pageNum=".concat(o,"&pageSize=999"))}function a(o){return(0,d.ZP)(o?"/api/sbt/token/uuid/".concat(o):null,{fetcher:i.Gh})}function c(o){return(0,d.ZP)(o?"/api/sbt/token/nft/".concat(o):null,{fetcher:i.Gh})}},97980:function(J,D,e){e.d(D,{R:function(){return s}});var C=e(79685);function s(d){var i=(0,C.useRef)(d);return(0,C.useLayoutEffect)(function(){i.current=d}),(0,C.useCallback)(function(){return i.current&&i.current.apply(i,arguments)},[])}},33516:function(J,D,e){e.r(D),e.d(D,{default:function(){return Ke}});var C=e(48651),s=e.n(C),d=e(86516),i=e.n(d),T=e(64082),M=e(18842),b=e(9991),P=e(99095),p=e(4151),E=e(8965),R=e(97207),f=e.n(R),a=e(79685),c=e(68591),o=e.n(c),r=e(63342),g=function(v){var k=v.onClick,F=v.busy,W=v.btnText,j=v.btnClassName,w=v.prohibit;return(0,r.jsx)("div",{onClick:w?void 0:k,className:o()("flex hover:border-[#29953A] hover:text-[#29953A] border text-[#000000] rounded-[2px] leading-4 text-[14px]  w-[100px] h-[24px]  text-center items-center justify-center ",F?"cursor-not-allowed":"cursor-pointer",w?" border bg-[#F5F5F5] text-[#00000040] cursor-no-drop hover:border-[#F5F5F5] hover:text-[#D9D9D9]  ":"cursor-pointer",j),children:W})},G=g,u=e(46284),$=e(11e3),B=e(95968),L=e(22786),y=e.n(L),te=e(46299),q=e.n(te),A=e(54916);function ae(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,v=(0,a.useRef)(new AbortController),k=function(W){var j=W,w=function(){if(j.length!==0){var S=j[0];return j=f().drop(j),{file:S,index:W.length-j.length-1}}},z=f().min([oe,j.length]),ne=f().range(W.length),X=function(){var O=q()(y()().mark(function S(){var K,x,H,U;return y()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(K=w(),!K){l.next=10;break}return x=K.file,H=K.index,l.next=6,(0,A.qM)(x,{signal:v.current.signal});case 6:U=l.sent,ne[H]=U,l.next=11;break;case 10:return l.abrupt("return");case 11:l.next=0;break;case 13:case"end":return l.stop()}},S)}));return function(){return O.apply(this,arguments)}}();return Promise.all(f().range(z).map(function(){return X()})).then(function(){return ne})};return[k,function(){try{v.current.abort()}catch(F){console.info("abort upfiles")}}]}var ce=e(81123),ee=e(3826),ge=e(51791),xe=e(7698),De=e(50510),se=e.n(De),Ce=e(98919),Ee=function(v){return(0,r.jsx)("div",{className:"font-normal leading-[21.79px] text-[14px] text-gray-9",children:v.value})},de=function(v){var k,F,W,j,w,z=v.closeModal,ne=v.recordId,X=v.type,O=X===void 0?"new":X,S=(0,a.useRef)(null),K=(0,P.oR)(),x=K.userData,H=(0,E.H4)(ne),U=H.isLoading,n=H.data,l=(0,E.We)(O==="new"||O==="editor"),ie=l.isLoading,Y=l.data,V=(0,E.Tz)(O==="new"||O==="editor"),Me=V.isLoading,ve=V.data,fe=U||ie||Me,N=(0,Ce.Z)({verifyState:!0,carbonNum:""}),Z=i()(N,2),t=Z[0],I=Z[1],pe=ae(),_e=i()(pe,2),je=_e[0],Fe=_e[1];(0,a.useEffect)(function(){return Fe},[]);var he=!t.files||t.files.length===0||t.files.length>20||f().findIndex(t.files,function(h){return h.size>=1024*1024*1024*2||h.name.length>=128})>=0,Ie=!Y||!ve||!t.name||!t.carbonNum||!t.verifyName||he,ze=(0,a.useState)(!1),Te=i()(ze,2),re=Te[0],me=Te[1],we=function(){Ie||re||(me(!0),je(t.files).then(function(_){var m;return(0,A._Q)({name:t.name,loadNumber:t.carbonNum||n.loadNumber,description:t.desc||"",fileList:_,verifyUserId:t.verifyName||(n==null||(m=n.verifyUser)===null||m===void 0?void 0:m.id)}).then(function(){return z(!0)}).catch(console.error).finally(function(){me(!1)})}))},Be=!n||!Y||!ve||(t.name||n.name)===n.name&&(t.desc||n.description)===n.description&&t.loadNumber===n.loadNumber&&t.verifyName===n.verifyUserId&&he,Ve=function(){if(!(Be||re)){var _;if(me(!0),t.files)_=je(t.files).then(function(Q){var Oe;return(0,A.u_)(n.id,{name:t.name||n.name,loadNumber:t.carbonNum||n.loadNumber,description:t.desc||n.description,fileList:Q,verifyUserId:t.verifyName||(n==null||(Oe=n.verifyUser)===null||Oe===void 0?void 0:Oe.id)})});else{var m;_=(0,A.u_)(n.id,{name:t.name,loadNumber:t.carbonNum||n.loadNumber,description:t.desc,verifyUserId:t.verifyName||(n==null||(m=n.verifyUser)===null||m===void 0?void 0:m.id)})}_.then(function(){return z(!0)}).catch(console.error).finally(function(){me(!1)})}},Ue=!n||he||!t.functionalUnit||!t.evaluationBoundary||!t.evaluationBasis||!t.evaluationExpireTime,Ze=function(){Ue||!t.files||re||(me(!0),je(t.files).then(function(_){return(0,A.A6)(n.id,{fileList:_,state:!0,functionalUnit:t.functionalUnit,evaluationBoundary:t.evaluationBoundary,evaluationBasis:t.evaluationBasis,certificateNumber:t.certificateNumber,evaluationExpireTime:t.evaluationExpireTime+" 00:00:00"})}).then(function(){return z(!0)}).catch(console.error).finally(function(){me(!1)}))},$e={directory:"",webkitdirectory:""},le="w-full  shrink-0 px-5 border border-[#DDDDDD]  h-[40px]  bg-[#F8F8F8] rounded-lg",Re=O==="verify",ke=(0,a.useMemo)(function(){var h;if(he||!t.files)return"\u9A8C\u8BC1\u6587\u4EF6";var _=((h=t.files.item(0))===null||h===void 0?void 0:h.webkitRelativePath.split("/")[0])||"\u9A8C\u8BC1\u6587\u4EF6";return(0,ce.lS)(_,10,10)},[t.files,he]),Le={label:Re?"\u9A8C\u8BC1\u6587\u6863":"\u9644\u4EF6",dataIndex:"verifyDoc",render:function(){return(0,r.jsx)(a.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2 mt-[-15px]",children:[(0,r.jsx)("input",s()(s()({},$e),{},{ref:S,type:"file",hidden:!0,onChange:function(m){return I({files:m.target.files})}})),(0,r.jsx)(p.SW,{}),(0,r.jsx)(Ee,{value:ke}),(0,r.jsx)(G,{onClick:function(m){var Q;return!re&&((Q=S.current)===null||Q===void 0?void 0:Q.click())},busy:re,btnText:" \u9009\u62E9\u6587\u4EF6\u5939"})]})})}},He={verifyName:n==null?void 0:n.name,verifyId:n==null?void 0:n.id,createUser:n==null||(k=n.createUser)===null||k===void 0?void 0:k.name,organizationName:n==null||(F=n.organization)===null||F===void 0?void 0:F.name,description:n==null?void 0:n.description,loadName:n==null||(W=n.inventory)===null||W===void 0?void 0:W.loadName,loadNumber:n==null?void 0:n.loadNumber,verifyUser:n==null||(j=n.verifyUser)===null||j===void 0?void 0:j.name,verifyDoc:"",functionalUnit:t.functionalUnit||(n==null?void 0:n.functionalUnit),evaluationBoundary:t.evaluationBoundary||(n==null?void 0:n.evaluationBoundary),evaluationBasis:t.evaluationBasis||(n==null?void 0:n.evaluationBasis),evaluationExpireTime:t.evaluationExpireTime||(n==null?void 0:n.evaluationExpireTime)},Ge={verifyRecord:n==null?void 0:n.name,carbonNum:n==null?void 0:n.loadNumber,description:t.desc||(n==null?void 0:n.description),verifyName:"verifyName",createName:x==null?void 0:x.name,organizationName:x==null||(w=x.organization)===null||w===void 0?void 0:w.name},Xe=[{label:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"verifyName"},{label:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"verifyId"},{label:"\u53D1\u8D77\u4EBA",dataIndex:"createUser"},{label:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"organizationName"},{label:"\u63CF\u8FF0",dataIndex:"description"},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"loadName"},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber"},{label:"\u9A8C\u8BC1\u4EBA",dataIndex:"verifyUser"},Le,{label:"\u8BC1\u4E66\u7F16\u53F7",dataIndex:"certificateNumber",render:function(){return(0,r.jsx)(ee.Z,{value:t.certificateNumber||(n==null?void 0:n.certificateNumber),onChange:function(m){return I({certificateNumber:m.target.value})},maxLength:30,className:le})}},{label:"\u529F\u80FD\u5355\u4F4D",dataIndex:"functionalUnit",render:function(){return(0,r.jsx)(ee.Z,{value:t.functionalUnit||(n==null?void 0:n.functionalUnit),onChange:function(m){return I({functionalUnit:m.target.value})},maxLength:30,className:le})}},{label:"\u8BC4\u4EF7\u8FB9\u754C",dataIndex:"evaluationBoundary",render:function(){return(0,r.jsx)(ee.Z,{value:t.evaluationBoundary||(n==null?void 0:n.evaluationBoundary),onChange:function(m){return I({evaluationBoundary:m.target.value})},maxLength:30,className:le})}},{label:"\u8BC4\u4EF7\u4F9D\u636E",dataIndex:"evaluationBasis",render:function(){return(0,r.jsx)(ee.Z,{value:t.evaluationBasis||(n==null?void 0:n.evaluationBasis),onChange:function(m){return I({evaluationBasis:m.target.value})},maxLength:30,className:le})}},{label:"\u8BC4\u4EF7\u6709\u6548\u671F",dataIndex:"evaluationExpireTime",render:function(){return(0,r.jsx)(ge.default,{defaultValue:t.evaluationExpireTime||(n==null?void 0:n.evaluationExpireTime)&&se()(t.evaluationExpireTime||(n==null?void 0:n.evaluationExpireTime)),onChange:function(m,Q){I({evaluationExpireTime:Q})},className:le})}}],Ye=[{label:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"verifyRecord",render:function(){return(0,r.jsx)(ee.Z,{value:t.name||(n==null?void 0:n.name),onChange:function(m){return I({name:m.target.value})},maxLength:30,style:{marginTop:"-15px"},className:le})}},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"carbonNum",render:function(){return(0,r.jsx)(xe.default,{value:t.carbonNum||(n==null?void 0:n.loadNumber),style:{height:"40px",borderColor:"#DDDDDD",backgroundColor:"#F8F8F8",width:"100%",marginTop:"-15px"},onChange:function(m){return I({carbonNum:m})},options:(0,ce.ry)("loadName","loadNumber",Y)})}},{label:"\u63CF\u8FF0",dataIndex:"description",render:function(){return(0,r.jsx)(ee.Z,{style:{marginTop:"-15px"},value:t.desc||(n==null?void 0:n.description),onChange:function(m){return I({desc:m.target.value})},maxLength:100,className:le})}},{label:"\u9009\u62E9\u9A8C\u8BC1\u4EBA",dataIndex:"verifyName",render:function(){var _;return(0,r.jsx)(xe.default,{value:t.verifyName||(n==null||(_=n.verifyUser)===null||_===void 0?void 0:_.id),style:{marginTop:"-15px",height:"40px",borderColor:"#DDDDDD",backgroundColor:"#F8F8F8",width:"100%"},onChange:function(Q){return I({verifyName:Q})},options:(0,ce.ry)("name","id",ve)})}},{label:"\u53D1\u8D77\u4EBA",dataIndex:"createName",render:function(){return(0,r.jsx)("div",{className:" mt-[-15px]",children:x==null?void 0:x.name})}},{label:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"organizationName",render:function(){var _;return(0,r.jsx)("div",{className:" mt-[-15px]",children:x==null||(_=x.organization)===null||_===void 0?void 0:_.name})}},Le];return(0,r.jsx)(a.Fragment,{children:(0,r.jsx)(B.u_,{className:"rounded-lg",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[16px] leading-5 font-bold",title:O==="new"?"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55":"\u7F16\u8F91\u9A8C\u8BC1\u8BB0\u5F55",line:!0,bottomBtn:!fe&&(0,r.jsxs)("div",{className:"flex flex-row justify-between gap-5  w-full ",children:[O==="new"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.u,{size:"large",defStyle:"btn-primary-1",className:"flex-1",onClick:function(){return z(!1)},children:"\u53D6\u6D88"}),(0,r.jsx)(b.u,{size:"large",busy:re,disabled:Ie,defStyle:"btn-primary",className:"flex-1",onClick:we,children:"\u786E\u5B9A"})]}),O==="editor"&&(0,r.jsx)(b.u,{busy:re,size:"large",disabled:Be,className:"flex-1",onClick:Ve,children:"\u63D0\u4EA4\u66F4\u65B0"}),O==="verify"&&(0,r.jsx)(b.u,{busy:re,size:"large",disabled:Ue,className:"flex-1",onClick:Ze,children:"\u63D0\u4EA4\u9A8C\u8BC1"})]}),onClose:function(){return z(!1)},children:(0,r.jsxs)("div",{className:"flex flex-col py-[1px] gap-5 px-5 w-[640px] min-h-[6.25rem] max-h-mc overflow-y-auto",children:[fe&&(0,r.jsx)($.g,{}),!fe&&(0,r.jsx)(r.Fragment,{children:Re?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u.Z,{options:Xe,data:He,optionEmptyText:"-",layout:"vertical",column:1,contentStyle:{color:"#999999",fontWeight:"400",fontSize:"14px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"14px"}})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u.Z,{options:Ye,data:Ge,optionEmptyText:"-",layout:"vertical",column:1,contentStyle:{color:"#999999",fontWeight:"400",fontSize:"14px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"15px",marginTop:"-5px"}})})})]})})})},ye=de,be=e(30905),Pe=e.n(be),ue=e(64470),Ne=function(v){var k=v.closeModal,F=v.fileList,W=(0,a.useState)(!1),j=i()(W,2),w=j[0],z=j[1],ne=(0,P.h3)(),X=function(){var O=q()(y()().mark(function S(){var K,x,H,U;return y()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return z(!0),l.prev=1,K=new(Pe()),x="",F.forEach(function(ie){x=ie.fileName.split("/")[0];var Y=ue.default.get(ie.downloadUrl,{responseType:"arraybuffer"}).then(function(V){return V.data});K.file(ie.fileName,Y)}),l.next=7,K.generateAsync({type:"blob"});case 7:H=l.sent,U=document.createElement("a"),U.href=URL.createObjectURL(H),U.download="".concat(x,".zip"),U.click(),URL.revokeObjectURL(U.href),l.next=18;break;case 15:l.prev=15,l.t0=l.catch(1),ne("\u6587\u4EF6\u4E0B\u8F7D\u51FA\u9519\uFF01");case 18:return l.prev=18,z(!1),l.finish(18);case 21:case"end":return l.stop()}},S,null,[[1,15,18,21]])}));return function(){return O.apply(this,arguments)}}();return(0,r.jsx)(a.Fragment,{children:(0,r.jsx)(B.u_,{onClose:k,title:"\u67E5\u770B\u6587\u4EF6\u5939",line:!0,bottomBtn:(0,r.jsx)(b.u,{size:"large",disabled:w,className:"bg-[#29953A] w-full h-[50px] rounded-lg text-[#FFFFFF] ",onClick:X,children:"\u4E0B\u8F7D"}),children:(0,r.jsx)("div",{className:"px-5 overflow-y-auto  max-h-[260px]",children:F.map(function(O,S){var K=O.fileName.split("/");return(0,r.jsx)("div",{id:"view",className:"w-[640px] h-[34px] flex items-center ",children:(0,r.jsx)("span",{className:"ml-[10px] leading-5 text-[14px] font-normal",children:K[K.length-1]})},"file_".concat(S))})})})})},Ae=Ne;function We(){var oe=(0,P.oR)(),v=oe.userData,k=(0,a.useState)(1),F=i()(k,2),W=F[0],j=F[1],w=(0,a.useState)(!1),z=i()(w,2),ne=z[0],X=z[1],O=(0,a.useState)(!1),S=i()(O,2),K=S[0],x=S[1],H=(0,a.useRef)([]),U=(0,a.useRef)(),n=function(Z){H.current=Z,x(!0)},l=(0,a.useCallback)(function(N){X(!0),U.current={type:f().isEmpty(N)?"new":(v==null?void 0:v.role)==="verify"?"verify":"editor",recordId:N.id}},[v]),ie=(0,a.useMemo)(function(){return[{title:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"name",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"id",width:160,ellipsis:!0},{title:"\u53D1\u8D77\u4EBA",dataIndex:"_createUserName",width:160,ellipsis:!0},{title:"\u7EC4\u7EC7\u673A\u6784",width:160,ellipsis:!0,dataIndex:"_organizationName"},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"_loadName",width:160,ellipsis:!0},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber",width:170,renderText:M.zL},{title:"\u9644\u4EF6",width:160,render:function(Z,t){return(0,r.jsxs)("div",{onClick:function(){return n(t.attachmentFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,r.jsx)(p.SW,{width:"14"}),(0,r.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]})}},{title:"\u6700\u540E\u7F16\u8F91",dataIndex:"updateTime",valueType:"dateTime",width:170},{title:"\u9A8C\u8BC1\u4EBA",dataIndex:"_verifyUserName",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u6587\u6863",width:130,render:function(Z,t){return t.verifyFileList.length?(0,r.jsxs)("div",{onClick:function(){return n(t.verifyFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,r.jsx)(p.SW,{width:"14"}),(0,r.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]}):null}},{title:"\u9A8C\u8BC1\u72B6\u6001",width:130,render:function(Z,t){return(0,r.jsx)("span",{className:"",children:t.state?"\u5DF2\u9A8C\u8BC1":""})}},{title:"\u9A8C\u8BC1\u65F6\u95F4",dataIndex:"proofTime",valueType:"dateTime",width:170},{title:"\u64CD\u4F5C",width:120,valueType:"option",render:function(Z,t){return t.state?[]:[(0,r.jsx)("div",{className:"flex justify-between flex-1 text-green-2 break-keep",children:(0,r.jsx)("div",{className:"flex items-center font-normal justify-center cursor-pointer leading-[27px]",onClick:function(){return l(t)},children:"\u7F16\u8F91"})},"edit")]}}]},[l]),Y=(0,E.Y5)(W),V=Y.data,Me=Y.isLoading,ve=Y.mutate,fe=(0,a.useMemo)(function(){return((V==null?void 0:V.records)||[]).map(function(N,Z){var t,I,pe,_e;return s()(s()({},N),{},{key:"verify_"+Z,_createUserName:(t=N.createUser)===null||t===void 0?void 0:t.name,_organizationName:(I=N.organization)===null||I===void 0?void 0:I.name,_loadName:(pe=N.inventory)===null||pe===void 0?void 0:pe.loadName,_verifyUserName:(_e=N.verifyUser)===null||_e===void 0?void 0:_e.name})})},[V]);return(0,r.jsxs)(T.Z,{title:"\u9A8C\u8BC1\u7BA1\u7406\u5217\u8868",extra:(v==null?void 0:v.role)==="admin"?[(0,r.jsx)(b.u,{onClick:function(){return l({})},children:"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55"},"key_new_verify")]:[],children:[(0,r.jsx)("div",{className:"bg-white",children:(0,r.jsx)(M.ZP,{columns:ie,dataSource:fe,loading:Me,scroll:{x:scrollX},pagination:{pageSize:10,total:(V==null?void 0:V.total)||0,current:W,onChange:function(Z){j(Z)}}})}),ne&&U.current&&(0,r.jsx)(ye,{type:U.current.type,recordId:U.current.recordId,closeModal:function(){j(1),W===1&&ve(),X(!1),U.current=void 0}}),K&&(0,r.jsx)(Ae,{fileList:H.current,closeModal:function(){x(!1)}})]})}var Se=We,Ke=Se}}]);

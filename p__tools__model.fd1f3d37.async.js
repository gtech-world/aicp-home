"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3942],{64082:function(ve,L,t){var W=t(48651),g=t.n(W),y=t(38046),C=t.n(y),j=t(30541),r=t(33421),f=t(68591),l=t.n(f),h=t(63342),_=["className"];function D(T){var V=T.className,oe=C()(T,_),P=(0,r.l)(function(e){var s=e.token;return{".ant-page-header":{padding:"1rem 1.5rem",backgroundColor:s.colorBgBase,".ant-breadcrumb":{fontSize:".875rem",marginBottom:"0.5rem"},".ant-page-header-heading-title":{fontSize:"1.25rem"}},".ant-pro-grid-content":{padding:"1.5rem",backgroundColor:"transparent",".ant-pro-page-container-children-content":{padding:0,paddingBlock:"0 !important"},".ant-pro-page-container-children-container":{paddingBlock:"0 !important",paddingInline:"0 !important"}}}});return(0,h.jsx)(j._z,g()({className:l()(V,P)},oe))}L.Z=D},9991:function(ve,L,t){t.d(L,{u:function(){return oe},z:function(){return V}});var W=t(5677),g=t.n(W),y=t(48651),C=t.n(y),j=t(38046),r=t.n(j),f=t(68591),l=t.n(f),h=t(68717),_=t(63342),D=["children","className"],T=["busy","disabled","className","defStyle","children"];function V(P){var e=P.children,s=P.className,z=r()(P,D);return(0,_.jsx)("button",C()(C()({},z),{},{className:l()(s),children:P.children}))}function oe(P){var e,s=P.busy,z=P.disabled,ue=P.className,x=P.defStyle,H=x===void 0?"btn-primary":x,U=P.children,te=r()(P,T);return(0,_.jsx)("button",C()(C()({className:l()(ue,(e={},g()(e,H,!z),g()(e,"btn-disable",z),e))},te),{},{children:s?(0,_.jsx)(h.fCD,{className:"animate-spin"}):U}))}},20017:function(ve,L,t){t.d(L,{E:function(){return C},K:function(){return j}});var W=t(68591),g=t.n(W),y=t(63342);function C(r){var f=r.value,l=r.bg,h=l===void 0?"#dddddd":l,_=r.color,D=_===void 0?"#29953A":_,T=r.className;return(0,y.jsx)("div",{className:g()(T,"w-full h-[10px]"),style:{background:h},children:(0,y.jsx)("div",{style:{width:"".concat(f,"%"),transition:"width 200ms ease",background:D},className:"h-full"})})}function j(r){var f=r.index,l=r.full,h=r.bg,_=h===void 0?"#dddddd":h,D=r.color,T=D===void 0?"#29953A":D,V=r.className;return(0,y.jsx)("div",{className:g()(V,"w-full h-[10px]"),style:{background:_},children:(0,y.jsx)("div",{style:{marginLeft:l?"0":"".concat(f*25,"%"),width:l?"100%":"25%",background:T},className:"h-full"})})}},35259:function(ve,L,t){t.d(L,{i:function(){return z}});var W=t(5677),g=t.n(W),y=t(70300),C=t.n(y),j=t(48651),r=t.n(j),f=t(86516),l=t.n(f),h=t(11e3),_=t(81516),D=t(68591),T=t.n(D),V=t(79685),oe=t(22798),P=t(25685),e=t(76852),s=t(63342),z=function(x){var H=x.columns,U=x.data,te=x.className,he=x.headerClassName,de=x.size,ee=de===void 0?"":de,G=x.maxHeight,ae=x.loading,Se=ae===void 0?!1:ae,o=x.hiddenHeader,Be=o===void 0?!1:o,ce=x.mouseHoverKey,Ne=ce===void 0?"":ce,pe=x.columnsHeight,xe=pe===void 0?"":pe,Te=x.isSetBorder,ge=Te===void 0?!1:Te,Ge=x.tableId,at=Ge===void 0?void 0:Ge,nt=x.columnsClassName,Ye=x.onChangeColumn,Xe=Ye===void 0?function(a){return a}:Ye,rt=(0,V.useState)(U||[]),Je=l()(rt,2),R=Je[0],Ve=Je[1],lt=(0,V.useState)({}),ze=l()(lt,2),A=ze[0],Re=ze[1],ot=(0,V.useState)({}),Qe=l()(ot,2),st=Qe[0],me=Qe[1],ye=(0,V.useRef)(null);(0,e.Z)(ye,function(){for(var a in A)A[a]&&(A[a].isFilterOpen=!1,Re(r()({},A)))}),(0,V.useEffect)(function(){Ve(U)},[U]),(0,V.useEffect)(function(){H.forEach(function(a){if(a.filterOptions){var c;A[a.dataIndex]={isFilterOpen:!1,filterValueIndex:((c=A[a.dataIndex])===null||c===void 0?void 0:c.filterValueIndex)>-1?A[a.dataIndex].filterValueIndex:-1}}}),Re(A)},[H]);var S=function(c){if(R[c].level===void 0&&(R[c].level=0),R[c].children.forEach(function(Y){Y.level=R[c].level+1}),R[c].open=!R[c].open,R[c].open)Ve(R.slice(0,c+1).concat(R[c].children).concat(R.slice(c+1)));else{var N=R[c].children.length;R[c].children.forEach(function(Y){Y.open&&(Y.open=!1,N+=Y.children.length)}),R.splice(c+1,N),Ve(C()(R))}},qe=function(c,N){Object.assign(A,g()({},c.dataIndex,{filterValueIndex:N,isFilterOpen:!1})),c.onFilterChange&&c.onFilterChange(N>-1?c.filterOptions[N]:null),Re(A)},et=function(c){A[c.dataIndex].isFilterOpen=!A[c.dataIndex].isFilterOpen,Re(r()({},A))};return(0,s.jsxs)("div",{className:T()("w-full",te,ee==="small"&&"text-xs",ee==="big"&&"text-lg mo:text-[.9375rem] "),children:[(0,s.jsxs)("table",{border:1,cellSpacing:0,className:"w-full text-left ",id:at,children:[!Be&&(0,s.jsx)("thead",{className:T()("bg-gray-14 ",{"border bg-[#E5E5E5]":ge},te,ee==="small"&&"text-sm"),style:he,children:(0,s.jsx)("tr",{className:"px-3",children:H&&H.map(function(a,c){var N;return(0,s.jsxs)("th",{style:{width:a.width?a.width:"auto"},className:T()("px-3 relative break-keep",c===0&&" ".concat(!ge&&"rounded-l"||""," overflow-hidden"),c===H.length-1&&"".concat(!ge&&"rounded-r"||""," overflow-hidden"),_.NO[ee]||"py-2"),children:[!!a.tip&&(0,s.jsx)(P.gL9,{"data-tooltip-id":"tooltip","data-tooltip-content":a.tip,className:"inline-block text-xl mt-[-0.15rem] mr-1"}),(0,s.jsx)("span",{children:a.title}),!!A[a.dataIndex]&&(0,s.jsxs)("div",{className:"inline-block",ref:ye,children:[(0,s.jsx)(oe.Ihx,{color:((N=A[a.dataIndex])===null||N===void 0?void 0:N.filterValueIndex)>-1?"#29953A":"",onClick:function(){et(a)},className:"inline-block text-xl mt-[-0.15rem] ml-1 cursor-pointer"}),A[a.dataIndex].isFilterOpen&&(0,s.jsx)("div",{className:"absolute left-0 font-normal top-10",children:(0,s.jsxs)("ul",{className:"bg-white w-[12.375rem] max-h-[14.875rem] overflow-auto text-sm rounded-lg py-3",style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)"},children:[(0,s.jsx)("li",{className:T()("py-2.5 px-5 hover:bg-[#F3F3F3] cursor-pointer",A[a.dataIndex].filterValueIndex===-1&&"text-green-2"),onClick:function(){qe(a,-1)},children:"All"}),a.filterOptions.map(function(Y,Ee){return(0,s.jsx)("li",{onClick:function(){qe(a,Ee)},className:T()("py-1.5 hover:bg-[#F3F3F3] px-5 break-all cursor-pointer",A[a.dataIndex].filterValueIndex===Ee?"text-green-2":""),children:Y.text},"productList".concat(Ee))})]})})]})]},"columns".concat(c))})})}),!Se&&(0,s.jsx)("tbody",{style:{maxHeight:G},className:"w-full overflow-y-auto ",children:R.map(function(a,c){return(0,s.jsx)("tr",{className:" column-level-".concat(a.level?a.level:0," ").concat(xe," "),children:H.map(function(N,Y){return(0,s.jsx)("td",{className:T()(nt,"px-3  ",{"bg-[#F3F3F3]":st[Ne]===a[Ne]&&Ne,border:ge},_.NO[ee]||"py-2",!!N.tip&&"pl-9"),style:{width:N.width?N.width:"auto"},children:(0,s.jsxs)("div",{onMouseOver:function(){return me(a)},onClick:function(){return typeof Xe=="function"?Xe(a):void 0},className:"flex items-center ",style:{marginLeft:(a.level&&Y===0?a.level:0)*1.25+"rem"},children:[!!(a!=null&&a.children)&&(a==null?void 0:a.children.length)>0&&Y===0&&(0,s.jsx)(oe.Tfp,{onClick:function(){return S(c)},className:T()("mr-2 cursor-pointer text-gray-9",a.open&&"rotate-[90deg]")}),N.render?N.render(a[N.dataIndex],a):N.emptyText&&!a[N.dataIndex]?"-":a[N.dataIndex]]})},"data_column_".concat(Y))})},"table_data_".concat(c))})})]}),Se?(0,s.jsx)(h.g,{className:"pt-8"}):!(R&&R.length>0)&&(0,s.jsx)("div",{className:"flex justify-center w-full py-20",children:"\u65E0\u6570\u636E"})]})}},59864:function(ve,L,t){t.d(L,{d:function(){return P}});var W=t(48651),g=t.n(W),y=t(38046),C=t.n(y),j=t(95968),r=t(79685),f=t(63342);function l(){return(0,f.jsx)("tr",{className:"text-lg font-normal text-center text-black ",children:(0,f.jsx)("td",{colSpan:100,className:"h-[100px] py-5 align-top",children:"\u65E0\u6570\u636E"})})}var h=function(s){var z=s.header,ue=s.data,x=s.empty,H=x===void 0?(0,f.jsx)(l,{}):x,U=s.className,te=U===void 0?"relative min-w-full bg-neutral-200 ":U,he=s.headerClassName,de=he===void 0?"bg-neutral-200 sticky top-0 text-left text-black text-lg font-bold leading-[27px]":he,ee=s.headerItemClassName,G=ee===void 0?"p-3":ee,ae=s.tbodyClassName,Se=ae===void 0?"bg-white ":ae,o=s.rowClassName,Be=o===void 0?"text-black text-sm font-normal whitespace-nowrap":o,ce=s.cellClassName,Ne=ce===void 0?"p-3":ce;return(0,f.jsxs)("table",{className:te,children:[(0,f.jsx)("thead",{children:(0,f.jsx)("tr",{className:de,children:z.map(function(pe,xe){return(0,f.jsx)("th",{scope:"col",className:G,children:pe},xe)})})}),(0,f.jsxs)("tbody",{className:Se,children:[ue.map(function(pe,xe){return(0,f.jsx)("tr",{className:Be,children:pe.map(function(Te,ge){return(0,f.jsx)("td",{className:Ne,children:Te},ge)})},xe)}),ue.length===0&&H]})]})},_=h,D=t(81123),T=t(97207),V=t.n(T),oe=["data","inputData","header"];function P(e){var s=e.data,z=e.inputData,ue=e.header,x=ue===void 0?["\u53C2\u6570\u540D","\u8FC7\u7A0B\u540D\u79F0","\u53C2\u8003\u503C","\u8F93\u5165\u503C"]:ue,H=C()(e,oe),U=(0,r.useMemo)(function(){var te;if(!s)return[];var he=z?V().mapKeys(typeof z=="string"?(0,D.OA)(z)||[]:z,function(G){return G.paramName}):{},de=(0,D.OA)(s)||[],ee=((te=de[0])===null||te===void 0?void 0:te.parameters)||[];return ee.map(function(G){var ae;return[G.name,G.context.name,G.value,((ae=he[G.name])===null||ae===void 0?void 0:ae.paramValue)||""]})},[s,z]);return(0,f.jsx)(j.u_,g()(g()({title:"\u5B9E\u666F\u6570\u636E"},H),{},{children:(0,f.jsx)("div",{className:"w-[40rem] px-5 max-h-mc overflow-y-auto",children:(0,f.jsx)(_,{data:U,header:x})})}))}},8965:function(ve,L,t){t.d(L,{H4:function(){return j},Kv:function(){return C},Tz:function(){return f},We:function(){return r},uU:function(){return l}});var W=t(97207),g=t.n(W),y=t(89585);function C(h){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,y.ZP)("/api/product-system/".concat(h,"/detail"),{refreshInterval:_})}function j(h){return(0,y.ZP)(g().isNil(h)?null:"/api/verifyRecord/".concat(h,"/detail"))}function r(h){return(0,y.ZP)(h?"/api/inventory/all":null)}function f(h){return(0,y.ZP)(h?"/api/verifyRecord/verifiers":null)}function l(h){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,y.ZP)("/api/product-system/list/?pageNum=".concat(h,"&pageSize=10"),{refreshInterval:_})}},76222:function(ve,L,t){t.d(L,{b:function(){return y},n:function(){return g}});var W=t(99095);function g(){var C=(0,W.oR)(),j=C.userData,r=C.inited;return r&&(j==null?void 0:j.role)==="verify"}function y(){var C=(0,W.oR)(),j=C.userData,r=C.inited;return r&&(j==null?void 0:j.role)!=="verify"}},2042:function(ve,L,t){t.d(L,{n:function(){return C},s:function(){return y}});var W=t(97207),g=t.n(W);function y(j){var r=g().groupBy(j,"flowId"),f=function l(h){h.forEach(function(_){if(_._child||(_._child=(_.childFlowIds||[]).map(function(T){return r[T][0]}),l(_._child)),_._child.length===0)_._depth=0;else{var D;_._depth=(((D=g().maxBy(_._child,"_depth"))===null||D===void 0?void 0:D._depth)||0)+1}})};f(j)}var C=function(r,f){var l=typeof r=="string"?[r]:r;return!!g().find(l,function(h){return h.startsWith(f)})}},33784:function(ve,L,t){t.r(L),t.d(L,{default:function(){return mt}});var W=t(22786),g=t.n(W),y=t(46299),C=t.n(y),j=t(48651),r=t.n(j),f=t(86516),l=t.n(f),h=t(64082),_=t(38046),D=t.n(_),T=t(54695),V=t(33421),oe=t(68591),P=t.n(oe),e=t(63342),s=["className"];function z(n){var i=n.className,u=D()(n,s),m=(0,V.l)(function(M){var E=M.token;return{".ant-table-container":{borderStartStartRadius:"0 !important",borderStartEndRadius:"0 !important"},".ant-pro-card-body":{paddingInline:0,paddingBlock:0},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:first-child":{borderStartStartRadius:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:last-child":{borderStartEndRadius:"0 !important"},".ant-pagination-item, .ant-pagination-prev, .ant-pagination-next":{borderRadius:"2px !important",minWidth:"30px !important",height:"30px !important",lineHeight:"28px !important"},".ant-pagination-total-text":{lineHeight:"30px !important",visibility:"hidden"}}});return(0,e.jsx)(T.Z,r()({bordered:!0,search:!1,options:!1,rowKey:"key",className:P()(i,"p-6",m)},u))}var ue=null,x=t(9991),H=t(11e3),U=t(95968),te=t(35259),he=t(99095),de=t(8965),ee=t(76222),G=t(81123),ae=t(97207),Se=t.n(ae),o=t(79685),Be=t(12239),ce=t(59864),Ne=t(70300),pe=t.n(Ne),xe=t(62905),Te=t(58020),ge=t(11209),Ge=t(62370),at=t.n(Ge),nt={startOnLoad:!0,theme:"default",logLevel:"fatal",securityLevel:"strict",arrowMarkerAbsolute:!1,flowchart:{htmlLabels:!0},themeVariables:{},sequence:{diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:800,height:200,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,mirrorActors:!0,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,wrapPadding:20},gantt:{titleTopMargin:25,barHeight:16,barGap:4,topPadding:50,leftPadding:75,gridLineStartPadding:35,fontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d"},class:{titleTopMargin:20,defaultRenderer:"dagre-wrapper"},pie:{}},Ye={count:1};function Xe(n){var i=n.className,u=n.data,m=u===void 0?"":u,M=(0,o.useMemo)(function(){return"aicp_mermaid_".concat(Ye.count++)},[]),E=function(){var B=C()(g()().mark(function w(){var q,F,b,O,I;return g()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(v.prev=0,q=document.querySelector("#"+M),q){v.next=4;break}return v.abrupt("return");case 4:return xe.N.initialize(nt),v.next=7,xe.N.render(M+"-svg",m);case 7:if(F=v.sent,b=F.svg,O=F.bindFunctions,q.innerHTML=b,O==null||O(q),I=document.getElementById(M+"-svg"),I){v.next=15;break}return v.abrupt("return");case 15:I.setAttribute("height","100%"),I.style.maxWidth="100%",at()(I,{mouseWheelZoomEnabled:!1,zoomEnabled:!0,controlIconsEnabled:!0}),v.next=23;break;case 20:v.prev=20,v.t0=v.catch(0),console.error(v.t0);case 23:case"end":return v.stop()}},w,null,[[0,20]])}));return function(){return B.apply(this,arguments)}}(),Q=(0,Te.Z)(),k=l()(Q,2),K=k[0],d=k[1].width;return(0,ge.Z)(E,300,[d,m]),(0,e.jsx)("div",{ref:K,id:M,className:P()("mermaid p-2.5",i)})}var rt=Xe,Je=rt,R=t(2042),Ve=["onClose"],lt=function(i){var u=i.onClose,m=D()(i,Ve),M=m.modelBomInfo,E=M===void 0?"":M,Q=E&&JSON.parse(E),k=function(b,O){var I=(0,R.n)(b.tagType,"REFERENCE"),X=(0,R.n)(O.tagType,"REFERENCE");return I&&!X?-1:!I&&X?1:0},K=(Q||[]).sort(k),d=[],B=`graph TD
`;(K||[]).forEach(function(F,b){var O=F.flowName,I=F.childFlowIds;B+="".concat(b+1,'["').concat(O,`"]
`),d.push("style ".concat(b+1,` color:black,fill:#F1F1F1,stroke:black
`)),I&&I.length>0&&I.forEach(function(X){var v=K.findIndex(function(se){return se.flowId===X});v!==-1&&(B+="".concat(v+1," --> ").concat(b+1,`
`),d.push("style ".concat(v+1,` color:black,fill:#F1F1F1,stroke:black
`)))})});var w=pe()(new Set(d||[])).toString().replace(/,style/g," style"),q="".concat(B,`
`).concat(w);return(0,e.jsx)(U.u_,r()(r()({},m),{},{title:"\u67E5\u770BBOM\u4FE1\u606F",onClose:u,children:(0,e.jsx)("div",{className:"flex flex-col gap-5 w-full min-w-[40rem] overflow-hidden",children:(0,e.jsxs)("div",{className:"flex flex-col gap-5 w-full flex-1 max-h-mc px-5 py-[1px] overflow-y-auto",children:[(0,e.jsx)(S,{tit:"BOM\u7ED3\u6784",value:(0,e.jsx)(Je,{data:q,className:"flex justify-center w-[800px] h-[200px] bg-[#F1F1F1]"})}),(0,e.jsx)(S,{tit:"Part Number\u4FE1\u606F",value:null}),(K||[]).map(function(F,b){return(0,e.jsxs)("div",{className:"flex flex-row gap-10 p-0",children:[(0,e.jsx)("div",{className:"w-[200px] text-base text-[#666666] ",children:F.flowName}),(0,e.jsx)("div",{className:"flex flex-wrap flex-shrink w-[30rem] items-center",children:((F==null?void 0:F.partNumbers)||[]).map(function(O,I){return(0,e.jsx)("div",{className:"flex max-w-lg items-center bg-[#F1F1F1] h-6 mb-[10px] rounded ml-5",children:(0,e.jsxs)("div",{className:" w-full mx-[10px] items-center font-normal","data-tooltip-id":"tooltip","data-tooltip-content":(0,G.iT)(O,10),children:["PN : ",(0,G.lS)(O,8,8)]})},"value_".concat(I))})})]},"info_".concat(b))})]})})}))},ze=lt,A=["ps"];function Re(n){var i,u,m,M,E=n.ps,Q=D()(n,A),k=(0,Be.Z)(!1),K=l()(k,2),d=K[0],B=K[1];return(0,e.jsxs)(U.u_,r()(r()({title:E.name},Q),{},{children:[(0,e.jsxs)("div",{className:"flex flex-col gap-5 w-full min-w-[40rem] px-5 py-[1px] max-h-mc overflow-y-auto",children:[(0,e.jsx)(S,{tit:"UID",value:E.uuid||"-"}),(0,e.jsx)(S,{tit:"\u7248\u672C",value:E.version||"-"}),(0,e.jsx)(S,{tit:"\u63CF\u8FF0",value:E.description||"-"}),(0,e.jsx)(S,{tit:"\u72B6\u6001",value:(0,e.jsx)(st,{status:E.state})}),(0,e.jsx)(S,{tit:"\u53D8\u66F4\u4EBA",value:((i=E.updateUser)===null||i===void 0?void 0:i.name)||"-"}),(0,e.jsx)(S,{tit:"\u4EA7\u54C1\u7CFB\u7EDFLCA\u6587\u4EF6",value:(0,e.jsx)(ye,{modelId:(u=E.model)===null||u===void 0?void 0:u.id,modelStatus:(m=E.model)===null||m===void 0?void 0:m.state,isRead:!0})}),(0,e.jsx)(S,{tit:"\u5B9E\u666F\u53C2\u6570\u5217\u8868",value:(0,e.jsx)(me,{action:"\u67E5\u770B",onClick:function(){return B(!0)}})}),(0,e.jsx)(et,{organization:E.org})]}),d&&(0,e.jsx)(ce.d,{data:(M=E.model)===null||M===void 0?void 0:M.paramDetail,onClose:function(){return B(!1)}})]}))}var ot=["defaultValue"],Qe=["psId","onSuccess"];function st(n){var i=n.status;return Se().isNil(i)?(0,e.jsx)("div",{className:"text-base font-normal leading-none text-neutral-400",children:"\u8349\u7A3F"}):(0,e.jsx)("div",{className:P()("w-min whitespace-nowrap h-6 px-2.5 py-1 bg-opacity-10 rounded justify-start items-center gap-2.5 inline-flex",{"bg-rose-500":i!==1,"bg-green-600":i===1}),children:(0,e.jsx)("div",{className:P()("text-green-600 text-base font-normal leading-none",{"text-rose-500":i!==1,"text-green-600":i===1}),children:i===1?"\u5F53\u524D\u4F7F\u7528":"\u8FC7\u53BB\u7248\u672C"})})}function me(n){var i=n.action,u=n.onClick,m=n.to;return m?(0,e.jsx)("a",{href:m,className:"w-min whitespace-nowrap h-6 px-2.5 py-1 bg-zinc-100 rounded text-black text-base font-normal leading-none",children:i}):(0,e.jsx)("div",{className:"w-min whitespace-nowrap h-6 px-2.5 py-1 bg-zinc-100 rounded justify-start items-center gap-2.5 inline-flex cursor-pointer",onClick:u,children:(0,e.jsx)("div",{className:"text-base font-normal leading-none text-black",children:i})})}function ye(n){var i=n.psId,u=n.disableSelectFile,m=u===void 0?!1:u,M=n.openNewTab,E=M===void 0?!1:M,Q=n.hiddenUpdate,k=n.modelId,K=n.isNew,d=n.isRead,B=n.modelStatus,w=n.file,q=n.onFileChange,F=n.btnText,b=F===void 0?"\u4E0A\u4F20\u6A21\u578B":F,O=(0,o.useRef)(null),I=function(){return B!==1?(0,e.jsx)("div",{className:"text-base font-normal leading-none text-amber-500",children:"\u7B49\u5F85\u89E3\u6790"}):(0,e.jsx)(me,{onClick:function(){return E?window.open("/model?id=".concat(k),"_blank"):void 0},to:E?void 0:"/model?id=".concat(k),action:"\u5728\u7EBF\u67E5\u770B"})},X=function(se){var Ce;!m&&((Ce=O.current)===null||Ce===void 0||Ce.click())};return(0,e.jsxs)("div",{className:"text-neutral-400 text-base font-normal leading-none flex items-center gap-2.5",children:[(0,e.jsx)("input",{ref:O,type:"file",hidden:!0,accept:".zip",onChange:q}),!d&&(0,G.lS)(w==null?void 0:w.name,10,10),d?I():K?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(me,{action:b,onClick:X})}):(0,e.jsx)(e.Fragment,{children:!w&&I()})]})}function S(n){var i=typeof n.value=="string"||typeof n.value=="number";return(0,e.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,e.jsxs)("div",{className:"text-base font-normal leading-normal text-black",children:[n.tit,": "]}),i?(0,e.jsx)("div",{className:"text-base font-normal leading-none text-neutral-400",children:n.value}):n.value]})}function qe(n){var i=n.defaultValue,u=D()(n,ot);return(0,e.jsx)("input",r()({type:"text",className:"w-full px-5 py-[15px] bg-gray-28 rounded-lg border border-neutral-200 justify-start items-start gap-2.5 inline-flex text-black text-base font-normal leading-none"},u))}function et(n){var i=(0,he.oR)(),u=i.userData,m=n.organization||(u==null?void 0:u.organization);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S,{tit:"\u7EC4\u7EC7\u540D\u79F0",value:(m==null?void 0:m.name)||"-"}),(0,e.jsx)(S,{tit:"\u7EC4\u7EC7\u7F16\u53F7",value:(m==null?void 0:m.serialNumber)||"-"})]})}function a(n){var i,u,m,M,E=n.psId,Q=n.onSuccess,k=D()(n,Qe),K=(0,de.Kv)(E,6e4),d=K.data,B=K.isLoading,w=K.error,q=(0,o.useState)(""),F=l()(q,2),b=F[0],O=F[1],I=(0,o.useRef)(!0);(0,o.useEffect)(function(){d&&I.current&&(O(d.description||""),I.current=!1)},[d]),(0,o.useEffect)(function(){w&&k.onClose&&k.onClose()},[w]);var X=(0,o.useState)(!1),v=l()(X,2),se=v[0],Ce=v[1],De=(0,o.useState)(null),fe=l()(De,2),Ae=fe[0],we=fe[1],Le=(0,o.useState)(!1),Pe=l()(Le,2),He=Pe[0],ie=Pe[1],ne=(0,o.useCallback)(function(p){var Z;we((Z=p.target.files)===null||Z===void 0?void 0:Z.item(0))},[]),We=(0,Be.Z)(!1),J=l()(We,2),Ze=J[0],Me=J[1],Fe=(0,o.useState)(),Ue=l()(Fe,2),be=Ue[0],Ke=Ue[1],$e=(0,ee.n)();return(0,e.jsxs)(U.u_,r()(r()({},k),{},{children:[B&&!d&&(0,e.jsx)(H.g,{className:"min-h-[100px]"}),d&&(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"flex flex-col gap-5  w-full min-w-[40rem] px-5 py-[1px] max-h-mc overflow-y-auto",children:[(0,e.jsx)(S,{tit:"\u4EA7\u54C1\u7CFB\u7EDFID",value:d.uuid||"-"}),(0,e.jsx)(S,{tit:"\u63CF\u8FF0",value:(0,e.jsx)("div",{className:" break-words max-w-[40rem] flex-wrap text-[16px] font-normal text-[#999999]",children:b||"-"})}),(0,e.jsx)(S,{tit:"\u64CD\u4F5C\u4EBA",value:d.updateUser.name||"-"}),(0,e.jsx)(S,{tit:"BOM\u4FE1\u606F",value:(0,e.jsx)(me,{action:"\u67E5\u770B",onClick:function(){return ie(!0)}})}),(0,e.jsx)(S,{tit:"\u5B9E\u666F\u53C2\u6570\u5217\u8868",value:(0,e.jsx)(me,{action:"\u67E5\u770B",onClick:function(){return Me(!0)}})}),(0,e.jsx)(S,{tit:"\u4EA7\u54C1\u7CFB\u7EDFLCA\u6587\u4EF6",value:(0,e.jsx)(ye,{modelId:(i=d.model)===null||i===void 0?void 0:i.id,disableSelectFile:se,modelStatus:(u=d.model)===null||u===void 0?void 0:u.state,hiddenUpdate:$e,file:Ae,onFileChange:ne})}),(0,e.jsx)(et,{organization:d==null?void 0:d.org})]})}),Ze&&(0,e.jsx)(ce.d,{header:["\u53C2\u6570\u540D","\u8FC7\u7A0B\u540D\u79F0","\u53C2\u8003\u503C"],data:d==null||(m=d.model)===null||m===void 0?void 0:m.paramDetail,onClose:function(){return Me(!1)}}),be&&(0,e.jsx)(Re,{onClose:function(){return Ke(void 0)},ps:be}),He&&(0,e.jsx)(ze,{modelBomInfo:d==null||(M=d.model)===null||M===void 0?void 0:M.modelBomInfo,onClose:function(){return ie(!1)}})]}))}var c=t(97980),N=t(54916),Y=t(20017),Ee=t(81920),it=["onSuccess","onClose"];function ut(n){var i=n.onSuccess,u=n.onClose,m=D()(n,it),M=(0,o.useState)(""),E=l()(M,2),Q=E[0],k=E[1],K=(0,o.useState)(!1),d=l()(K,2),B=d[0],w=d[1],q=(0,o.useState)(0),F=l()(q,2),b=F[0],O=F[1],I=(0,o.useState)(null),X=l()(I,2),v=X[0],se=X[1],Ce=(0,o.useState)("upload"),De=l()(Ce,2),fe=De[0],Ae=De[1],we=!v,Le=(0,o.useState)(""),Pe=l()(Le,2),He=Pe[0],ie=Pe[1],ne=(0,o.useState)({id:0,modelBomInfo:"",paramDetail:"",modelName:""}),We=l()(ne,2),J=We[0],Ze=We[1],Me=(0,o.useState)(!1),Fe=l()(Me,2),Ue=Fe[0],be=Fe[1],Ke=(0,o.useState)(!1),$e=l()(Ke,2),p=$e[0],Z=$e[1],Oe=(0,o.useCallback)(function($){var re;se((re=$.target.files)===null||re===void 0?void 0:re.item(0))},[]),je=(0,o.useRef)(),tt=(0,o.useCallback)(function(){var $;($=je.current)===null||$===void 0||$.abort(),u&&u()},[u]),_e=function(){w(!1),O(0),ie("")},ft=(0,Ee.o)(),_t=function(){var $=C()(g()().mark(function re(ke){var Ie;return g()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:ie("\u6A21\u578B\u89E3\u6790\u4E2D......");case 1:return le.next=4,(0,G._v)(5e3);case 4:if(ft.current){le.next=6;break}return le.abrupt("return");case 6:return le.next=8,(0,N.Yp)(ke).catch(function(){});case 8:if(Ie=le.sent,O(function(pt){return Math.min(pt+10,100)}),!(Ie&&Ie.state===1&&Ie.modelBomInfo)){le.next=12;break}return le.abrupt("return",Ie);case 12:le.next=1;break;case 14:case"end":return le.stop()}},re)}));return function(ke){return $.apply(this,arguments)}}(),vt=function(){ie("\u6B63\u5728\u4E0A\u4F20......");var re=new FormData;re.append("file",v),je.current=new AbortController,(0,N.av)(re,{signal:je.current.signal,onUploadProgress:function(Ie){O(Math.min(Math.round((Ie.progress||0)*100),60))}}).then(_t).then(function(ke){ke&&(Ze(ke),Ae("add"),_e())}).catch(function(){_e()})},ht=(0,c.R)(function(){if(!we)if(fe==="upload"){if(B)return;w(!0),vt()}else(0,N.bc)({name:J.modelName,description:Q,modelId:J.id}).then(function(){i&&i(),tt()}).catch(function($){console.log("err",$)})});return(0,e.jsxs)(o.Fragment,{children:[(0,e.jsx)(U.u_,r()(r()({},m),{},{title:"\u65B0\u5EFA\u4EA7\u54C1\u7CFB\u7EDF",onClose:function(){tt(),_e()},children:(0,e.jsxs)("div",{className:"flex flex-col gap-5 w-full min-w-[40rem] overflow-hidden",children:[(0,e.jsx)("div",{className:P()("flex flex-col w-full flex-1  max-h-mc px-5 py-[1px] overflow-y-auto ".concat(B?"gap-0":"gap-5")),children:B?(0,e.jsxs)(o.Fragment,{children:[(0,e.jsx)("div",{className:"flex justify-center w-full",children:He}),(0,e.jsx)(Y.E,{value:b,className:"my-5 overflow-hidden rounded-lg"})]}):fe==="upload"?(0,e.jsx)(S,{tit:"\u4EA7\u54C1\u7CFB\u7EDFLCA\u6587\u4EF6",value:(0,e.jsx)(ye,{isNew:!0,disableSelectFile:B,file:v,onFileChange:Oe,btnText:"\u9009\u62E9\u6A21\u578B"})}):(0,e.jsxs)(o.Fragment,{children:[(0,e.jsx)(S,{tit:"\u4EA7\u54C1\u7CFB\u7EDF\u540D\u79F0",value:J==null?void 0:J.modelName}),(0,e.jsx)(S,{tit:"BOM\u4FE1\u606F",value:(0,e.jsx)(me,{action:"\u67E5\u770B",onClick:function(){return be(!0)}})}),(0,e.jsx)(S,{tit:"\u5B9E\u666F\u53C2\u6570\u5217\u8868",value:(0,e.jsx)(me,{action:"\u67E5\u770B",onClick:function(){return Z(!0)}})}),(0,e.jsx)(S,{tit:"\u4EA7\u54C1\u7CFB\u7EDFLCA\u6587\u4EF6",value:(0,e.jsx)(ye,{modelStatus:B?0:1,modelId:J.id,openNewTab:!0,onFileChange:Oe})}),(0,e.jsx)(S,{tit:"\u63CF\u8FF0",value:(0,e.jsx)(qe,{maxLength:100,value:Q,onChange:function(re){return k(re.target.value)}})})]})}),(0,e.jsx)("div",{className:"flex flex-shrink-0 w-full gap-5 px-5",children:!B&&(0,e.jsxs)(o.Fragment,{children:[(0,e.jsx)(x.u,{defStyle:"btn-primary-1",className:"flex-1",onClick:function(){tt(),_e()},children:"\u53D6\u6D88"}),(0,e.jsx)(x.u,{className:"flex-1",onClick:ht,disabled:we,children:fe==="upload"?"\u4E0A\u4F20":"\u786E\u5B9A"})]})})]})})),p&&(0,e.jsx)(ce.d,{header:["\u53C2\u6570\u540D","\u8FC7\u7A0B\u540D\u79F0","\u53C2\u8003\u503C"],data:J==null?void 0:J.paramDetail,onClose:function(){return Z(!1)}}),Ue&&(0,e.jsx)(ze,r()(r()({},J),{},{onClose:function(){return be(!1)}}))]})}function dt(){var n=(0,o.useState)(null),i=l()(n,2),u=i[0],m=i[1],M=(0,o.useState)(null),E=l()(M,2),Q=E[0],k=E[1],K=(0,o.useState)(),d=l()(K,2),B=d[0],w=d[1],q=(0,o.useState)(null),F=l()(q,2),b=F[0],O=F[1],I=(0,o.useState)(!1),X=l()(I,2),v=X[0],se=X[1],Ce=(0,o.useState)(1),De=l()(Ce,2),fe=De[0],Ae=De[1],we=(0,o.useState)(0),Le=l()(we,2),Pe=Le[0],He=Le[1],ie=(0,de.uU)(fe,1e4),ne=ie.data,We=ie.isLoading,J=ie.mutate,Ze=(0,o.useMemo)(function(){return((ne==null?void 0:ne.records)||[]).map(function(p,Z){return r()(r()({},p),{},{key:"pl"+Z,optName:p.updateUser.name})})},[ne]),Me=(0,o.useMemo)(function(){return[{title:"\u5B9E\u666F\u8F93\u5165\u9879",dataIndex:"context",width:"20%"},{title:"\u8FC7\u7A0B\u540D\u79F0",dataIndex:"parameter",width:"30%"},{title:"\u53C2\u8003\u503C",dataIndex:"amount",width:"20%"},{title:"\u4E0D\u786E\u5B9A\u6027",dataIndex:"uncertainty",emptyText:"-",width:"30%"}]},[]),Fe=function(){var p=C()(g()().mark(function Z(Oe){var je;return g()().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return je="\u66F4\u6539\u72B6\u6001",O({title:je,loading:!0}),_e.next=4,(0,N.pF)(u.id,Oe);case 4:He(Pe+1),O({title:je,loading:!1,resultText:"\u64CD\u4F5C\u6210\u529F"}),m(null);case 7:case"end":return _e.stop()}},Z)}));return function(Oe){return p.apply(this,arguments)}}(),Ue=(0,ee.b)(),be=function(){Ae(1),fe===1&&J()},Ke=(0,o.useMemo)(function(){return[{title:"\u4EA7\u54C1\u7CFB\u7EDF",dataIndex:"name",ellipsis:!0,width:200},{title:"\u4EA7\u54C1\u7CFB\u7EDFID",dataIndex:"uuid",ellipsis:!0,width:200},{title:"\u64CD\u4F5C\u4EBA",dataIndex:"optName",width:100},{title:"\u63CF\u8FF0",dataIndex:"description",ellipsis:!0,width:200},{title:"\u4E0A\u4F20\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",width:170},{title:"\u64CD\u4F5C",width:100,valueType:"option",render:function(Z,Oe){return[(0,e.jsx)("div",{className:"text-green-2 cursor-pointer",onClick:function(){w(Oe)},children:"\u67E5\u770B"},"key_look")]}}]},[]),$e=Se().sumBy(Ke,"width");return(0,e.jsxs)(h.Z,{title:"\u6211\u7684\u4EA7\u54C1\u7CFB\u7EDF",extra:Ue?[(0,e.jsx)(x.z,{onClick:function(){return se(!0)},className:P()("w-40 text-lg font-normal text-white rounded bg-green-2 h-11 hover:bg-green-28"),children:"\u65B0\u5EFA\u4EA7\u54C1\u7CFB\u7EDF"},"btn")]:[],children:[(0,e.jsx)("div",{className:"bg-white",children:(0,e.jsx)(z,{columns:Ke,dataSource:Ze,loading:We,scroll:{x:$e},pagination:{pageSize:10,total:(ne==null?void 0:ne.total)||0,onChange:function(Z){Ae(Z)}}})}),u!==null&&(0,e.jsx)(U.u_,{title:"\u66F4\u6539\u72B6\u6001",onClose:function(){return m(null)},children:(0,e.jsx)("div",{className:"flex",children:b!=null&&b.loading?(0,e.jsx)(H.g,{}):(0,e.jsxs)("div",{className:"flex flex-1",children:[u.state>-2&&(0,e.jsx)(x.z,{onClick:function(){return Fe(u.state===1?0:1)},className:"flex-1 w-full text-lg text-white rounded-lg bg-green-2 h-11",children:u.state===1?"\u5F03\u7528":"\u6FC0\u6D3B"}),u.state===-1&&(0,e.jsx)(x.z,{onClick:function(){return Fe(-2)},className:"flex-1 w-full ml-5 text-lg border-2 rounded-lg border-green-2 bg-green-2/10 text-green-2 hover:bg-green-2/20 h-11",children:"\u5220\u9664"})]})})}),!!Q&&(0,e.jsx)(U.u_,{title:Q.modelName+"\u6A21\u578B\u4E2D\u7684\u5B9E\u666F\u8F93\u5165\u9879",onClose:function(){return k(null)},children:(0,e.jsxs)("div",{className:"flex w-[60rem] min-h-[16rem] flex-col pb-2",children:[(0,e.jsx)("ul",{className:"flex mb-1",children:Me.map(function(p,Z){return(0,e.jsx)("li",{className:"px-3 text-lg font-bold",style:{width:p.width},children:p.title},"columns".concat(Z))})}),(0,e.jsx)("div",{className:"max-h-[15rem] min-h-[5rem] overflow-y-auto",children:(0,e.jsx)(te.i,{size:"big",hiddenHeader:!0,columns:Me,data:Q.paramDetail})})]})}),b&&(0,e.jsx)(U.u_,{title:(b==null?void 0:b.title)||"\u64CD\u4F5C",onClose:function(){return O(null)},children:(0,e.jsx)("div",{className:"pb-2 text-center",children:b.loading?(0,e.jsx)(H.g,{}):(0,e.jsx)("span",{children:b.resultText})})}),v&&(0,e.jsx)(ut,{onClose:function(){return se(!1)},onSuccess:function(){return be()}}),B&&(0,e.jsx)(a,{psId:B.id,title:B.name,onClose:function(){return w(void 0)},onSuccess:function(){return be()}})]})}var ct=dt,mt=ct}}]);

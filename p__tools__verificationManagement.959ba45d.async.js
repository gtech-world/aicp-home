"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2941],{64082:function(G,C,e){var D=e(48651),l=e.n(D),s=e(38046),i=e.n(s),B=e(30541),p=e(33421),y=e(68591),P=e.n(y),v=e(63342),g=["className"];function O(h){var a=h.className,f=i()(h,g),o=(0,p.l)(function(_){var x=_.token;return{".ant-page-header":{padding:"1rem 1.5rem",paddingBlock:"1rem !important",paddingInline:"1.5rem !important",backgroundColor:x.colorBgBase,".ant-breadcrumb":{fontSize:".875rem",paddingBlockStart:"0 !important"},".ant-page-header-heading-title":{fontSize:"1.25rem"}},".ant-pro-grid-content":{padding:"1.5rem",backgroundColor:"transparent",".ant-pro-page-container-children-content":{padding:0,paddingBlock:"0 !important"},".ant-pro-page-container-children-container":{paddingBlock:"0 !important",paddingInline:"0 !important"}}}});return(0,v.jsx)(B._z,l()({className:P()(a,o)},f))}C.Z=O},18842:function(G,C,e){e.d(C,{rx:function(){return _},zL:function(){return o}});var D=e(48651),l=e.n(D),s=e(38046),i=e.n(s),B=e(81123),p=e(54695),y=e(33421),P=e(9021),v=e(68591),g=e.n(v),O=e(97207),h=e.n(O),a=e(63342),f=["className","columns"];function o(x){return h().size(x)>=16?(0,a.jsx)(P.Z,{title:x,children:(0,B.lS)(x,8,8)}):x}function _(x){var X=x.className,d=x.columns,V=i()(x,f),R=(0,y.l)(function(I){var Y=I.token;return{".ant-table-container":{borderStartStartRadius:"0 !important",borderStartEndRadius:"0 !important"},".ant-pro-card-body":{paddingInline:"0 !important",paddingBlock:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:first-child":{borderStartStartRadius:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:last-child":{borderStartEndRadius:"0 !important"},".ant-pagination-item, .ant-pagination-prev, .ant-pagination-next":{borderRadius:"2px !important",minWidth:"30px !important",height:"30px !important",lineHeight:"28px !important"},".ant-pagination-total-text":{lineHeight:"30px !important",visibility:"hidden"}}}),N=h().sumBy(d,"width");return(0,a.jsx)(p.Z,l()({bordered:!0,columns:d,scroll:{x:N},search:!1,options:!1,rowKey:"key",className:g()(X,"p-6",R)},V))}C.ZP=_},8242:function(G,C,e){var D=e(68591),l=e.n(D),s=e(63342),i=function(p){var y=p.onClick,P=p.busy,v=p.btnText,g=p.btnClassName,O=p.prohibit;return(0,s.jsx)("div",{onClick:O?void 0:y,className:l()("flex hover:border-[#29953A] hover:text-[#29953A] border text-[#000000] rounded-[2px] leading-4 text-[14px]  w-[100px] h-[24px]  text-center items-center justify-center ",P?"cursor-not-allowed":"cursor-pointer",O?" border bg-[#F5F5F5] text-[#00000040] cursor-no-drop hover:border-[#F5F5F5] hover:text-[#00000040]  ":"cursor-pointer",g),children:v})};C.Z=i},46284:function(G,C,e){var D=e(48651),l=e.n(D),s=e(38046),i=e.n(s),B=e(74589),p=e(79685),y=e(63342),P=["options","data","optionEmptyText","wrapperStyle","hideIfEmpty"],v=["render","dataIndex","show"],g=B.Z.Item,O=function(a){var f=a.options,o=a.data,_=a.optionEmptyText,x=a.wrapperStyle,X=x===void 0?{backroundColor:"red"}:x,d=a.hideIfEmpty,V=i()(a,P);return console.log("wrapperStyle",X),(0,p.useMemo)(function(){return(0,y.jsx)(B.Z,l()(l()({},V),{},{contentStyle:{color:"#999999",fontWeight:"400",fontSize:"14px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"14px"},children:f.map(function(R){var N=R.render,I=R.dataIndex,Y=R.show,z=i()(R,v),$="";if(Y!==!1&&(console.log("dadatatadatadata",o[I],I),!(typeof N=="function"&&($=N(o[I],o),$===!1))&&!(d&&(o[I]===void 0||o[I]===null)&&(typeof N!="function"||$==null||$==="")))){var re=typeof _!="undefined"&&_!==null?_:"";return console.log("emptyTextemptyText",re,$),(0,p.createElement)(g,l()(l()({},z),{},{key:I}),typeof N=="function"?$||re:typeof o[I]!="undefined"&&o[I]!==null?o[I]:re)}})}))},[a])};C.Z=O},9991:function(G,C,e){e.d(C,{u:function(){return a},z:function(){return h}});var D=e(48651),l=e.n(D),s=e(38046),i=e.n(s),B=e(68591),p=e.n(B),y=e(68717),P=e(31887),v=e(63342),g=["children","className"],O=["busy","type","className","defStyle","children"];function h(f){var o=f.children,_=f.className,x=i()(f,g);return(0,v.jsx)("button",l()(l()({},x),{},{className:p()(_),children:f.children}))}function a(f){var o=f.busy,_=f.type,x=_===void 0?"primary":_,X=f.className,d=f.defStyle,V=d===void 0?"btn-primary":d,R=f.children,N=i()(f,O);return(0,v.jsx)(P.ZP,l()(l()({type:V==="btn-primary-1"?"default":x,className:p()(X,"leading-none !shadow-none",{})},N),{},{children:o?(0,v.jsx)(y.fCD,{className:"animate-spin mx-auto"}):R}))}},11e3:function(G,C,e){e.d(C,{I:function(){return O},g:function(){return g}});var D=e(48651),l=e.n(D),s=e(38046),i=e.n(s),B=e(68591),p=e.n(B),y=e(26082),P=e(63342),v=["className","color","size"];function g(h){var a=h.className,f=h.color,o=h.size,_=o===void 0?"":o,x=i()(h,v);return(0,P.jsx)("div",l()(l()({},x),{},{className:p()("text-black w-full h-full flex items-center justify-center",a),children:(0,P.jsx)(y.uur,{color:f,style:_?{fontSize:_}:{},className:"text-[3.125rem] animate-spin"})}))}function O(){return(0,P.jsx)(g,{className:"fixed z-50 left-0 top-0 w-full !h-full bg-black/25"})}},95968:function(G,C,e){e.d(C,{u_:function(){return X}});var D=e(48651),l=e.n(D),s=e(86516),i=e.n(s),B=e(38046),p=e.n(B),y=e(97980),P=e(68591),v=e.n(P),g=e(79685),O=e(50374),h=e(22798),a=e(63342),f=["className","title","onClose","outClose","titleClassName","containerClassName","chilrenClassName","bottomBtn","children","line"],o={current:null};o.current=document.body;function _(d){var V=d.title,R=d.onClose,N=d.titleClassName,I=d.containerClassName;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:v()("flex items-center justify-between mt-5  text-base font-semibold mx-5",I),children:[(0,a.jsx)("div",{className:v()("max-w-[70%] overflow-hidden text-ellipsis whitespace-nowrap",N),children:V}),(0,a.jsx)(h.q5L,{onClick:function(z){z.stopPropagation(),R&&R()},className:"text-2xl cursor-pointer"})]}),(0,a.jsx)("div",{className:"mt-5 border-b "})]})}function x(){return _jsx("div",{})}function X(d){var V=d.className,R=d.title,N=d.onClose,I=d.outClose,Y=I===void 0?!1:I,z=d.titleClassName,$=d.containerClassName,re=d.chilrenClassName,ye=d.bottomBtn,be=d.children,he=d.line,t=he===void 0?!1:he,Ce=p()(d,f),le=(0,g.useRef)(null),De=(0,g.useState)(!0),ge=i()(De,2),se=ge[0],xe=ge[1],Ee=function(){N&&(xe(!0),setTimeout(function(){return N()},300))},Pe=(0,y.R)(function(de){de.stopPropagation();var Ne=le.current&&le.current!==de.target&&le.current.contains(de.target);!Ne&&Y&&Ee()});return(0,g.useEffect)(function(){xe(!1)},[]),o.current?(0,O.createPortal)((0,a.jsx)("div",l()(l()({},Ce),{},{ref:le,className:v()("fixed left-0  top-0 w-full h-full overflow-auto z-[500] flex justify-center items-center",{"transition-[background_ease_300ms]":!0,"bg-black/0":se,"bg-black/25":!se},V),onClick:Pe,children:(0,a.jsxs)("div",{id:"mo",className:v()("bg-white rounded min-w-[20rem]  min-h-[150]",{"transition-[all_ease_300ms]":!0,"scale-0":se,"scale-100":!se}),children:[(0,a.jsx)(_,{title:R,containerClassName:$,titleClassName:z,onClose:Ee}),(0,a.jsx)("div",{className:v()("mt-5",re),children:be}),t&&(0,a.jsx)("div",{className:"p-6 border-t mt-5",children:ye})]})})),o.current):null}},8965:function(G,C,e){e.d(C,{H4:function(){return p},Kv:function(){return B},TW:function(){return a},Tz:function(){return P},We:function(){return y},Y5:function(){return O},cc:function(){return g},cu:function(){return f},e0:function(){return h},uU:function(){return v}});var D=e(97207),l=e.n(D),s=e(94437),i=e(54916);function B(o){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,s.ZP)("/api/product-system/".concat(o,"/detail"),{refreshInterval:_})}function p(o){return(0,s.ZP)(l().isNil(o)?null:"/api/verifyRecord/".concat(o,"/detail"))}function y(o){return(0,s.ZP)(o?"/api/inventory/all":null)}function P(o){return(0,s.ZP)(o?"/api/verifyRecord/verifiers":null)}function v(o){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,s.ZP)("/api/product-system/list/?pageNum=".concat(o,"&pageSize=10"),{refreshInterval:_})}function g(o){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,s.ZP)("/api/inventory/list/?pageNum=".concat(o,"&pageSize=10"),{refreshInterval:_})}function O(o){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,s.ZP)("/api/verifyRecord/list/?pageNum=".concat(o,"&pageSize=10"),{refreshInterval:_})}function h(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(0,s.ZP)("/api/sbt/token/list/?pageNum=".concat(o,"&pageSize=999"))}function a(o){return(0,s.ZP)(o?"/api/sbt/token/uuid/".concat(o):null,{fetcher:i.Gh})}function f(o){return(0,s.ZP)(o?"/api/sbt/token/nft/".concat(o):null,{fetcher:i.Gh})}},97980:function(G,C,e){e.d(C,{R:function(){return l}});var D=e(79685);function l(s){var i=(0,D.useRef)(s);return(0,D.useLayoutEffect)(function(){i.current=s}),(0,D.useCallback)(function(){return i.current&&i.current.apply(i,arguments)},[])}},11187:function(G,C,e){e.r(C),e.d(C,{default:function(){return Ae}});var D=e(48651),l=e.n(D),s=e(86516),i=e.n(s),B=e(64082),p=e(18842),y=e(9991),P=e(99095),v=e(4151),g=e(8965),O=e(97207),h=e.n(O),a=e(79685),f=e(8242),o=e(46284),_=e(11e3),x=e(95968),X=e(22786),d=e.n(X),V=e(46299),R=e.n(V),N=e(54916);function I(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,M=(0,a.useRef)(new AbortController),Q=function(K){var L=K,J=function(){if(L.length!==0){var W=L[0];return L=h().drop(L),{file:W,index:K.length-L.length-1}}},F=h().min([ue,L.length]),te=h().range(K.length),q=function(){var T=R()(d()().mark(function W(){var S,b,H,A;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(S=J(),!S){u.next=10;break}return b=S.file,H=S.index,u.next=6,(0,N.qM)(b,{signal:M.current.signal});case 6:A=u.sent,te[H]=A,u.next=11;break;case 10:return u.abrupt("return");case 11:u.next=0;break;case 13:case"end":return u.stop()}},W)}));return function(){return T.apply(this,arguments)}}();return Promise.all(h().range(F).map(function(){return q()})).then(function(){return te})};return[Q,function(){try{M.current.abort()}catch(k){console.info("abort upfiles")}}]}var Y=e(81123),z=e(3826),$=e(51791),re=e(7698),ye=e(50510),be=e.n(ye),he=e(98919),t=e(63342),Ce=function(M){return(0,t.jsx)("div",{className:"font-normal leading-[21.79px] text-[14px] text-gray-9",children:M.value})},le=function(M){var Q,k,K,L,J,F=M.closeModal,te=M.recordId,q=M.type,T=q===void 0?"new":q,W=(0,a.useRef)(null),S=(0,P.oR)(),b=S.userData,H=(0,g.H4)(te),A=H.isLoading,n=H.data,u=(0,g.We)(T==="new"||T==="editor"),oe=u.isLoading,ee=u.data,w=(0,g.Tz)(T==="new"||T==="editor"),Me=w.isLoading,ce=w.data,ve=A||oe||Me,j=(0,he.Z)({verifyState:!0,carbonNum:""}),Z=i()(j,2),r=Z[0],U=Z[1],fe=I(),_e=i()(fe,2),je=_e[0],We=_e[1];(0,a.useEffect)(function(){return We},[]);var pe=!r.files||r.files.length===0||r.files.length>20||h().findIndex(r.files,function(E){return E.size>=1024*1024*1024*2||E.name.length>=128})>=0,Ie=!ee||!ce||!r.name||!r.carbonNum||!r.verifyName||pe,Se=(0,a.useState)(!1),Te=i()(Se,2),ae=Te[0],me=Te[1],Ke=function(){Ie||ae||(me(!0),je(r.files).then(function(m){var c;return(0,N._Q)({name:r.name,loadNumber:r.carbonNum||n.loadNumber,description:r.desc||"",fileList:m,verifyUserId:r.verifyName||(n==null||(c=n.verifyUser)===null||c===void 0?void 0:c.id)}).then(function(){return F(!0)}).catch(console.error).finally(function(){me(!1)})}))},Be=!n||!ee||!ce||(r.name||n.name)===n.name&&(r.desc||n.description)===n.description&&r.loadNumber===n.loadNumber&&r.verifyName===n.verifyUserId&&pe,Fe=function(){if(!(Be||ae)){var m;if(me(!0),r.files)m=je(r.files).then(function(ne){var Oe;return(0,N.u_)(n.id,{name:r.name||n.name,loadNumber:r.carbonNum||n.loadNumber,description:r.desc||n.description,fileList:ne,verifyUserId:r.verifyName||(n==null||(Oe=n.verifyUser)===null||Oe===void 0?void 0:Oe.id)})});else{var c;m=(0,N.u_)(n.id,{name:r.name,loadNumber:r.carbonNum||n.loadNumber,description:r.desc,verifyUserId:r.verifyName||(n==null||(c=n.verifyUser)===null||c===void 0?void 0:c.id)})}m.then(function(){return F(!0)}).catch(console.error).finally(function(){me(!1)})}},Ue=!n||pe||!r.functionalUnit||!r.evaluationBoundary||!r.evaluationBasis||!r.evaluationExpireTime,ze=function(){Ue||!r.files||ae||(me(!0),je(r.files).then(function(m){return(0,N.A6)(n.id,{fileList:m,state:!0,functionalUnit:r.functionalUnit,evaluationBoundary:r.evaluationBoundary,evaluationBasis:r.evaluationBasis,certificateNumber:r.certificateNumber,evaluationExpireTime:r.evaluationExpireTime+" 00:00:00"})}).then(function(){return F(!0)}).catch(console.error).finally(function(){me(!1)}))},we={directory:"",webkitdirectory:""},ie="w-full  shrink-0 px-5 border border-[#DDDDDD]  h-[40px]  bg-[#F8F8F8] rounded-lg",Re=T==="verify",Ze=(0,a.useMemo)(function(){var E;if(pe||!r.files)return"\u9A8C\u8BC1\u6587\u4EF6";var m=((E=r.files.item(0))===null||E===void 0?void 0:E.webkitRelativePath.split("/")[0])||"\u9A8C\u8BC1\u6587\u4EF6";return(0,Y.lS)(m,10,10)},[r.files,pe]),Le={label:Re?"\u9A8C\u8BC1\u6587\u6863":"\u9644\u4EF6",dataIndex:"verifyDoc",render:function(){return(0,t.jsx)(a.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 mt-[-15px]",children:[(0,t.jsx)("input",l()(l()({},we),{},{ref:W,type:"file",hidden:!0,onChange:function(c){return U({files:c.target.files})}})),(0,t.jsx)(v.SW,{}),(0,t.jsx)(Ce,{value:Ze}),(0,t.jsx)(f.Z,{onClick:function(c){var ne;return!ae&&((ne=W.current)===null||ne===void 0?void 0:ne.click())},busy:ae,btnText:" \u9009\u62E9\u6587\u4EF6\u5939"})]})})}},Ve={verifyName:n==null?void 0:n.name,verifyId:n==null?void 0:n.id,createUser:n==null||(Q=n.createUser)===null||Q===void 0?void 0:Q.name,organizationName:n==null||(k=n.organization)===null||k===void 0?void 0:k.name,description:n==null?void 0:n.description,loadName:n==null||(K=n.inventory)===null||K===void 0?void 0:K.loadName,loadNumber:n==null?void 0:n.loadNumber,verifyUser:n==null||(L=n.verifyUser)===null||L===void 0?void 0:L.name,verifyDoc:"",functionalUnit:r.functionalUnit||(n==null?void 0:n.functionalUnit),evaluationBoundary:r.evaluationBoundary||(n==null?void 0:n.evaluationBoundary),evaluationBasis:r.evaluationBasis||(n==null?void 0:n.evaluationBasis),evaluationExpireTime:r.evaluationExpireTime||(n==null?void 0:n.evaluationExpireTime)},$e={verifyRecord:n==null?void 0:n.name,carbonNum:n==null?void 0:n.loadNumber,description:r.desc||(n==null?void 0:n.description),verifyName:"verifyName",createName:b==null?void 0:b.name,organizationName:b==null||(J=b.organization)===null||J===void 0?void 0:J.name},ke=[{label:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"verifyName"},{label:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"verifyId"},{label:"\u53D1\u8D77\u4EBA",dataIndex:"createUser"},{label:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"organizationName"},{label:"\u63CF\u8FF0",dataIndex:"description"},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"loadName"},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber"},{label:"\u9A8C\u8BC1\u4EBA",dataIndex:"verifyUser"},Le,{label:"\u8BC1\u4E66\u7F16\u53F7",dataIndex:"certificateNumber",render:function(){return(0,t.jsx)(z.Z,{value:r.certificateNumber||(n==null?void 0:n.certificateNumber),onChange:function(c){return U({certificateNumber:c.target.value})},maxLength:30,className:ie})}},{label:"\u529F\u80FD\u5355\u4F4D",dataIndex:"functionalUnit",render:function(){return(0,t.jsx)(z.Z,{value:r.functionalUnit||(n==null?void 0:n.functionalUnit),onChange:function(c){return U({functionalUnit:c.target.value})},maxLength:30,className:ie})}},{label:"\u8BC4\u4EF7\u8FB9\u754C",dataIndex:"evaluationBoundary",render:function(){return(0,t.jsx)(z.Z,{value:r.evaluationBoundary||(n==null?void 0:n.evaluationBoundary),onChange:function(c){return U({evaluationBoundary:c.target.value})},maxLength:30,className:ie})}},{label:"\u8BC4\u4EF7\u4F9D\u636E",dataIndex:"evaluationBasis",render:function(){return(0,t.jsx)(z.Z,{value:r.evaluationBasis||(n==null?void 0:n.evaluationBasis),onChange:function(c){return U({evaluationBasis:c.target.value})},maxLength:30,className:ie})}},{label:"\u8BC4\u4EF7\u6709\u6548\u671F",dataIndex:"evaluationExpireTime",render:function(){return(0,t.jsx)($.default,{defaultValue:r.evaluationExpireTime||(n==null?void 0:n.evaluationExpireTime)&&be()(r.evaluationExpireTime||(n==null?void 0:n.evaluationExpireTime)),onChange:function(c,ne){U({evaluationExpireTime:ne})},className:ie})}}],He=[{label:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"verifyRecord",render:function(){return(0,t.jsx)(z.Z,{value:r.name||(n==null?void 0:n.name),onChange:function(c){return U({name:c.target.value})},maxLength:30,style:{marginTop:"-15px"},className:ie})}},{label:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"carbonNum",render:function(){return(0,t.jsx)(re.default,{value:r.carbonNum||(n==null?void 0:n.loadNumber),style:{height:"40px",width:"100%",marginTop:"-15px"},onChange:function(c){return U({carbonNum:c})},options:(0,Y.ry)("loadName","loadNumber",ee)})}},{label:"\u63CF\u8FF0",dataIndex:"description",render:function(){return(0,t.jsx)(z.Z,{style:{marginTop:"-15px"},value:r.desc||(n==null?void 0:n.description),onChange:function(c){return U({desc:c.target.value})},maxLength:100,className:ie})}},{label:"\u9009\u62E9\u9A8C\u8BC1\u4EBA",dataIndex:"verifyName",render:function(){var m;return(0,t.jsx)(re.default,{value:r.verifyName||(n==null||(m=n.verifyUser)===null||m===void 0?void 0:m.id),style:{marginTop:"-15px",height:"40px",borderColor:"#DDDDDD",backgroundColor:"#F8F8F8",width:"100%"},onChange:function(ne){return U({verifyName:ne})},options:(0,Y.ry)("name","id",ce)})}},{label:"\u53D1\u8D77\u4EBA",dataIndex:"createName",render:function(){return(0,t.jsx)("div",{className:" mt-[-15px]",children:b==null?void 0:b.name})}},{label:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"organizationName",render:function(){var m;return(0,t.jsx)("div",{className:" mt-[-15px]",children:b==null||(m=b.organization)===null||m===void 0?void 0:m.name})}},Le];return(0,t.jsx)(a.Fragment,{children:(0,t.jsx)(x.u_,{className:"rounded-lg",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[16px] leading-5 font-bold",title:T==="new"?"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55":"\u7F16\u8F91\u9A8C\u8BC1\u8BB0\u5F55",line:!0,bottomBtn:!ve&&(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-5  w-full ",children:[T==="new"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.u,{size:"large",defStyle:"btn-primary-1",className:"flex-1",onClick:function(){return F(!1)},children:"\u53D6\u6D88"}),(0,t.jsx)(y.u,{size:"large",busy:ae,disabled:Ie,defStyle:"btn-primary",className:"flex-1",onClick:Ke,children:"\u786E\u5B9A"})]}),T==="editor"&&(0,t.jsx)(y.u,{busy:ae,size:"large",disabled:Be,className:"flex-1",onClick:Fe,children:"\u63D0\u4EA4\u66F4\u65B0"}),T==="verify"&&(0,t.jsx)(y.u,{busy:ae,size:"large",disabled:Ue,className:"flex-1",onClick:ze,children:"\u63D0\u4EA4\u9A8C\u8BC1"})]}),onClose:function(){return F(!1)},children:(0,t.jsxs)("div",{className:"flex flex-col py-[1px] gap-5 px-5 w-[640px] min-h-[6.25rem] max-h-mc overflow-y-auto",children:[ve&&(0,t.jsx)(_.g,{}),!ve&&(0,t.jsx)(t.Fragment,{children:Re?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(o.Z,{options:ke,data:Ve,optionEmptyText:"-",layout:"vertical",column:1,contentStyle:{color:"#999999",fontWeight:"400",fontSize:"14px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"14px"}})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(o.Z,{options:He,data:$e,optionEmptyText:"-",layout:"vertical",column:1,contentStyle:{color:"#999999",fontWeight:"400",fontSize:"14px"},labelStyle:{color:"#000000",fontWeight:"400",fontSize:"15px",marginTop:"-5px"}})})})]})})})},De=le,ge=e(30905),se=e.n(ge),xe=e(64470),Ee=function(M){var Q=M.closeModal,k=M.fileList,K=(0,a.useState)(!1),L=i()(K,2),J=L[0],F=L[1],te=(0,P.h3)(),q=function(){var T=R()(d()().mark(function W(){var S,b,H,A;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return F(!0),u.prev=1,S=new(se()),b="",k.forEach(function(oe){b=oe.fileName.split("/")[0];var ee=xe.default.get(oe.downloadUrl,{responseType:"arraybuffer"}).then(function(w){return w.data});S.file(oe.fileName,ee)}),u.next=7,S.generateAsync({type:"blob"});case 7:H=u.sent,A=document.createElement("a"),A.href=URL.createObjectURL(H),A.download="".concat(b,".zip"),A.click(),URL.revokeObjectURL(A.href),u.next=18;break;case 15:u.prev=15,u.t0=u.catch(1),te("\u6587\u4EF6\u4E0B\u8F7D\u51FA\u9519\uFF01");case 18:return u.prev=18,F(!1),u.finish(18);case 21:case"end":return u.stop()}},W,null,[[1,15,18,21]])}));return function(){return T.apply(this,arguments)}}();return(0,t.jsx)(a.Fragment,{children:(0,t.jsx)(x.u_,{onClose:Q,title:"\u67E5\u770B\u6587\u4EF6\u5939",line:!0,bottomBtn:(0,t.jsx)(y.u,{size:"large",disabled:J,className:"bg-[#29953A] w-full h-[50px] rounded-lg text-[#FFFFFF] ",onClick:q,children:"\u4E0B\u8F7D"}),children:(0,t.jsx)("div",{className:"px-5 overflow-y-auto  max-h-[260px]",children:k.map(function(T,W){var S=T.fileName.split("/");return(0,t.jsx)("div",{id:"view",className:"w-[640px] h-[34px] flex items-center ",children:(0,t.jsx)("span",{className:"ml-[10px] leading-5 text-[14px] font-normal",children:S[S.length-1]})},"file_".concat(W))})})})})},Pe=Ee;function de(){var ue=(0,P.oR)(),M=ue.userData,Q=(0,a.useState)(1),k=i()(Q,2),K=k[0],L=k[1],J=(0,a.useState)(!1),F=i()(J,2),te=F[0],q=F[1],T=(0,a.useState)(!1),W=i()(T,2),S=W[0],b=W[1],H=(0,a.useRef)([]),A=(0,a.useRef)(),n=function(Z){H.current=Z,b(!0)},u=(0,a.useCallback)(function(j){q(!0),A.current={type:h().isEmpty(j)?"new":(M==null?void 0:M.role)==="verify"?"verify":"editor",recordId:j.id}},[M]),oe=(0,a.useMemo)(function(){return[{title:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"name",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"id",width:160,ellipsis:!0},{title:"\u53D1\u8D77\u4EBA",dataIndex:"_createUserName",width:160,ellipsis:!0},{title:"\u7EC4\u7EC7\u673A\u6784",width:160,ellipsis:!0,dataIndex:"_organizationName"},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"_loadName",width:160,ellipsis:!0},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber",width:170,renderText:p.zL},{title:"\u9644\u4EF6",width:160,render:function(Z,r){return(0,t.jsxs)("div",{onClick:function(){return n(r.attachmentFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,t.jsx)(v.SW,{width:"14"}),(0,t.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]})}},{title:"\u6700\u540E\u7F16\u8F91",dataIndex:"updateTime",valueType:"dateTime",width:170},{title:"\u9A8C\u8BC1\u4EBA",dataIndex:"_verifyUserName",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u6587\u6863",width:130,render:function(Z,r){return r.verifyFileList.length?(0,t.jsxs)("div",{onClick:function(){return n(r.verifyFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,t.jsx)(v.SW,{width:"14"}),(0,t.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]}):null}},{title:"\u9A8C\u8BC1\u72B6\u6001",width:130,render:function(Z,r){return(0,t.jsx)("span",{className:"",children:r.state?"\u5DF2\u9A8C\u8BC1":""})}},{title:"\u9A8C\u8BC1\u65F6\u95F4",dataIndex:"proofTime",valueType:"dateTime",width:170},{title:"\u64CD\u4F5C",width:120,valueType:"option",render:function(Z,r){return r.state?[]:[(0,t.jsx)("div",{className:"flex justify-between flex-1 text-green-2 break-keep",children:(0,t.jsx)("div",{className:"flex items-center font-normal justify-center cursor-pointer leading-[27px]",onClick:function(){return u(r)},children:"\u7F16\u8F91"})},"edit")]}}]},[u]),ee=(0,g.Y5)(K),w=ee.data,Me=ee.isLoading,ce=ee.mutate,ve=(0,a.useMemo)(function(){return((w==null?void 0:w.records)||[]).map(function(j,Z){var r,U,fe,_e;return l()(l()({},j),{},{key:"verify_"+Z,_createUserName:(r=j.createUser)===null||r===void 0?void 0:r.name,_organizationName:(U=j.organization)===null||U===void 0?void 0:U.name,_loadName:(fe=j.inventory)===null||fe===void 0?void 0:fe.loadName,_verifyUserName:(_e=j.verifyUser)===null||_e===void 0?void 0:_e.name})})},[w]);return(0,t.jsxs)(B.Z,{title:"\u9A8C\u8BC1\u7BA1\u7406\u5217\u8868",extra:(M==null?void 0:M.role)==="admin"?[(0,t.jsx)(y.u,{onClick:function(){return u({})},children:"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55"},"key_new_verify")]:[],children:[(0,t.jsx)("div",{className:"bg-white",children:(0,t.jsx)(p.ZP,{columns:oe,dataSource:ve,loading:Me,scroll:{x:scrollX},pagination:{pageSize:10,total:(w==null?void 0:w.total)||0,current:K,onChange:function(Z){L(Z)}}})}),te&&A.current&&(0,t.jsx)(De,{type:A.current.type,recordId:A.current.recordId,closeModal:function(){L(1),K===1&&ce(),q(!1),A.current=void 0}}),S&&(0,t.jsx)(Pe,{fileList:H.current,closeModal:function(){b(!1)}})]})}var Ne=de,Ae=Ne}}]);

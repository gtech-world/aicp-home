"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2941],{64082:function(le,O,e){var B=e(48651),m=e.n(B),g=e(38046),l=e.n(g),W=e(30541),R=e(33421),b=e(68591),P=e.n(b),D=e(63342),j=["className"];function c(t){var i=t.className,$=l()(t,j),h=(0,R.l)(function(v){var o=v.token;return{".ant-page-header":{padding:"1rem 1.5rem",backgroundColor:o.colorBgBase,".ant-breadcrumb":{fontSize:".875rem",paddingBlockStart:"0 !important"},".ant-page-header-heading-title":{fontSize:"1.25rem"}},".ant-pro-grid-content":{padding:"1.5rem",backgroundColor:"transparent",".ant-pro-page-container-children-content":{padding:0,paddingBlock:"0 !important"},".ant-pro-page-container-children-container":{paddingBlock:"0 !important",paddingInline:"0 !important"}}}});return(0,D.jsx)(W._z,m()({className:P()(i,h)},$))}O.Z=c},18842:function(le,O,e){e.d(O,{rx:function(){return v},zL:function(){return h}});var B=e(48651),m=e.n(B),g=e(38046),l=e.n(g),W=e(81123),R=e(54695),b=e(33421),P=e(9021),D=e(68591),j=e.n(D),c=e(97207),t=e.n(c),i=e(63342),$=["className","columns"];function h(o){return t().size(o)>=16?(0,i.jsx)(P.Z,{title:o,children:(0,W.lS)(o,8,8)}):o}function v(o){var C=o.className,f=o.columns,M=l()(o,$),L=(0,b.l)(function(N){var te=N.token;return{".ant-table-container":{borderStartStartRadius:"0 !important",borderStartEndRadius:"0 !important"},".ant-pro-card-body":{paddingInline:0,paddingBlock:0},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:first-child":{borderStartStartRadius:"0 !important"},".ant-table-wrapper .ant-table-container table>thead>tr:first-child >*:last-child":{borderStartEndRadius:"0 !important"},".ant-pagination-item, .ant-pagination-prev, .ant-pagination-next":{borderRadius:"2px !important",minWidth:"30px !important",height:"30px !important",lineHeight:"28px !important"},".ant-pagination-total-text":{lineHeight:"30px !important",visibility:"hidden"}}}),S=t().sumBy(f,"width");return(0,i.jsx)(R.Z,m()({bordered:!0,columns:f,scroll:{x:S},search:!1,options:!1,rowKey:"key",className:j()(C,"p-6",L)},M))}O.ZP=v},9991:function(le,O,e){e.d(O,{u:function(){return $},z:function(){return i}});var B=e(5677),m=e.n(B),g=e(48651),l=e.n(g),W=e(38046),R=e.n(W),b=e(68591),P=e.n(b),D=e(68717),j=e(63342),c=["children","className"],t=["busy","disabled","className","defStyle","children"];function i(h){var v=h.children,o=h.className,C=R()(h,c);return(0,j.jsx)("button",l()(l()({},C),{},{className:P()(o),children:h.children}))}function $(h){var v,o=h.busy,C=h.disabled,f=h.className,M=h.defStyle,L=M===void 0?"btn-primary":M,S=h.children,N=R()(h,t);return(0,j.jsx)("button",l()(l()({className:P()(f,"leading-none",(v={},m()(v,L,!C),m()(v,"btn-disable",C),v))},N),{},{children:o?(0,j.jsx)(D.fCD,{className:"animate-spin"}):S}))}},95968:function(le,O,e){e.d(O,{u_:function(){return C}});var B=e(48651),m=e.n(B),g=e(86516),l=e.n(g),W=e(38046),R=e.n(W),b=e(97980),P=e(68591),D=e.n(P),j=e(79685),c=e(50374),t=e(22798),i=e(63342),$=["className","title","onClose","outClose","titleClassName","containerClassName","children"],h={current:null};h.current=document.body;function v(f){var M=f.title,L=f.onClose,S=f.titleClassName,N=f.containerClassName;return(0,i.jsxs)("div",{className:D()("flex items-center justify-between pb-6 mb-6 text-xl font-bold border-b mt-2.5 mx-5",N),children:[(0,i.jsx)("span",{className:D()("max-w-[70%] overflow-hidden text-ellipsis whitespace-nowrap",S),children:M}),(0,i.jsx)(t.q5L,{onClick:function(se){se.stopPropagation(),L&&L()},className:"text-2xl cursor-pointer"})]})}function o(){return _jsx("div",{})}function C(f){var M=f.className,L=f.title,S=f.onClose,N=f.outClose,te=N===void 0?!1:N,se=f.titleClassName,he=f.containerClassName,pe=f.children,me=R()(f,$),n=(0,j.useRef)(null),p=(0,j.useState)(!0),A=l()(p,2),ee=A[0],X=A[1],ae=function(){S&&(X(!0),setTimeout(function(){return S()},300))},Ee=(0,b.R)(function(ce){ce.stopPropagation();var je=n.current&&n.current!==ce.target&&n.current.contains(ce.target);!je&&te&&ae()});return(0,j.useEffect)(function(){X(!1)},[]),h.current?(0,c.createPortal)((0,i.jsx)("div",m()(m()({},me),{},{ref:n,className:D()("fixed left-0  top-0 w-full h-full overflow-auto z-[500] flex justify-center items-center",{"transition-[background_ease_300ms]":!0,"bg-black/0":ee,"bg-black/25":!ee},M),onClick:Ee,children:(0,i.jsxs)("div",{id:"mo",className:D()("bg-white rounded p-5 min-w-[20rem] min-h-[150]",{"transition-[all_ease_300ms]":!0,"scale-0":ee,"scale-100":!ee}),children:[(0,i.jsx)(v,{title:L,containerClassName:he,titleClassName:se,onClose:ae}),pe]})})),h.current):null}},27202:function(le,O,e){e.d(O,{dW:function(){return i},ub:function(){return h}});var B=e(48651),m=e.n(B),g=e(86516),l=e.n(g),W=e(7654),R=e(68591),b=e.n(R),P=e(79685),D=e(30681),j=e(12239),c=e(76852),t=e(63342);function i(v){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=(0,P.useState)(o),f=l()(C,2),M=f[0],L=f[1];return(0,P.useEffect)(function(){L(o)},[v,o]),{onChange:L,items:v,current:M}}function $(v){var o=v.items,C=v.current,f=v.onChange,M=v.className,L=M===void 0?"bg-white text-black px-5 py-3 text-lg rounded-lg w-[31.25rem] mo:w-full mo:text-sm":M,S=v.currentClassName,N=S===void 0?"flex justify-between items-center":S,te=v.openClassName,se=te===void 0?"max-h-[18rem] bg-white  rounded-lg py-3 ":te,he=o[C]?o[C].text:"",pe=(0,j.Z)(!1),me=l()(pe,2),n=me[0],p=me[1],A=(0,P.useCallback)(function(X){C!==X&&f(X)},[C]),ee=(0,W.E)("t-side");return(0,c.Z)(ee,function(){return n&&p(!1)}),o.length===0?null:(0,t.jsxs)("div",{ref:ee,className:b()("relative cursor-pointer",L),onClick:function(){return p()},children:[(0,t.jsxs)("div",{className:N,children:[(0,t.jsx)("span",{className:"truncate",children:he}),n?(0,t.jsx)(D.pzk,{}):(0,t.jsx)(D._i7,{})]}),n&&(0,t.jsx)("div",{className:b()("absolute z-[100] left-0 w-full overflow-x-hidden overflow-y-auto",se),style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:(0,t.jsx)("div",{className:"",children:o.map(function(X,ae){return(0,t.jsx)("div",{style:{},className:b()("w-full break-all px-5 py-2 text-sm hover:bg-gray-16",{"text-green-2":ae===C}),onClick:function(){return A(ae)},children:X.text},"select_item_".concat(ae))})})})]})}var h=function(o){return(0,t.jsx)($,m()({className:"h-[50px] px-5 items-center bg-stone-50 rounded-lg border border-neutral-200",currentClassName:"h-full flex justify-between items-center"},o))}},8965:function(le,O,e){e.d(O,{H4:function(){return W},Kv:function(){return l},Tz:function(){return b},We:function(){return R},Y5:function(){return j},cc:function(){return D},uU:function(){return P}});var B=e(97207),m=e.n(B),g=e(89585);function l(c){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,g.ZP)("/api/product-system/".concat(c,"/detail"),{refreshInterval:t})}function W(c){return(0,g.ZP)(m().isNil(c)?null:"/api/verifyRecord/".concat(c,"/detail"))}function R(c){return(0,g.ZP)(c?"/api/inventory/all":null)}function b(c){return(0,g.ZP)(c?"/api/verifyRecord/verifiers":null)}function P(c){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,g.ZP)("/api/product-system/list/?pageNum=".concat(c,"&pageSize=10"),{refreshInterval:t})}function D(c){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,g.ZP)("/api/inventory/list/?pageNum=".concat(c,"&pageSize=10"),{refreshInterval:t})}function j(c){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,g.ZP)("/api/verifyRecord/list/?pageNum=".concat(c,"&pageSize=10"),{refreshInterval:t})}},97980:function(le,O,e){e.d(O,{R:function(){return m}});var B=e(79685);function m(g){var l=(0,B.useRef)(g);return(0,B.useLayoutEffect)(function(){l.current=g}),(0,B.useCallback)(function(){return l.current&&l.current.apply(l,arguments)},[])}},11187:function(le,O,e){e.r(O),e.d(O,{default:function(){return We}});var B=e(48651),m=e.n(B),g=e(86516),l=e.n(g),W=e(64082),R=e(18842),b=e(9991),P=e(99095),D=e(25777),j=e(8965),c=e(97207),t=e.n(c),i=e(79685),$=e(70300),h=e.n($),v=e(11e3),o=e(95968),C=e(27202),f=e(22786),M=e.n(f),L=e(46299),S=e.n(L),N=e(54916);function te(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,E=(0,i.useRef)(new AbortController),ne=function(w){var I=w,re=function(){if(I.length!==0){var T=I[0];return I=t().drop(I),{file:T,index:w.length-I.length-1}}},k=t().min([ue,I.length]),Y=t().range(w.length),V=function(){var Q=S()(M()().mark(function T(){var x,z,J,y;return M()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(x=re(),!x){s.next=10;break}return z=x.file,J=x.index,s.next=6,(0,N.qM)(z,{signal:E.current.signal});case 6:y=s.sent,Y[J]=y,s.next=11;break;case 10:return s.abrupt("return");case 11:s.next=0;break;case 13:case"end":return s.stop()}},T)}));return function(){return Q.apply(this,arguments)}}();return Promise.all(t().range(k).map(function(){return V()})).then(function(){return Y})};return[ne,function(){try{E.current.abort()}catch(Z){console.info("abort upfiles")}}]}var se=e(81123),he=e(68591),pe=e.n(he),me=e(98919),n=e(63342),p=function(E){return(0,n.jsxs)("div",{className:"w-full flex flex-col gap-2.5",children:[(0,n.jsxs)("span",{className:"font-normal leading-6 text-[16px]",children:[E.title,"\uFF1A"]}),E.children]})},A=function(E){return(0,n.jsx)("div",{className:"font-normal leading-[21.79px] text-[16px] text-gray-9",children:E.value})},ee=function(E){var ne,Z,w,I,re,k,Y,V=E.closeModal,Q=E.recordId,T=E.type,x=T===void 0?"new":T,z=(0,i.useRef)(null),J=(0,P.oR)(),y=J.userData,de=(0,j.H4)(Q),s=de.isLoading,r=de.data,ie=(0,j.We)(x==="new"||x==="editor"),H=ie.isLoading,G=ie.data,Ce=(0,j.Tz)(x==="new"||x==="editor"),be=Ce.isLoading,_=Ce.data,F=s||H||be,U=(0,i.useMemo)(function(){return[(G||[]).map(function(u){return m()(m()({},u),{},{text:u.loadName})}),t().findIndex(G,function(u){return u.loadNumber===(r==null?void 0:r.loadNumber)})]},[G,r]),K=C.dW.apply(void 0,h()(U)),xe=(0,i.useMemo)(function(){return[(_||[]).map(function(u){return m()(m()({},u),{},{text:u.name})}),t().findIndex(_,function(u){var d;return u.id===(r==null||(d=r.verifyUser)===null||d===void 0?void 0:d.id)})]},[_,r]),q=C.dW.apply(void 0,h()(xe)),Fe=(0,me.Z)({verifyState:!0}),Me=l()(Fe,2),a=Me[0],_e=Me[1],Ke=te(),Oe=l()(Ke,2),De=Oe[0],we=Oe[1];(0,i.useEffect)(function(){return we},[]);var ge=!a.files||a.files.length===0||a.files.length>20||t().findIndex(a.files,function(u){return u.size>=1024*1024*1024*2||u.name.length>=128})>=0,Be=!G||!_||!a.name||K.current<0||q.current<0||ge,Ve=(0,i.useState)(!1),Ne=l()(Ve,2),oe=Ne[0],ve=Ne[1],ze=function(){Be||oe||(ve(!0),De(a.files).then(function(d){return(0,N._Q)({name:a.name,loadNumber:G[K.current].loadNumber,description:a.desc||"",fileList:d,verifyUserId:_[q.current].id}).then(function(){return V(!0)}).catch(console.error).finally(function(){ve(!1)})}))},Ae=!r||!G||!_||(a.name||r.name)===r.name&&(a.desc||r.description)===r.description&&((ne=G[K.current])===null||ne===void 0?void 0:ne.loadNumber)===r.loadNumber&&((Z=_[q.current])===null||Z===void 0?void 0:Z.id)===r.verifyUserId&&ge,$e=function(){if(!(Ae||oe)){var d;ve(!0),a.files?d=De(a.files).then(function(ye){return(0,N.u_)(r.id,{name:a.name||r.name,loadNumber:G[K.current].loadNumber,description:a.desc||r.description,fileList:ye,verifyUserId:_[q.current].id})}):d=(0,N.u_)(r.id,{name:a.name,loadNumber:G[K.current].loadNumber,description:a.desc,verifyUserId:_[q.current].id}),d.then(function(){return V(!0)}).catch(console.error).finally(function(){ve(!1)})}},Ie=!r||ge||!a.functionalUnit||!a.evaluationBoundary||!a.evaluationBasis||!a.evaluationExpireTime,Ze=function(){Ie||!a.files||oe||(ve(!0),De(a.files).then(function(d){return(0,N.A6)(r.id,{fileList:d,state:!0,functionalUnit:a.functionalUnit,evaluationBoundary:a.evaluationBoundary,evaluationBasis:a.evaluationBasis,evaluationExpireTime:a.evaluationExpireTime+" 00:00:00"})}).then(function(){return V(!0)}).catch(console.error).finally(function(){ve(!1)}))},ke={directory:"",webkitdirectory:""},fe="w-full shrink-0 px-5 border border-[#DDDDDD]  h-[50px]  bg-[#F8F8F8] rounded-lg",Re=x==="verify",He=(0,i.useMemo)(function(){var u;if(ge||!a.files)return"\u9A8C\u8BC1\u6587\u4EF6";var d=((u=a.files.item(0))===null||u===void 0?void 0:u.webkitRelativePath.split("/")[0])||"\u9A8C\u8BC1\u6587\u4EF6";return(0,se.lS)(d,10,10)},[a.files,ge]),Le=function(){return(0,n.jsx)(p,{title:Re?"\u9A8C\u8BC1\u6587\u6863":"\u9644\u4EF6",children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,n.jsx)("input",m()(m()({},ke),{},{ref:z,type:"file",hidden:!0,onChange:function(ye){return _e({files:ye.target.files})}})),(0,n.jsx)(D.SW,{}),(0,n.jsx)(A,{value:He}),(0,n.jsx)("div",{onClick:function(ye){var Pe;return!oe&&((Pe=z.current)===null||Pe===void 0?void 0:Pe.click())},className:pe()("flex  rounded-[4px] leading-4 text-[16px] bg-[#F1F1F1] w-[100px] h-[24px]  text-center items-center justify-center ",oe?"cursor-not-allowed":"cursor-pointer"),children:"\u9009\u62E9\u6587\u4EF6\u5939"})]})})};return(0,n.jsx)(i.Fragment,{children:(0,n.jsxs)(o.u_,{className:"rounded-lg",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",title:x==="new"?"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55":"\u7F16\u8F91\u9A8C\u8BC1\u8BB0\u5F55",onClose:function(){return V(!1)},children:[(0,n.jsxs)("div",{className:"flex flex-col py-[1px] gap-5 px-5 w-[640px] min-h-[6.25rem] max-h-mc overflow-y-auto",children:[F&&(0,n.jsx)(v.g,{}),!F&&(0,n.jsx)(n.Fragment,{children:Re?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p,{title:"\u9A8C\u8BC1\u8BB0\u5F55",children:(0,n.jsx)(A,{value:r==null?void 0:r.name})}),(0,n.jsx)(p,{title:"\u9A8C\u8BC1\u8BB0\u5F55ID",children:(0,n.jsx)(A,{value:r==null?void 0:r.id})}),(0,n.jsx)(p,{title:"\u53D1\u8D77\u4EBA",children:(0,n.jsx)(A,{value:r==null||(w=r.createUser)===null||w===void 0?void 0:w.name})}),(0,n.jsx)(p,{title:"\u7EC4\u7EC7\u673A\u6784",children:(0,n.jsx)(A,{value:r==null||(I=r.organization)===null||I===void 0?void 0:I.name})}),(0,n.jsx)(p,{title:"\u63CF\u8FF0",children:(0,n.jsx)(A,{value:r==null?void 0:r.description})}),(0,n.jsx)(p,{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",children:(0,n.jsx)(A,{value:r==null||(re=r.inventory)===null||re===void 0?void 0:re.loadName})}),(0,n.jsx)(p,{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",children:(0,n.jsx)(A,{value:r==null?void 0:r.loadNumber})}),(0,n.jsx)(p,{title:"\u9A8C\u8BC1\u4EBA",children:(0,n.jsx)(A,{value:r==null||(k=r.verifyUser)===null||k===void 0?void 0:k.name})}),Le(),(0,n.jsx)(p,{title:"\u529F\u80FD\u5355\u4F4D",children:(0,n.jsx)("input",{value:a.functionalUnit||(r==null?void 0:r.functionalUnit),onChange:function(d){return _e({functionalUnit:d.target.value})},maxLength:30,className:fe})}),(0,n.jsx)(p,{title:"\u8BC4\u4EF7\u8FB9\u754C",children:(0,n.jsx)("input",{value:a.evaluationBoundary||(r==null?void 0:r.evaluationBoundary),onChange:function(d){return _e({evaluationBoundary:d.target.value})},maxLength:30,className:fe})}),(0,n.jsx)(p,{title:"\u8BC4\u4EF7\u4F9D\u636E",children:(0,n.jsx)("input",{value:a.evaluationBasis||(r==null?void 0:r.evaluationBasis),onChange:function(d){return _e({evaluationBasis:d.target.value})},maxLength:30,className:fe})}),(0,n.jsx)(p,{title:"\u8BC4\u4EF7\u6709\u6548\u671F",children:(0,n.jsx)("input",{value:a.evaluationExpireTime||(r==null?void 0:r.evaluationExpireTime),type:"date",onChange:function(d){console.info("inputTime:",d.target.value),_e({evaluationExpireTime:d.target.value})},maxLength:30,className:fe})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p,{title:"\u9A8C\u8BC1\u8BB0\u5F55",children:(0,n.jsx)("input",{value:a.name||(r==null?void 0:r.name),onChange:function(d){return _e({name:d.target.value})},maxLength:30,className:fe})}),(0,n.jsx)(p,{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",children:(0,n.jsx)(C.ub,m()({},K))}),(0,n.jsx)(p,{title:"\u63CF\u8FF0",children:(0,n.jsx)("input",{value:a.desc||(r==null?void 0:r.description),onChange:function(d){return _e({desc:d.target.value})},maxLength:100,className:fe})}),(0,n.jsx)(p,{title:"\u9009\u62E9\u9A8C\u8BC1\u4EBA",children:(0,n.jsx)(C.ub,m()({},q))}),(0,n.jsx)(p,{title:"\u53D1\u8D77\u4EBA",children:(0,n.jsx)(A,{value:y==null?void 0:y.name})}),(0,n.jsx)(p,{title:"\u7EC4\u7EC7\u673A\u6784",children:(0,n.jsx)(A,{value:y==null||(Y=y.organization)===null||Y===void 0?void 0:Y.name})}),Le()]})})]}),!F&&(0,n.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5 w-full px-5",children:[x==="new"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.u,{defStyle:"btn-primary-1",className:"flex-1",onClick:function(){return V(!1)},children:"\u53D6\u6D88"}),(0,n.jsx)(b.u,{busy:oe,disabled:Be,defStyle:"btn-primary",className:"flex-1",onClick:ze,children:"\u786E\u5B9A"})]}),x==="editor"&&(0,n.jsx)(b.u,{busy:oe,disabled:Ae,className:"flex-1",onClick:$e,children:"\u63D0\u4EA4\u66F4\u65B0"}),x==="verify"&&(0,n.jsx)(b.u,{busy:oe,disabled:Ie,className:"flex-1",onClick:Ze,children:"\u63D0\u4EA4\u9A8C\u8BC1"})]})]})})},X=ee,ae=e(30905),Ee=e.n(ae),ce=e(64470),je=function(E){var ne=E.closeModal,Z=E.fileList,w=(0,i.useState)(!1),I=l()(w,2),re=I[0],k=I[1],Y=(0,P.h3)(),V=function(){var Q=S()(M()().mark(function T(){var x,z,J,y;return M()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return k(!0),s.prev=1,x=new(Ee()),z="",Z.forEach(function(r){z=r.fileName.split("/")[0];var ie=ce.default.get(r.downloadUrl,{responseType:"arraybuffer"}).then(function(H){return H.data});x.file(r.fileName,ie)}),s.next=7,x.generateAsync({type:"blob"});case 7:J=s.sent,y=document.createElement("a"),y.href=URL.createObjectURL(J),y.download="".concat(z,".zip"),y.click(),URL.revokeObjectURL(y.href),s.next=18;break;case 15:s.prev=15,s.t0=s.catch(1),Y("\u6587\u4EF6\u4E0B\u8F7D\u51FA\u9519\uFF01");case 18:return s.prev=18,k(!1),s.finish(18);case 21:case"end":return s.stop()}},T,null,[[1,15,18,21]])}));return function(){return Q.apply(this,arguments)}}();return(0,n.jsx)(i.Fragment,{children:(0,n.jsxs)(o.u_,{onClose:ne,title:"\u67E5\u770B\u6587\u4EF6\u5939",children:[(0,n.jsx)("div",{className:"px-5 overflow-y-auto  max-h-[260px]",children:Z.map(function(Q,T){var x=Q.fileName.split("/");return(0,n.jsx)("div",{id:"view",className:"w-[640px] h-[34px] flex items-center ",children:(0,n.jsx)("span",{className:"ml-[10px] leading-5 text-[16px] font-normal",children:x[x.length-1]})},"file_".concat(T))})}),(0,n.jsx)("button",{disabled:re,className:"bg-[#29953A] w-full h-[50px] rounded-lg text-[#FFFFFF] mt-5",onClick:V,children:"\u4E0B\u8F7D"})]})})},Te=je;function Ue(){var ue=(0,P.oR)(),E=ue.userData,ne=(0,i.useState)(1),Z=l()(ne,2),w=Z[0],I=Z[1],re=(0,i.useState)(!1),k=l()(re,2),Y=k[0],V=k[1],Q=(0,i.useState)(!1),T=l()(Q,2),x=T[0],z=T[1],J=(0,i.useRef)([]),y=(0,i.useRef)(),de=function(F){J.current=F,z(!0)},s=(0,i.useCallback)(function(_){V(!0),y.current={type:t().isEmpty(_)?"new":(E==null?void 0:E.role)==="verify"?"verify":"editor",recordId:_.id}},[E]),r=(0,i.useMemo)(function(){return[{title:"\u9A8C\u8BC1\u8BB0\u5F55",dataIndex:"name",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u8BB0\u5F55ID",dataIndex:"id",width:160,ellipsis:!0},{title:"\u53D1\u8D77\u4EBA",dataIndex:"_createUserName",width:160,ellipsis:!0},{title:"\u7EC4\u7EC7\u673A\u6784",width:160,ellipsis:!0,dataIndex:"_organizationName"},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21",dataIndex:"_loadName",width:160,ellipsis:!0},{title:"\u78B3\u8DB3\u8FF9\u6279\u6B21ID",dataIndex:"loadNumber",width:170,renderText:R.zL},{title:"\u9644\u4EF6",width:160,render:function(F,U){return(0,n.jsxs)("div",{onClick:function(){return de(U.attachmentFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,n.jsx)(D.SW,{}),(0,n.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]})}},{title:"\u6700\u540E\u7F16\u8F91",dataIndex:"updateTime",valueType:"dateTime",width:170},{title:"\u9A8C\u8BC1\u4EBA",dataIndex:"_verifyUserName",width:160,ellipsis:!0},{title:"\u9A8C\u8BC1\u6587\u6863",width:130,render:function(F,U){return U.verifyFileList.length?(0,n.jsxs)("div",{onClick:function(){return de(U.verifyFileList)},className:"w-[112px] flex flex-row items-center bg-[#F1F1F1] justify-center rounded cursor-pointer",children:[(0,n.jsx)(D.SW,{}),(0,n.jsx)("div",{className:"ml-2 ",children:"\u6587\u4EF6\u5939"})]}):null}},{title:"\u9A8C\u8BC1\u72B6\u6001",width:130,render:function(F,U){return(0,n.jsx)("span",{className:"",children:U.state?"\u5DF2\u9A8C\u8BC1":""})}},{title:"\u9A8C\u8BC1\u65F6\u95F4",dataIndex:"proofTime",valueType:"dateTime",width:170},{title:"\u64CD\u4F5C",width:120,valueType:"option",render:function(F,U){return U.state?[]:[(0,n.jsx)("div",{className:"flex justify-between flex-1 text-green-2 break-keep",children:(0,n.jsx)("div",{className:"flex items-center font-normal justify-center cursor-pointer leading-[27px]",onClick:function(){return s(U)},children:"\u7F16\u8F91"})},"edit")]}}]},[s]),ie=(0,j.Y5)(w),H=ie.data,G=ie.isLoading,Ce=ie.mutate,be=(0,i.useMemo)(function(){return((H==null?void 0:H.records)||[]).map(function(_,F){var U,K,xe,q;return m()(m()({},_),{},{key:"verify_"+F,_createUserName:(U=_.createUser)===null||U===void 0?void 0:U.name,_organizationName:(K=_.organization)===null||K===void 0?void 0:K.name,_loadName:(xe=_.inventory)===null||xe===void 0?void 0:xe.loadName,_verifyUserName:(q=_.verifyUser)===null||q===void 0?void 0:q.name})})},[H]);return(0,n.jsxs)(W.Z,{title:"\u9A8C\u8BC1\u7BA1\u7406\u5217\u8868",extra:(E==null?void 0:E.role)==="admin"?[(0,n.jsx)(b.u,{onClick:function(){return s({})},children:"\u65B0\u5EFA\u9A8C\u8BC1\u8BB0\u5F55"},"key_new_verify")]:[],children:[(0,n.jsx)("div",{className:"bg-white",children:(0,n.jsx)(R.ZP,{columns:r,dataSource:be,loading:G,scroll:{x:scrollX},pagination:{pageSize:10,total:(H==null?void 0:H.total)||0,onChange:function(F){I(F)}}})}),Y&&y.current&&(0,n.jsx)(X,{type:y.current.type,recordId:y.current.recordId,closeModal:function(){I(1),w===1&&Ce(),V(!1),y.current=void 0}}),x&&(0,n.jsx)(Te,{fileList:J.current,closeModal:function(){z(!1)}})]})}var Se=Ue,We=Se}}]);
